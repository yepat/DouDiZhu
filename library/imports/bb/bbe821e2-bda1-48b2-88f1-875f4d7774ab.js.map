{"version":3,"sources":["../../../../../assets/Script/dialog/assets/Script/dialog/taskItemControl.js"],"names":["GameNetMgr","require","PlayerDetailModel","config","cc","Class","extends","Component","properties","nodeGet","default","type","Node","nodeComplete","nodeProgrss","nodeGoto","labTitle","Label","labContent","labProgress","btnNode_goto","Button","opentype","onLoad","active","state","id","init","info","title","content","progress","string","goto","getClick","console","log","sendRequest","num","getTaskUnReward","setTaskUnReward","vv","audioMgr","playSFX","gotoClick","index","getRandom","shareTxt","shareImg","getShareImgPath","wx","shareAppMessage","imageUrl","query","uid","success","res","fail","onWantGotoRoom"],"mappings":"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","file":"taskItemControl.js","sourceRoot":"../../../../../assets/Script/dialog","sourcesContent":["var GameNetMgr = require(\"GameNetMgr\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\nvar config = require(\"config\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        nodeGet : {\n            default : null,\n            type : cc.Node\n        },\n        nodeComplete : {\n            default : null,\n            type : cc.Node\n        },\n        nodeProgrss : {\n            default : null,\n            type : cc.Node\n        },\n        nodeGoto : {\n            default : null,\n            type : cc.Node\n        },\n        labTitle : {\n            default : null,\n            type : cc.Label\n        },\n        labContent : {\n            default : null,\n            type : cc.Label\n        },\n        labProgress : {\n            default : null,\n            type : cc.Label\n        },\n        btnNode_goto : {\n            default : null,\n            type : cc.Button,\n            opentype : \"share\",\n        },\n\n    },\n    onLoad () {\n         this.nodeGet.active = false;\n         this.nodeComplete.active = false;\n         this.nodeProgrss.active = false;\n         this.nodeGoto.active = false;\n         this.state = 0;\n         this.id = 0;\n    },\n    init(info,title,content,progress){\n        this.state = info.state; //\"state\":状态 0未完成 1未领取 2已领取 \n        this.labTitle.string = title;\n        this.labContent.string = content;\n        this.id = info.id;\n        this.goto = info.goto;\n        if(this.state == \"0\"){ //进行中\n            this.nodeProgrss.active = true;\n            this.labProgress.string = progress;\n            if(this.goto == 2){\n                this.nodeGoto.active = true;\n            }\n        }else if(this.state == \"1\"){//领取\n            this.nodeGet.active = true;\n        }else if(this.state == \"2\"){//完成\n            this.nodeComplete.active = true;\n        }\n    },\n    getClick(){\n        if(this.state == \"1\"){\n            console.log(\"点击了任务领取按钮 this.id:\"+this.id);\n            GameNetMgr.sendRequest(\"System\", \"GetTaskReward\", this.id);//任务id\n            this.nodeGet.active = false;\n            this.nodeProgrss.active = false;\n            this.nodeComplete.active = true;\n\n            var num = PlayerDetailModel.getTaskUnReward();\n            PlayerDetailModel.setTaskUnReward(num-1);\n        }\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    gotoClick(){\n        console.log(\"this.goto:\"+this.goto);\n\n        var index = config.getRandom(1);\n        var shareTxt = config.shareTxt[\"task\"][index];\n        console.log(\">>>shareTxt:\",shareTxt);\n        var shareImg = config.getShareImgPath(\"task\");\n        console.log(\">>>shareImg:\",shareImg);\n\n        if(this.goto&&this.state == \"0\"){ //1房间  2邀请好友\n            if(this.goto == 1){\n                console.log(\"前往普通场\");\n                // this.onWantGotoRoom();\n            }else if(this.goto == 2){\n                console.log(\"前往分享\");\n                // cc.loader.loadRes(\"shareImg\",function(err,data){//data.url\n                    wx.shareAppMessage({\n                        title: shareTxt,\n                        imageUrl: shareImg,\n                        query : \"key=\"+PlayerDetailModel.uid,\n                        success(res){\n                            console.log(\"task---转发成功!!!\");\n                            console.log(res);\n                            GameNetMgr.sendRequest(\"System\",\"ShareWxRes\",7);\n                        },\n                        fail(res){\n                            console.log(\"task---转发失败!!!\")\n                        } \n                    })\n                // });\n            }\n        }\n    },\n    onWantGotoRoom(){//去适合的场次\n        // HallCanvasControl.gotoRoom1();\n    },\n});\n"]}