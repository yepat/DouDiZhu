{"version":3,"sources":["../../../../assets/Script/assets/Script/opratOutCardControl.js"],"names":["cc","Class","extends","Component","properties","timeTxt","default","type","Label","buchuBtn","Node","tishiBtn","chupaiBtn","clock","tishi","Sprite","timeCount","onLoad","clockX","getPositionX","clockY","getPositionY","enabled","schedule","shakeClock","pre","node","destroy","t","Math","ceil","string","show","time","buchuFunc","tishiFunc","chupaiFunc","close","buchuClick","console","log","tishiClick","chupaiClick","typenum","showTips","mt1","moveTo","mt2","mt3","mt4","mt5","mt6","mt7","runAction","sequence","imgUrl","stopAllActions","self","loader","loadRes","SpriteFrame","err","spriteFrame","getComponent","delay","delayTime","callFunc"],"mappings":"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","file":"opratOutCardControl.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        timeTxt : {\n            default : null,\n            type : cc.Label\n        },\n        buchuBtn : {\n            default : null,\n            type : cc.Node\n        },\n        tishiBtn : {\n            default : null,\n            type : cc.Node\n        },\n        chupaiBtn : {\n            default : null,\n            type : cc.Node,\n        },\n        clock : {\n            default : null,\n            type : cc.Node,\n        },\n        tishi : {\n            default : null,\n            type : cc.Sprite\n        },\n        timeCount:30,\n    },\n\n    onLoad () {\n        this.clockX = this.clock.getPositionX();\n        this.clockY = this.clock.getPositionY();\n\n        // this.tishi.visible = false;\n        this.tishi.enabled = false;\n\n        this.schedule(function() {\n            // 这里的 this 指向 component\n            if(this.timeCount > 0){\n                this.timeCount -= 1;\n                if(this.timeCount <= 5){\n                    // cc.vv.audioMgr.playSFX(\"timeup_alarm.mp3\");\n                    this.shakeClock();\n                }\n                var pre = \"\";\n                if(this.timeCount <= 0){\n                    this.timeCount = 0;\n                    this.node.destroy();\n                }\n                var t = Math.ceil(this.timeCount);\n                if(t < 10){\n                    pre = \"\";\n                }\n                this.timeTxt.string = pre + t; \n            }\n            \n        }, 1);\n    },\n    // start () {\n    // },\n    show(time,buchuFunc,tishiFunc,chupaiFunc){\n        this.timeCount = time;\n        this.buchuFunc = buchuFunc;\n        this.tishiFunc = tishiFunc;\n        this.chupaiFunc = chupaiFunc;\n\n        var pre = \"\";\n        this.timeTxt.string = pre + time;\n    },\n    close(){\n        if(this.node){\n            this.node.destroy();\n        }\n    },\n    buchuClick() {\n        console.log(\"不出\");\n        if(this.buchuFunc)\n            this.buchuFunc();\n        this.node.destroy();\n    },\n    tishiClick() {\n        console.log(\"提示\");\n        if(this.tishiFunc)\n            this.tishiFunc();\n    },\n    chupaiClick() {\n        console.log(\"出牌\");\n        var typenum = 0;\n        if(this.chupaiFunc)\n            typenum = this.chupaiFunc();\n        this.tishi.enabled = false;\n        if(typenum == 0){\n            // this.showTips(\"没有选择要出的牌！\");\n            this.showTips(\"showTips/p_tips_noSeletcedCrad\");\n        }else if(typenum == -1){\n            // this.showTips(\"您选择的牌无法出出去哦！\");  \n            this.showTips(\"showTips/p_tips_seletcedCardTypeError\");\n        }else{\n            // this.node.destroy();\n        }\n        \n    },\n    // update(dt){\n    // },\n    shakeClock(){\n        var mt1 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt2 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt3 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt4 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt5 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt6 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt7 = cc.moveTo(0.05,this.clockX,this.clockY);\n        this.clock.runAction(cc.sequence(mt1,mt2,mt3,mt4,mt5,mt6,mt7));\n    },\n    showTips(imgUrl){\n        this.tishi.node.stopAllActions();\n\n        var self = this;\n        this.tishi.enabled = true;\n        // this.tishi.string = content;\n        cc.loader.loadRes(imgUrl,cc.SpriteFrame,function(err,spriteFrame){\n            self.tishi.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        })\n\n        var delay = cc.delayTime(2);\n        var callFunc = cc.callFunc(function(){\n            self.tishi.enabled = false;\n        });\n        this.tishi.node.runAction(cc.sequence(delay,callFunc));\n    }\n    \n});\n"]}