{"version":3,"sources":["../../../../assets/Script/assets/Script/opratOutCardControl.js"],"names":["cc","Class","extends","Component","properties","timeTxt","default","type","Label","buchuBtn","Node","tishiBtn","chupaiBtn","clock","tishi","Sprite","timeCount","onLoad","clockX","getPositionX","clockY","getPositionY","enabled","schedule","shakeClock","pre","node","active","t","Math","ceil","string","show","time","buchuFunc","tishiFunc","chupaiFunc","x","close","buchuClick","tishiClick","chupaiClick","num","typenum","showTips","mt1","moveTo","mt2","mt3","mt4","mt5","mt6","mt7","runAction","sequence","vv","audioMgr","playSFX","imgUrl","self","stopAllActions","loader","loadRes","SpriteFrame","err","spriteFrame","getComponent","delay","delayTime","callFunc"],"mappings":"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","file":"opratOutCardControl.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        timeTxt : {\n            default : null,\n            type : cc.Label\n        },\n        buchuBtn : {\n            default : null,\n            type : cc.Node\n        },\n        tishiBtn : {\n            default : null,\n            type : cc.Node\n        },\n        chupaiBtn : {\n            default : null,\n            type : cc.Node,\n        },\n        clock : {\n            default : null,\n            type : cc.Node,\n        },\n        tishi : {\n            default : null,\n            type : cc.Sprite\n        },\n        timeCount:30,\n    },\n\n    onLoad () {\n        this.clockX = this.clock.getPositionX();\n        this.clockY = this.clock.getPositionY();\n        this.tishi.enabled = false;\n\n        this.schedule(function() {\n            // 这里的 this 指向 component\n            if(this.timeCount > 0){\n                this.timeCount -= 1;\n                if(this.timeCount <= 5 && this.timeCount >=1){\n                    // cc.vv.audioMgr.playSFX(\"timeup_alarm.mp3\");\n                    this.shakeClock();\n                }\n                var pre = \"\";\n                if(this.timeCount <= 0){\n                    this.timeCount = 0;\n                    // this.node.destroy();\n                    this.node.active = false;\n                }\n                var t = Math.ceil(this.timeCount);\n                if(t < 10){\n                    pre = \"\";\n                }\n                this.timeTxt.string = pre + t; \n            }\n            \n        }, 1);\n    },\n    // start () {\n    // },\n    show(time,buchuFunc,tishiFunc,chupaiFunc,type){//type 1必出 2要不起\n        this.node.active = true;\n        this.timeCount = time;\n        this.buchuFunc = buchuFunc;\n        this.tishiFunc = tishiFunc;\n        this.chupaiFunc = chupaiFunc;\n        var pre = \"\";\n        this.timeTxt.string = pre + time;\n\n        this.buchuBtn.active = true;\n        this.tishiBtn.active = true;\n        this.chupaiBtn.active = true;\n        this.buchuBtn.x = -370;\n        this.tishiBtn.x = 79;\n        this.chupaiBtn.x = 387;\n        this.clock.x = -147;\n\n        if(type==1){\n            this.clock.x = -163;\n            this.chupaiBtn.x = 63;\n            this.buchuBtn.active = false;\n            this.tishiBtn.active = false;\n        }else if(type==2){\n            this.clock.x = -163;\n            this.buchuBtn.x = 63;\n            this.tishiBtn.active = false;\n            this.chupaiBtn.active = false;\n        }\n    },\n    close(){\n        if(this.node){\n            // this.node.destroy();\n            this.node.active = false;\n        }\n    },\n    buchuClick() {\n        // console.log(\"不出\");\n        if(this.buchuFunc)\n            this.buchuFunc();\n        // this.node.destroy();\n        this.node.active = false;\n        // cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    tishiClick() {\n        // console.log(\"提示\");\n        if(this.tishiFunc)\n            this.tishiFunc();\n        // cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    chupaiClick(num) {\n        // console.log(\">>>出牌\");\n        var typenum = 0;\n        if(this.chupaiFunc)\n        {\n            typenum = this.chupaiFunc();\n            // console.log(\"typenum:\"+typenum);\n        }\n            \n        if(typeof(num)==\"number\"){\n            typenum = num;\n        }\n\n        // console.log(\"typenum11111:\"+typenum);\n\n        if(typenum == 0){\n            // this.showTips(\"没有选择要出的牌！\");\n            this.showTips(\"showTips/p_tips_noSeletcedCrad\");\n        }else if(typenum == -1){\n            // this.showTips(\"您选择的牌无法出出去哦！\");  \n            this.showTips(\"showTips/p_tips_seletcedCardTypeError\");\n        }else if(typenum == -2){\n            this.showTips(\"showTips/p_tips_noCard\");\n            // this.node.destroy();\n        }else{\n            // this.tishi.enabled = false;\n        }\n        // cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    shakeClock(){\n        var mt1 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt2 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt3 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt4 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt5 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt6 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt7 = cc.moveTo(0.05,this.clockX,this.clockY);\n        this.clock.runAction(cc.sequence(mt1,mt2,mt3,mt4,mt5,mt6,mt7));\n        cc.vv.audioMgr.playSFX(\"Special_Remind\");\n    },\n    showTips(imgUrl){\n        var self = this;\n        if(self.tishi){   \n        }else{\n            return;\n        }\n        this.tishi.node.stopAllActions();\n        this.tishi.enabled = true;\n        // this.tishi.string = content;\n        cc.loader.loadRes(imgUrl,cc.SpriteFrame,function(err,spriteFrame){\n            self.tishi.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        })\n\n        var delay = cc.delayTime(2);\n        var callFunc = cc.callFunc(function(){\n            self.tishi.enabled = false;\n        });\n        this.tishi.node.runAction(cc.sequence(delay,callFunc));\n    }\n    \n});\n"]}