{"version":3,"sources":["../../../../../assets/Script/operate/assets/Script/operate/opratOutCardControl.js"],"names":["GameNetMgr","require","cc","Class","extends","Component","properties","timeTxt","default","type","Label","buchuBtn","Node","tishiBtn","chupaiBtn","clock","tishi","Sprite","timeCount","onLoad","clockX","getPositionX","clockY","getPositionY","enabled","schedule","shakeClock","pre","sendRequest","node","active","t","Math","ceil","string","show","time","buchuFunc","tishiFunc","chupaiFunc","x","showTips","close","buchuClick","tishiClick","chupaiClick","num","typenum","mt1","moveTo","mt2","mt3","mt4","mt5","mt6","mt7","runAction","sequence","vv","audioMgr","playSFX","imgUrl","self","stopAllActions","loader","loadRes","SpriteFrame","err","spriteFrame","getComponent","delay","delayTime","callFunc"],"mappings":"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","file":"opratOutCardControl.js","sourceRoot":"../../../../../assets/Script/operate","sourcesContent":["var GameNetMgr = require(\"GameNetMgr\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        timeTxt : {\n            default : null,\n            type : cc.Label\n        },\n        buchuBtn : {\n            default : null,\n            type : cc.Node\n        },\n        tishiBtn : {\n            default : null,\n            type : cc.Node\n        },\n        chupaiBtn : {\n            default : null,\n            type : cc.Node,\n        },\n        clock : {\n            default : null,\n            type : cc.Node,\n        },\n        tishi : {\n            default : null,\n            type : cc.Sprite\n        },\n        timeCount:30,\n    },\n\n    onLoad () {\n        this.clockX = this.clock.getPositionX();\n        this.clockY = this.clock.getPositionY();\n        this.tishi.enabled = false;\n\n        this.schedule(function() {\n            // 这里的 this 指向 component\n            if(this.timeCount > 0){\n                this.timeCount -= 1;\n                if(this.timeCount <= 5 && this.timeCount >=1){\n                    // cc.vv.audioMgr.playSFX(\"timeup_alarm.mp3\");\n                    if(this.type && this.type == 2){\n                    }else{\n                        this.shakeClock();\n                    }\n                }\n                var pre = \"\";\n                if(this.timeCount <= 0){\n                    this.timeCount = 0;\n                    // this.node.destroy();\n                    if(this.type && this.type == 2){\n                        GameNetMgr.sendRequest(\"Game\",\"giveupSendCard\");\n                    }\n                    this.node.active = false;\n                }\n                var t = Math.ceil(this.timeCount);\n                if(t < 10){\n                    pre = \"\";\n                }\n                this.timeTxt.string = pre + t; \n            }\n            \n        }, 1);\n    },\n    // start () {\n    // },\n    show(time,buchuFunc,tishiFunc,chupaiFunc,type){//type 1必出 2要不起\n        this.node.active = true;\n        this.timeCount = time;\n        this.buchuFunc = buchuFunc;\n        this.tishiFunc = tishiFunc;\n        this.chupaiFunc = chupaiFunc;\n        var pre = \"\";\n        this.timeTxt.string = pre + time;\n\n        this.buchuBtn.active = true;\n        this.tishiBtn.active = true;\n        this.chupaiBtn.active = true;\n        this.tishi.enabled = false;\n        this.buchuBtn.x = -370;\n        this.tishiBtn.x = 79;\n        this.chupaiBtn.x = 387;\n        this.clock.x = -147;\n\n        this.type = type;\n\n        if(type==1){\n            this.clock.x = -163;\n            this.chupaiBtn.x = 63;\n            this.buchuBtn.active = false;\n            this.tishiBtn.active = false;\n        }else if(type==2){\n            this.clock.x = -163;\n            this.buchuBtn.x = 63;\n            this.tishiBtn.active = false;\n            this.chupaiBtn.active = false;\n            this.showTips(\"showTips/p_tips_noCard\");\n        }\n    },\n    close(){\n        if(this.node){\n            // this.node.destroy();\n            this.node.active = false;\n        }\n    },\n    buchuClick() {\n        // console.log(\"不出\");\n        if(this.buchuFunc)\n            this.buchuFunc();\n        // this.node.destroy();\n        this.node.active = false;\n        // cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    tishiClick() {\n        // console.log(\"提示\");\n        if(this.tishiFunc)\n            this.tishiFunc();\n        // cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    chupaiClick(num) {\n        // console.log(\">>>出牌\");\n        var typenum = 0;\n        if(this.chupaiFunc)\n        {\n            typenum = this.chupaiFunc();\n            // console.log(\"typenum:\"+typenum);\n        }\n            \n        if(typeof(num)==\"number\"){\n            typenum = num;\n        }\n\n        // console.log(\"typenum11111:\"+typenum);\n\n        if(typenum == 0){\n            // this.showTips(\"没有选择要出的牌！\");\n            this.showTips(\"showTips/p_tips_noSeletcedCrad\");\n        }else if(typenum == -1){\n            // this.showTips(\"您选择的牌无法出出去哦！\");  \n            this.showTips(\"showTips/p_tips_seletcedCardTypeError\");\n        }else if(typenum == -2){\n            this.showTips(\"showTips/p_tips_noCard\");\n            // this.node.destroy();\n        }else{\n            // this.tishi.enabled = false;\n        }\n        // cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    shakeClock(){\n        var mt1 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt2 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt3 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt4 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt5 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt6 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt7 = cc.moveTo(0.05,this.clockX,this.clockY);\n        this.clock.runAction(cc.sequence(mt1,mt2,mt3,mt4,mt5,mt6,mt7));\n        cc.vv.audioMgr.playSFX(\"Special_Remind\");\n    },\n    showTips(imgUrl){\n        var self = this;\n        if(self.tishi){   \n        }else{\n            return;\n        }\n        this.tishi.node.stopAllActions();\n        this.tishi.enabled = true;\n        // this.tishi.string = content;\n        cc.loader.loadRes(imgUrl,cc.SpriteFrame,function(err,spriteFrame){\n            self.tishi.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        })\n\n        var delay = cc.delayTime(2);\n        var callFunc = cc.callFunc(function(){\n            self.tishi.enabled = false;\n        });\n        this.tishi.node.runAction(cc.sequence(delay,callFunc));\n    }\n    \n});\n"]}