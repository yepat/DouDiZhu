{"version":3,"sources":["../../../../../assets/Script/dialog/assets/Script/dialog/resoultInfoItemControl.js"],"names":["config","require","cc","Class","extends","Component","properties","pDizhu","default","type","Sprite","labNickName","Label","labDifen","labBeishu","labLedou","pInfoBtn","pInfoTxt","onLoad","enabled","init","isDizhi","name","difen","beishu","ledou","isMe","coin","rateMax","node","color","Color","string","parseString","Math","abs","fengdingpochan","test_dz","rate","total","roomRateMax","palyerCoin","self","rate_","parseInt","total_","rateMax_","blt","win","tag","mRate","m_total","fengding","pochan","math","console","log","loader","loadRes","SpriteFrame","err","spriteFrame","getComponent","tipsStr"],"mappings":"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","file":"resoultInfoItemControl.js","sourceRoot":"../../../../../assets/Script/dialog","sourcesContent":["var config = require(\"config\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        pDizhu : {\n            default : null,\n            type : cc.Sprite\n        },\n        labNickName : {\n            default : null,\n            type : cc.Label\n        },\n        labDifen : {\n            default : null,\n            type : cc.Label\n        },\n        labBeishu : {\n            default : null,\n            type : cc.Label\n        },\n        labLedou : {\n            default : null,\n            type : cc.Label\n        },\n        pInfoBtn : {\n            default : null,\n            type : cc.Sprite\n        },\n        pInfoTxt : {\n            default : null,\n            type : cc.Sprite\n        },\n    },\n    onLoad () {\n        this.pDizhu.enabled = false;\n        this.pInfoBtn.enabled = false;\n        this.pInfoTxt.enabled = false;\n    },\n    // start () { \n    // },   \n    init(isDizhi,name,difen,beishu,ledou,isMe,coin,rateMax){\n        if(isDizhi){\n            this.pDizhu.enabled = true;\n        }\n        if(isMe){\n        }else{\n            this.labNickName.node.color = new cc.Color(255, 255, 255);\n            this.labDifen.node.color = new cc.Color(255, 255, 255);\n            this.labBeishu.node.color = new cc.Color(255, 255, 255);\n            this.labLedou.node.color = new cc.Color(255, 255, 255);\n        }\n        this.labNickName.string = config.parseString(name);\n        this.labDifen.string = \"\"+difen;\n        this.labBeishu.string = \"\"+beishu;\n        if(ledou>0){\n            ledou = \"+\"+ledou;\n        }else{\n            ledou = \"- \"+Math.abs(ledou);\n        }\n        this.labLedou.string = \"\"+ledou;\n        // this.isPochan = false;\n        this.fengdingpochan(isDizhi,beishu,ledou,difen,rateMax,isMe,coin);\n    },\n    //破产封顶判断\n    fengdingpochan(test_dz,rate,total,difen,roomRateMax,isMe,palyerCoin){\n        var self = this;\n        var rate_ = parseInt(rate); //倍数\n        var total_ = parseInt(total); //输赢\n        var rateMax_ = parseInt(difen); //低分\n\n        var blt = false;//自身豆够 地主破产 没赢到最大值\n\n        if (roomRateMax && rate_ > roomRateMax && isMe && palyerCoin > 0 ){\n            var win = false;\n            var  tag = false;\n            if (total_ > 0){\n                win = true;\n            }\n\n            if (total_ < 0 ){ //地主钱不够 输不到最大值\n                var mRate = rate_;\n                if (rate_ > roomRateMax){\n                    mRate = roomRateMax;\n                }\n                var m_total = mRate * rateMax_;\n                if (test_dz){\n                    m_total = m_total * 2;\n                }\n\n                if (Math.abs(total_) < m_total){\n                    return\n                }\n            }\n\n            //自身豆不够赢不到最大值\n            if (total_ > 0){\n                var mRate = rate_;\n                if (rate_ > roomRateMax){\n                    mRate = roomRateMax;\n                }\n                var m_total = mRate * rateMax_;\n                if (test_dz){\n                    m_total = m_total * 2;\n                }\n                if (total_ < m_total){\n                    tag = true;\n                }\n\n                if(palyerCoin>total_){\n                    blt = true;\n                }\n            }\n\n            if(blt){\n            }else{\n                self.fengding(win,tag);\n                return\n            } \n        }\n\n        if (roomRateMax && rate_ <= roomRateMax && isMe && palyerCoin > 0 ){\n            var win = false;\n            var  tag = false;\n            if (total_ > 0){\n                win = true;\n            }\n            //自身豆不够赢不到最大值\n            if (total_ > 0){\n                var mRate = rate_;\n                if (rate_ > roomRateMax){\n                    mRate = roomRateMax;\n                }\n                var m_total = mRate * rateMax_;\n                if (test_dz){\n                    m_total = m_total * 2;\n                }\n\n                if(palyerCoin>total_){\n                    blt = true;\n                }\n\n                if (total_ < m_total && !blt){\n                    tag = true\n                    self.fengding(win,tag);\n                    return\n                }\n            }\n        }\n\n        if (total_ < 0){\n            var mRate = rate_;\n            if (rate_ > roomRateMax){\n                mRate = roomRateMax;\n            }\n            var m_total = mRate * rateMax_;\n            if (test_dz){\n                m_total = m_total * 2;\n            }\n\n            if (m_total > Math.abs(total_) && palyerCoin == 0){\n                self.pochan();\n            }else if(m_total == math.abs(total_) && isMe && palyerCoin == 0){\n                self.pochan();\n            }\n        }\n    },\n    pochan(){\n        console.log(\"破产了\");\n        this.pInfoBtn.enabled = true;\n        this.pInfoTxt.enabled = true;\n        cc.loader.loadRes(\"gameResult/p_pochan\",cc.SpriteFrame,function(err,spriteFrame){\n            self.pInfoBtn.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        });\n        cc.loader.loadRes(\"gameResult/tip_pochan\",cc.SpriteFrame,function(err,spriteFrame){\n            self.pInfoTxt.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        });  \n    },\n    fengding(win,tag){\n        var self = this;\n        var tipsStr = \"gameResult/tip_fengding\";\n        if (win){\n            tipsStr = \"gameResult/tip_fengding2\";\n        }else{\n            tipsStr = \"gameResult/tip_fengding\";\n        }\n        if (tag){\n            tipsStr = \"gameResult/tip_fengding3\";\n        }\n\n        console.log(\"封顶了：\"+tipsStr);\n        this.pInfoBtn.enabled = true;\n        this.pInfoTxt.enabled = true;\n\n        cc.loader.loadRes(\"gameResult/p_fengding\",cc.SpriteFrame,function(err,spriteFrame){\n            self.pInfoBtn.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        });\n        cc.loader.loadRes(tipsStr,cc.SpriteFrame,function(err,spriteFrame){\n            self.pInfoTxt.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        });\n    }\n});\n"]}