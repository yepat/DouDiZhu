{"version":3,"sources":["../../../../assets/Script/assets/Script/topBarControl.js"],"names":["config","require","EventHelper","PlayerDetailModel","cc","Class","extends","Component","properties","headImg","default","type","Sprite","playerName","Label","playerLevel","playerLedou","playerLeQuan","start","self","setHeadUrl","setNickName","getNickName","setLevel","getTitle","setLeDou","getCoin","setLuQuan","getCoupon","AddCustomEvent","MyNode","onRefreshDataResult","event","console","log","data","getUserData","payload","coins","setCoin","coupon","setCoupon","lottery","setLottery","mail_unread","setMailUnread","checkin_undo","setCheckinUndo","task1_unaward","setTask1Unaward","task2_unaward","setTask2Unaward","charge_rate","setChargeRate","propDress","setPropDress","propItems","setPropItems","imgUrl","wxInfo","avatarUrl","loader","load","err","texture","getComponent","spriteFrame","SpriteFrame","name","string","lv","number","Math","floor"],"mappings":"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","file":"topBarControl.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\nvar config = require(\"config\");\nvar EventHelper = require(\"EventHelper\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        headImg : {\n            default : null,\n            type : cc.Sprite\n        },\n        playerName : {\n            default : null,\n            type : cc.Label\n        },\n        playerLevel : {\n            default : null,\n            type : cc.Label\n        },\n        playerLedou : {\n            default : null,\n            type : cc.Label\n        },\n        playerLeQuan : {\n            default : null,\n            type : cc.Label\n        }\n    },\n    // onLoad () {},\n    start () {\n       var self = this;\n        self.setHeadUrl();\n        self.setNickName(PlayerDetailModel.getNickName());\n        self.setLevel(PlayerDetailModel.getTitle());\n        self.setLeDou(PlayerDetailModel.getCoin());\n        self.setLuQuan(PlayerDetailModel.getCoupon());\n\n        EventHelper.AddCustomEvent(config.MyNode,\"RefreshDataResult\",self.onRefreshDataResult,self);\n    },\n    onRefreshDataResult(event){\n        console.log(\"刷新用户信息数据1111------\");\n        var self = this;\n        var data = event.getUserData();\n        console.log(data);\n\n        var payload = data;\n        // var model = app:getModel(\"PlayerDetailModel\")\n        //用户乐豆数\n        if (payload.data && payload.data.coins){\n            PlayerDetailModel.setCoin(payload.data.coins)\n            self.setLeDou(PlayerDetailModel.getCoin());\n        }\n        //用户奖券数\n        if (payload.data && payload.data.coupon){\n            PlayerDetailModel.setCoupon(payload.data.coupon)\n            self.setLuQuan(PlayerDetailModel.getCoupon());\n        }\n        //用户抽奖数\n        if (payload.data && payload.data.lottery){\n            PlayerDetailModel.setLottery(payload.data.lottery)\n        }\n        //未读邮件数\n        if (payload.data && payload.data.mail_unread){\n            PlayerDetailModel.setMailUnread(payload.data.mail_unread)\n        }\n        //0不可签到, 1可以签到\n        if (payload.data && payload.data.checkin_undo){\n            PlayerDetailModel.setCheckinUndo(payload.data.checkin_undo)\n        }\n        //可领奖的每日任务数\n        if (payload.data && payload.data.task1_unaward){\n            PlayerDetailModel.setTask1Unaward(payload.data.task1_unaward)\n        }\n        //可领奖的成长任务数\n        if (payload.data && payload.data.task2_unaward){\n            PlayerDetailModel.setTask2Unaward(payload.data.task2_unaward)\n        }\n        //充值奖励利率\n        if (payload.data && payload.data.charge_rate){\n            PlayerDetailModel.setChargeRate(payload.data.charge_rate)\n        }\n        //皮肤\n        if (payload.data && payload.data.propDress){\n            PlayerDetailModel.setPropDress(payload.data.propDress)\n        }\n        //道具\n        if (payload.data && payload.data.propItems){\n            PlayerDetailModel.setPropItems(payload.data.propItems)\n        }\n        // self.playerDetailController_:refreshUI()\n    },\n    setHeadUrl(){\n        var self = this;\n         //设置微信头像\n         var imgUrl=config.wxInfo.avatarUrl;\n         imgUrl = imgUrl + \"?aa=aa.jpg\";\n         cc.loader.load(imgUrl, function(err, texture){\n             self.headImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\n         });\n    },\n    setNickName(name){\n         //修改昵称\n         this.playerName.string = name;\n    },\n    setLevel(lv){\n        //修改等级\n        this.playerLevel.string = lv;\n    },\n    setLeDou(number){\n        //修改乐豆数\n        if(number >= 10000000){\n            number = Math.floor(number / 10000)\n            this.playerLedou.string = \"\"+number+\"万\";\n        }else{\n            this.playerLedou.string = \"\"+number;\n        }\n        \n    },\n    setLuQuan(number){\n        //修改乐券数\n        if(number >= 10000000){\n            number = Math.floor(number / 10000)\n            this.playerLeQuan.string = \"\"+number+\"万\";\n        }else{\n            this.playerLeQuan.string = \"\"+number;\n        }\n    }\n});\n"]}