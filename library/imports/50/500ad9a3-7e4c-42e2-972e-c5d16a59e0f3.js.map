{"version":3,"sources":["../../../../../assets/Script/dialog/assets/Script/dialog/shopControl.js"],"names":["config","require","EventHelper","PlayerDetailModel","dialogManager","cc","Class","extends","Component","properties","btnCoin","default","type","Sprite","btnProp","gridCoin","Node","gridProp","headImg","playerName","Label","playerLevel","playerLedou","playerLeQuan","start","self","loader","loadRes","SpriteFrame","err","spriteFrame","getComponent","active","setHeadUrl","setNickName","getNickName","setLevel","getTitle","setLeDou","getCoin","setLuQuan","getCoupon","url","imgUrl","load","texture","name","string","lv","number","Math","floor","closeClick","console","log","node","destroy","btnCoinClick","btnPropClick","coinItemClick","event","btnName","target","propItemClick"],"mappings":"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","file":"shopControl.js","sourceRoot":"../../../../../assets/Script/dialog","sourcesContent":["var config = require(\"config\");\nvar EventHelper = require(\"EventHelper\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\nvar dialogManager = require(\"dialogManager\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        btnCoin : {\n            default : null,\n            type : cc.Sprite\n        },\n        btnProp : {\n            default : null,\n            type : cc.Sprite\n        },\n        gridCoin: {\n            default : null,\n            type : cc.Node\n        },\n        gridProp: {\n            default : null,\n            type : cc.Node\n        },\n        //tou\n        headImg : {\n            default : null,\n            type : cc.Sprite\n        },\n        playerName : {\n            default : null,\n            type : cc.Label\n        },\n        playerLevel : {\n            default : null,\n            type : cc.Label\n        },\n        playerLedou : {\n            default : null,\n            type : cc.Label\n        },\n        playerLeQuan : {\n            default : null,\n            type : cc.Label\n        }\n    },\n    // onLoad () {},\n    start () {\n        var self = this;\n        cc.loader.loadRes(\"shop/p_shopBtn_1\",cc.SpriteFrame,function(err,spriteFrame){\n            self.btnCoin.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        })\n        cc.loader.loadRes(\"shop/p_shopBtn_2\",cc.SpriteFrame,function(err,spriteFrame){\n            self.btnProp.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        })\n        this.gridCoin.active = true;\n        this.gridProp.active = false;\n\n        //tou\n        self.setHeadUrl(\"\");\n        self.setNickName(PlayerDetailModel.getNickName());\n        self.setLevel(PlayerDetailModel.getTitle());\n        self.setLeDou(PlayerDetailModel.getCoin());\n        self.setLuQuan(PlayerDetailModel.getCoupon());\n    },   \n    setHeadUrl(url){\n        var self = this;\n         //设置微信头像\n         var imgUrl=\"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLSO7sOWsNicYdNM3MbNGGo58zticxgqoO2aqS7zOCVClXl7WExa4KNQ48uSTSszicsyspzsDQ51M4EQ/132\";\n         imgUrl = imgUrl + \"?aa=aa.jpg\";\n         cc.loader.load(imgUrl, function(err, texture){\n             self.headImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\n         });\n    },\n    setNickName(name){\n         //修改昵称\n         this.playerName.string = name;\n    },\n    setLevel(lv){\n        //修改等级\n        this.playerLevel.string = lv;\n    },\n    setLeDou(number){\n        //修改乐豆数\n        if(number >= 10000000){\n            number = Math.floor(number / 10000)\n            this.playerLedou.string = \"\"+number+\"万\";\n        }else{\n            this.playerLedou.string = \"\"+number;\n        }\n        \n    },\n    setLuQuan(number){\n        //修改乐券数\n        if(number >= 10000000){\n            number = Math.floor(number / 10000)\n            this.playerLeQuan.string = \"\"+number+\"万\";\n        }else{\n            this.playerLeQuan.string = \"\"+number;\n        }\n    },\n    closeClick(){\n        console.log(\"close click\");\n        this.node.destroy();\n    },\n    btnCoinClick(){\n        console.log(\"btnCoinClick\");\n        this.gridCoin.active = true;\n        this.gridProp.active = false;\n        var self = this;\n        cc.loader.loadRes(\"shop/p_shopBtn_1\",cc.SpriteFrame,function(err,spriteFrame){\n            self.btnCoin.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        })\n        cc.loader.loadRes(\"shop/p_shopBtn_2\",cc.SpriteFrame,function(err,spriteFrame){\n            self.btnProp.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        })\n    },\n    btnPropClick(){\n        console.log(\"btnPropClick\");\n        this.gridCoin.active = false;\n        this.gridProp.active = true;\n        var self = this;\n        cc.loader.loadRes(\"shop/p_shopBtn_2\",cc.SpriteFrame,function(err,spriteFrame){\n            self.btnCoin.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        })\n        cc.loader.loadRes(\"shop/p_shopBtn_1\",cc.SpriteFrame,function(err,spriteFrame){\n            self.btnProp.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        })\n    },\n    coinItemClick(event){\n        var btnName = event.target.name;\n        console.log(\"coinItemClick:\"+btnName);\n        \n    },\n    propItemClick(event){\n        var btnName = event.target.name;\n        console.log(\"propItemClick:\"+btnName);\n\n    }\n});\n"]}