{"version":3,"sources":["../../../../../assets/Script/dialog/assets/Script/dialog/BagItemControl.js"],"names":["config","require","GameNetMgr","dialogManager","cc","Class","extends","Component","properties","p_item","default","type","Sprite","lab_num","Label","lab_name","index","onLoad","show","propName","propNum","self","numUrl","string","showTime","loader","loadRes","SpriteFrame","err","spriteFrame","getComponent","itemClick","console","log","showNum","time","num","d","Math","floor","h","m"],"mappings":";;;;;;AAAA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,aAAaD,QAAQ,YAAR,CAAjB;AACA,IAAIE,gBAAgBF,QAAQ,eAAR,CAApB;AACAG,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAS;AACLC,qBAAU,IADL;AAELC,kBAAOP,GAAGQ;AAFL,SADD;AAKRC,iBAAU;AACNH,qBAAU,IADJ;AAENC,kBAAOP,GAAGU;AAFJ,SALF;AASRC,kBAAW;AACPL,qBAAU,IADH;AAEPC,kBAAOP,GAAGU;AAFH,SATH;AAaRE,eAAM;AAbE,KAHP;AAkBLC,UAlBK,oBAkBK,CAAE,CAlBP;AAmBLC,QAnBK,gBAmBAC,QAnBA,EAmBSC,OAnBT,EAmBiBJ,KAnBjB,EAmBuB;AACxB,YAAIK,OAAO,IAAX;AACA,YAAIC,SAAS,EAAb;AACA,aAAKH,QAAL,GAAgBA,QAAhB;AACAE,aAAKR,OAAL,CAAaU,MAAb,GAAsB,EAAtB;AACAF,aAAKN,QAAL,CAAcQ,MAAd,GAAuB,EAAvB;AACA,YAAGJ,YAAY,SAAf,EAAyB;AACrBE,iBAAKN,QAAL,CAAcQ,MAAd,GAAuB,KAAvB;AACAD,qBAAS,aAAT;AACAD,iBAAKR,OAAL,CAAaU,MAAb,GAAsB,KAAK,KAAKC,QAAL,CAAcJ,OAAd,CAA3B;AACH,SAJD,MAIM,IAAGD,YAAY,QAAf,EAAwB;AAC1BE,iBAAKN,QAAL,CAAcQ,MAAd,GAAuB,IAAvB;AACAD,qBAAS,gBAAT;AACAD,iBAAKR,OAAL,CAAaU,MAAb,GAAsB,KAAKH,OAA3B;AACH;;AAEDhB,WAAGqB,MAAH,CAAUC,OAAV,CAAkBJ,MAAlB,EAAyBlB,GAAGuB,WAA5B,EAAwC,UAASC,GAAT,EAAaC,WAAb,EAAyB;AAC7DR,iBAAKZ,MAAL,CAAYqB,YAAZ,CAAyB1B,GAAGQ,MAA5B,EAAoCiB,WAApC,GAAkDA,WAAlD;AACH,SAFD;AAGH,KAtCI;AAuCLE,aAvCK,uBAuCM;AACPC,gBAAQC,GAAR,CAAY,QAAZ;AACA,YAAG,KAAKd,QAAL,IAAe,KAAKA,QAAL,IAAiB,QAAnC,EAA4C;AACxCa,oBAAQC,GAAR,CAAY,QAAZ;AACA;AACH;AACD;AACH,KA9CI;AA+CLT,YA/CK,oBA+CIJ,OA/CJ,EA+CY;AACb,YAAIc,UAAU,EAAd;AACA,YAAIC,OAAOf,QAAQe,IAAnB;AACA,YAAIC,MAAMhB,QAAQgB,GAAlB;;AAEA,YAAGD,QAAQ,CAAX,EAAa;AACTD,sBAAU,IAAV;AACH,SAFD,MAEM,IAAGC,QAAQ,CAAC,CAAZ,EAAc;AAChBD,sBAAU,KAAGE,GAAb;AACH,SAFK,MAED;AACD,gBAAIC,IAAIC,KAAKC,KAAL,CAAWJ,QAAM,KAAG,EAAH,GAAM,EAAZ,CAAX,CAAR,CADC,CACmC;AACpC,gBAAIK,IAAIF,KAAKC,KAAL,CAAW,CAACJ,OAAOE,IAAE,EAAF,GAAK,EAAL,GAAQ,EAAhB,KAAqB,KAAG,EAAxB,CAAX,CAAR;AACA,gBAAII,IAAIH,KAAKC,KAAL,CAAW,CAACJ,OAAOE,IAAE,EAAF,GAAK,EAAL,GAAQ,EAAf,GAAoBG,IAAE,EAAF,GAAK,EAA1B,IAA8B,EAAzC,CAAR;AACAN,sBAAUG,IAAE,GAAF,GAAMG,CAAN,GAAQ,IAAR,GAAaC,CAAb,GAAe,GAAzB;AACH;AACD,eAAOP,OAAP;AACH;AA/DI,CAAT","file":"BagItemControl.js","sourceRoot":"../../../../../assets/Script/dialog","sourcesContent":["var config = require(\"config\");\nvar GameNetMgr = require(\"GameNetMgr\");\nvar dialogManager = require(\"dialogManager\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        p_item : {\n            default : null,\n            type : cc.Sprite\n        },\n        lab_num : {\n            default : null,\n            type : cc.Label\n        },\n        lab_name : {\n            default : null,\n            type : cc.Label\n        },\n        index:0,\n    },\n    onLoad () {}, \n    show(propName,propNum,index){\n        var self = this;\n        var numUrl = \"\";\n        this.propName = propName;\n        self.lab_num.string = \"\";\n        self.lab_name.string = \"\";\n        if(propName == \"jipaiqi\"){\n            self.lab_name.string = \"记牌器\";\n            numUrl = \"p_daoju_jpq\";\n            self.lab_num.string = \"\" + this.showTime(propNum);\n        }else if(propName == \"lequan\"){\n            self.lab_name.string = \"乐券\";\n            numUrl = \"p_daoju_lequan\";\n            self.lab_num.string = \"\" + propNum;\n        }\n\n        cc.loader.loadRes(numUrl,cc.SpriteFrame,function(err,spriteFrame){\n            self.p_item.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        });\n    },\n    itemClick(){\n        console.log(\"背包道具点击\");\n        if(this.propName&&this.propName == \"lequan\"){\n            console.log(\"打开道具兑换\");\n            // dialogManager.showCommonDialog(\"温馨提示\",\"敬请期待\");\n        }\n        // cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    showTime(propNum){\n        var showNum = \"\";\n        var time = propNum.time;\n        var num = propNum.num;\n\n        if(time == 0){\n            showNum = \"永久\";\n        }else if(time == -1){\n            showNum = \"\"+num;\n        }else{\n            var d = Math.floor(time/(24*60*60));//天\n            var h = Math.floor((time - d*24*60*60)/(60*60));\n            var m = Math.floor((time - d*24*60*60 - h*60*60)/60);\n            showNum = d+\"天\"+h+\"小时\"+m+\"分\";\n        }\n        return showNum;\n    }\n});\n"]}