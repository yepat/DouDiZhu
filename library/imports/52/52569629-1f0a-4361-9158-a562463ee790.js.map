{"version":3,"sources":["../../../../../assets/Script/myCreate/assets/Script/myCreate/TableShareGetControl.js"],"names":["GameNetMgr","require","PlayerDetailModel","config","cc","Class","extends","Component","properties","img_bg","default","type","Sprite","img_title","img_daoju","jpq_num","Label","lab_tips","btn_1","Node","btn_2","opentype","onLoad","string","dialogName","start","show","loadImage","canSeeVideoAd","active","x","closeClick","node","destroy","vv","audioMgr","playSFX","btnEnterClick","shareType","console","log","index","getRandom","shareTxt","shareImg","getShareImgPath","wx","shareAppMessage","title","imageUrl","query","uid","success","res","jpqShareSucss","leDouShareSucss","fail","btnKanShiPinClick","rewardedVideoType","rewardedVideoAd","then"],"mappings":"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","file":"TableShareGetControl.js","sourceRoot":"../../../../../assets/Script/myCreate","sourcesContent":["var GameNetMgr = require(\"GameNetMgr\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\nvar config = require(\"config\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        img_bg : {\n            default : null,\n            type : cc.Sprite\n        },\n        img_title : {\n            default : null,\n            type : cc.Sprite\n        },\n        img_daoju : {\n            default : null,\n            type : cc.Sprite\n        },\n        jpq_num : {\n            default : null,\n            type : cc.Label\n        },\n        lab_tips : {\n            default : null,\n            type : cc.Label\n        },\n        btn_1 : {\n            default : null,\n            type : cc.Node,\n        },\n        btn_2 : {\n            default : null,\n            type : cc.Node,\n            opentype : \"share\"\n        },\n    },\n    onLoad () {\n        // 记牌器和领取乐豆公用\n        this.jpq_num.string = \"\";\n        this.dialogName = \"\";\n        this.lab_tips.string = \"\";\n    },\n    start () {\n        // this.show(\"jiuji\");\n    },   \n    show(dialogName){\n        this.dialogName = dialogName;\n        config.loadImage(this.img_bg,\"p_yaoqing\");\n        if(dialogName == \"jiuji\"){\n            config.loadImage(this.img_title,\"p_douzi\");\n            this.lab_tips.string = \"现在发送分享额外再得500乐豆呦～\";\n\n            if(!config.canSeeVideoAd){\n                this.btn_1.active = false;\n                this.btn_2.x = 183;\n            }\n        }else if(dialogName == \"jipaiqi\"){\n            config.loadImage(this.img_title,\"p_tip_jipaiqi\");\n            config.loadImage(this.img_daoju,\"p_daoju_jpq\");\n            this.jpq_num.string = \"X 3\";\n            this.lab_tips.string = \"分享任意好友即可获得哦！\";\n\n            this.btn_1.active = false;\n            this.btn_2.x = 183;\n        }\n        \n    },\n    closeClick(){\n        // console.log(\"close click\");\n        this.node.destroy();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnEnterClick(){\n        // console.log(\"btnEnter click\");\n\n        var dialogName = this.dialogName; //jipaiqi 4  //jiuji  3\n        var shareType = 3;\n        if(dialogName == \"jipaiqi\"){\n            shareType = 4;\n        }else if(dialogName == \"jiuji\"){\n            shareType = 3;\n        }\n        console.log(\">>>shareType:\",shareType);\n\n        var index = config.getRandom(1);\n        var shareTxt = config.shareTxt[dialogName][index];\n        var shareImg = config.getShareImgPath(dialogName);\n    \n        wx.shareAppMessage({\n            title: shareTxt,\n            imageUrl: shareImg,\n            query : \"key=\"+PlayerDetailModel.uid,\n            success(res){\n                console.log(\"---转发成功!!!\");\n                console.log(res);\n                // GameNetMgr.sendRequest(\"System\",\"ShareWxRes\",shareType);\n                if(shareType == 4){\n                    config.jpqShareSucss = true;\n                }else if(shareType == 3){\n                    // GameNetMgr.sendRequest(\"Game\", \"openReliefTip\", {});\n                    config.leDouShareSucss = true;\n                }\n            },\n            fail(res){\n                console.log(\"---转发失败!!!\")\n            } \n        })\n\n        this.node.destroy();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnKanShiPinClick(){\n        console.log(\"btnKanShiPinClick\");\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n        if(typeof(wx)==\"undefined\"){\n            return;\n        }\n        config.rewardedVideoType = 2;\n        if(config.rewardedVideoAd){\n            config.rewardedVideoAd.show().then();//() => cc.vv.audioMgr.stopMusic()\n            if(this.node)\n                this.node.destroy();\n        }    \n    }\n});\n"]}