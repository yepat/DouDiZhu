{"version":3,"sources":["../../../../../assets/Script/myCreate/assets/Script/myCreate/TableShareGetControl.js"],"names":["GameNetMgr","require","PlayerDetailModel","config","cc","Class","extends","Component","properties","img_bg","default","type","Sprite","img_title","img_daoju","btn_enter","Node","opentype","jpq_num","Label","lab_tips","onLoad","string","dialogName","start","show","loadImage","closeClick","console","log","node","destroy","vv","audioMgr","playSFX","btnEnterClick","shareType","index","getRandom","shareTxt","shareImg","getShareImgPath","wx","shareAppMessage","title","imageUrl","query","uid","success","res","jpqShareSucss","leDouShareSucss","fail"],"mappings":"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","file":"TableShareGetControl.js","sourceRoot":"../../../../../assets/Script/myCreate","sourcesContent":["var GameNetMgr = require(\"GameNetMgr\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\nvar config = require(\"config\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        img_bg : {\n            default : null,\n            type : cc.Sprite\n        },\n        img_title : {\n            default : null,\n            type : cc.Sprite\n        },\n        img_daoju : {\n            default : null,\n            type : cc.Sprite\n        },\n        btn_enter : {\n            default : null,\n            type : cc.Node,\n            opentype : \"share\"\n        },\n        jpq_num : {\n            default : null,\n            type : cc.Label\n        },\n        lab_tips : {\n            default : null,\n            type : cc.Label\n        },\n    },\n    onLoad () {\n        // 记牌器和领取乐豆公用\n        this.jpq_num.string = \"\";\n        this.dialogName = \"\";\n        this.lab_tips.string = \"\";\n    },\n    start () {\n        // this.show(\"jiuji\");\n    },   \n    show(dialogName){\n        this.dialogName = dialogName;\n        config.loadImage(this.img_bg,\"p_yaoqing\");\n        if(dialogName == \"jiuji\"){\n            config.loadImage(this.img_title,\"p_douzi\");\n            // config.loadImage(this.img_daoju,\"p_ludou_1000\");\n            this.lab_tips.string = \"现在发送分享额外再得500乐豆呦～\";\n        }else if(dialogName == \"jipaiqi\"){\n            config.loadImage(this.img_title,\"p_tip_jipaiqi\");\n            config.loadImage(this.img_daoju,\"p_daoju_jpq\");\n            this.jpq_num.string = \"X 3\";\n            this.lab_tips.string = \"分享任意好友即可获得哦！\";\n        }\n        \n    },\n    closeClick(){\n        console.log(\"close click\");\n        this.node.destroy();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnEnterClick(){\n        console.log(\"btnEnter click\");\n\n        var dialogName = this.dialogName; //jipaiqi 4  //jiuji  3\n        var shareType = 3;\n        if(dialogName == \"jipaiqi\"){\n            shareType = 4;\n        }else if(dialogName == \"jiuji\"){\n            shareType = 3;\n        }\n        console.log(\">>>shareType:\",shareType);\n\n        var index = config.getRandom(1);\n        var shareTxt = config.shareTxt[dialogName][index];\n        console.log(\">>>shareTxt:\",shareTxt);\n\n        var shareImg = config.getShareImgPath(dialogName);\n        console.log(\">>>shareImg:\",shareImg);\n    \n        wx.shareAppMessage({\n            title: shareTxt,\n            imageUrl: shareImg,\n            query : \"key=\"+PlayerDetailModel.uid,\n            success(res){\n                console.log(\"---转发成功!!!\");\n                console.log(res);\n                // GameNetMgr.sendRequest(\"System\",\"ShareWxRes\",shareType);\n                if(shareType == 4){\n                    config.jpqShareSucss = true;\n                }else if(shareType == 3){\n                    // GameNetMgr.sendRequest(\"Game\", \"openReliefTip\", {});\n                    config.leDouShareSucss = true;\n                }\n            },\n            fail(res){\n                console.log(\"---转发失败!!!\")\n            } \n        })\n\n        this.node.destroy();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    }\n});\n"]}