{"version":3,"sources":["../../../../../assets/Script/gameNetwork/assets/Script/gameNetwork/AppStart.js"],"names":["config","require","Protocol","EventHelper","PlayerDetailModel","dialogManager","MD5","GameNetMgr","initMgr","cc","vv","http","net","AudioMgr","audioMgr","init","Class","extends","Component","properties","labLoading","default","type","Label","progress","onLoad","string","shareUid","wx","getServerInfo","weixinLogin","myNode","Node","addPersistRootNode","isShow","console","log","setKeepScreenOn","keepScreenOn","success","res","fail","showShareMenu","withShareTicket","shareImg","getShareImgPath","onShareAppMessage","title","shareTxt","shareIndex","imageUrl","query","uid","sendRequest","getSystemInfo","SystemInfo","setDevice","system","onDestroy","self","RemoveCustomEvent","MyNode","onRegist","onHeartBeat","onLoginOK","login","ress","code","_url","params","game_id","version","sign","_sign","getSign","toUpperCase","xhr","complete","fnRequest","ret","sdkuid","data","user_id","SDKUID","setTimeout","fn","abort","errMsg","endData","hex_md5","env","ver","VERSION_NAME","channel","udid","pver","pchannel","presver","GlobalRouterUpdate","GlobalRouter","connectGameServer","director","connect","host","port","sendRegist","getWxUserInfo","ConnectionClosedShow","stopMusic","stopOnMassage","loadScene","setInterval","isPinging","sendHeartBeat","bind","adCdTime","AddCustomEvent","launch","getLaunchOptionsSync","JSON","stringify","key","getUserInfo","userInfo","UpdateWxInfo","showAuthorizeDialog","event","getUserData","temppassword","password","sendLogin","setPlayerDetailModel","t","Request","HeartBeat","Alive","send","Command","getRandom","Login","Regist","d","u","v","c","e","username","OpenUDIDEncryptToken","encodedUsername","encodedUDID","a","p","sdkid","Guest","tv","wn","wxInfo","nickName","wgender","gender","wurl","avatarUrl","weichatgame_version","VERSION_ABOUT","f","invite","response","room","Response","OK","isDevData","i","length","rooms","j","modelId","playGameId","playGameMsg","firstLogin","today_first_login","nickname","parseInt","coin","gold","word","coolnum","level","matches","win","checkCode","propDress","score","verfile","vertips","mailUnread","taskUnReward","shareUnReward","coupon","age","contact","contacts","wechat","lottery","checkinUndo","task1Unaward","task2Unaward","chargeRate","propItems","rewardList","wechatImg","isDev","continueRoomId","showAd","canSeeVideoAd","TrialShareShow","downloadFile","showCommonDialog","preloadNextScene","preloadScene","fileManager","getFileSystemManager","soundspath","USER_DATA_PATH","access","path","downloadTask","url","filePath","tempFilePath","unzip","zipFilePath","targetPath","onProgressUpdate"],"mappings":";;;;;;;;AAAA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACA;AACA,IAAIC,WAAWD,QAAQ,UAAR,CAAf;AACA,IAAIE,cAAcF,QAAQ,aAAR,CAAlB;AACA,IAAIG,oBAAoBH,QAAQ,mBAAR,CAAxB;AACA,IAAII,gBAAgBJ,QAAQ,eAAR,CAApB;AACA,IAAIK,MAAML,QAAQ,KAAR,CAAV;AACA,IAAIM,aAAaN,QAAQ,YAAR,CAAjB;;AAEA,SAASO,OAAT,GAAkB;AACdC,OAAGC,EAAH,GAAQ,EAAR;AACAD,OAAGC,EAAH,CAAMC,IAAN,GAAaV,QAAQ,MAAR,CAAb;AACAQ,OAAGC,EAAH,CAAME,GAAN,GAAYX,QAAQ,SAAR,CAAZ;;AAEA,QAAIY,WAAWZ,QAAQ,UAAR,CAAf;AACAQ,OAAGC,EAAH,CAAMI,QAAN,GAAiB,IAAID,QAAJ,EAAjB;AACAJ,OAAGC,EAAH,CAAMI,QAAN,CAAeC,IAAf;AACH;;AAEDN,GAAGO,KAAH,CAAS;AACLC,aAASR,GAAGS,SADP;AAELC,gBAAY;AACRC,oBAAa;AACTC,qBAAU,IADD;AAETC,kBAAOb,GAAGc;AAFD,SADL;AAKRC,kBAAW;AACPH,qBAAU,IADH;AAEPC,kBAAOb,GAAGc;AAFH;AALH,KAFP;AAYL;AACAE,YAAQ,kBAAY;AAChBjB;AACA,aAAKgB,QAAL,CAAcE,MAAd,GAAuB,EAAvB;AACA,aAAKC,QAAL,GAAgB,CAAhB;AACA,YAAG,OAAOC,EAAP,IAAY,WAAf,EAA2B;AACvB,iBAAKC,aAAL;AACH,SAFD,MAEK;AACD,iBAAKC,WAAL;AACH;AACD;AACA,YAAIC,SAAS,IAAItB,GAAGuB,IAAP,CAAY,QAAZ,CAAb;AACA7B,oBAAY8B,kBAAZ,CAA+BF,MAA/B;AACA,aAAKG,MAAL,GAAc,KAAd;;AAEAC,gBAAQC,GAAR,CAAY,wBAAqBR,EAArB,yCAAqBA,EAArB,EAAZ;AACA,YAAG,OAAOA,EAAP,IAAY,WAAf,EAA2B;AAAC;AAAQ;;AAEpCA,WAAGS,eAAH,CAAmB;AACfC,0BAAa,IADE;AAEfC,mBAFe,mBAEPC,GAFO,EAEH;AACRL,wBAAQC,GAAR,CAAY,aAAZ,EAA0BI,GAA1B;AACH,aAJc;AAKfC,gBALe,gBAKVD,GALU,EAKN;AACLL,wBAAQC,GAAR,CAAY,aAAZ,EAA0BI,GAA1B;AACH;AAPc,SAAnB;;AAUAZ,WAAGc,aAAH,CAAiB;AACbC,6BAAiB,IADJ;AAEbJ,mBAFa,mBAELC,GAFK,EAED;AACR;AACH;AAJY,SAAjB;;AAOA,YAAII,WAAW5C,OAAO6C,eAAP,CAAuB,MAAvB,CAAf;AACAjB,WAAGkB,iBAAH,CAAqB,UAASN,GAAT,EAAa;AAC9B,mBAAO;AACHO,uBAAO/C,OAAOgD,QAAP,CAAgB,MAAhB,EAAwBhD,OAAOiD,UAA/B,CADJ;AAEHC,0BAAUN,QAFP;AAGHO,uBAAS,SAAO/C,kBAAkBgD,GAH/B;AAIHb,uBAJG,mBAIKC,GAJL,EAIS;AACRL,4BAAQC,GAAR,CAAY,SAAZ;AACA;AACA7B,+BAAW8C,WAAX,CAAuB,QAAvB,EAAgC,YAAhC,EAA6C,CAA7C;AACH,iBARE;AASHZ,oBATG,gBASED,GATF,EASM;AACLL,4BAAQC,GAAR,CAAY,SAAZ;AACH;AAXE,aAAP;AAaH,SAdD;;AAgBA;AACAR,WAAG0B,aAAH,CAAiB;AACbf,mBADa,mBACLC,GADK,EACD;AACRL,wBAAQC,GAAR,CAAY,WAAZ,EAAwBI,GAAxB;AACAxC,uBAAOuD,UAAP,GAAoBf,GAApB;AACAxC,uBAAOwD,SAAP,CAAiBhB,IAAIiB,MAArB;AACH,aALY;AAMbhB,gBANa,gBAMRD,GANQ,EAMJ;AACLL,wBAAQC,GAAR,CAAY,WAAZ,EAAwBI,GAAxB;AACH;AARY,SAAjB;AAUH,KA3EI;AA4ELkB,aA5EK,uBA4EM;AACPvB,gBAAQC,GAAR,CAAY,kBAAZ;AACA,YAAIuB,OAAO,IAAX;AACAxD,oBAAYyD,iBAAZ,CAA8B5D,OAAO6D,MAArC,EAA4C,QAA5C,EAAqDF,KAAKG,QAA1D,EAAmEH,IAAnE;AACAxD,oBAAYyD,iBAAZ,CAA8B5D,OAAO6D,MAArC,EAA4C,WAA5C,EAAwDF,KAAKI,WAA7D,EAAyEJ,IAAzE;AACAxD,oBAAYyD,iBAAZ,CAA8B5D,OAAO6D,MAArC,EAA4C,SAA5C,EAAsDF,KAAKK,SAA3D,EAAqEL,IAArE;AACH,KAlFI;AAmFL7B,eAnFK,yBAmFQ;AACT,YAAI6B,OAAO,IAAX;AACA/B,WAAGqC,KAAH,CAAS;AACL1B,qBAAS,iBAAS2B,IAAT,EAAe;AACpB,oBAAIA,KAAKC,IAAT,EAAe;AACX,wBAAIC,OAAO,2DAAX;AACA,wBAAIC,SAAS,EAAb;AACAA,2BAAOC,OAAP,GAAiB,IAAjB;AACAD,2BAAOE,OAAP,GAAiB,OAAjB;AACAF,2BAAOF,IAAP,GAAcD,KAAKC,IAAnB,CALW,CAKa;AACxB,wBAAIK,OAAO,UAAUN,KAAKC,IAAf,GAAsB,GAAtB,GAA4B,UAA5B,GAAyC,MAAzC,GAAkD,GAAlD,GAAwD,UAAxD,GAAoE,OAA/E;AACAhC,4BAAQC,GAAR,CAAY,UAAQoC,IAApB;AACA,wBAAIC,QAAQd,KAAKe,OAAL,CAAaF,IAAb,CAAZ;AACAH,2BAAOI,KAAP,GAAeA,MAAME,WAAN,EAAf;;AAEA,wBAAIC,MAAM,IAAV;AACA,wBAAIC,WAAW,KAAf;AACA,wBAAIC,YAAY,SAAZA,SAAY,GAAU;AACtB;AACAF,8BAAMnE,GAAGC,EAAH,CAAMC,IAAN,CAAW0C,WAAX,CAAuB,EAAvB,EAA0BgB,MAA1B,EAAiC,UAASU,GAAT,EAAa;AAChDH,kCAAM,IAAN;AACAC,uCAAW,IAAX;AACA;AACAlB,iCAAKqB,MAAL,GAAcD,IAAIE,IAAJ,CAASC,OAAvB;AACAlF,mCAAOmF,MAAP,GAAgBJ,IAAIE,IAAJ,CAASC,OAAzB;AACA/C,oCAAQC,GAAR,CAAY,qBAAZ,EAAkCuB,KAAKqB,MAAvC;AACArB,iCAAK9B,aAAL;AACH,yBARK,EAQJuC,IARI,CAAN;AASAgB,mCAAWC,EAAX,EAAc,IAAd;AACH,qBAZD;;AAcA,wBAAIA,KAAK,SAALA,EAAK,GAAU;AACf,4BAAG,CAACR,QAAJ,EAAa;AACT,gCAAGD,GAAH,EAAO;AACHA,oCAAIU,KAAJ;AACAnD,wCAAQC,GAAR,CAAY,4BAAZ;AACAgD,2CAAW,YAAU;AACjBN;AACH,iCAFD,EAEE,IAFF;AAGH,6BAND,MAOI;AACAA;AACH;AACJ;AACJ,qBAbD;AAcAO;AACH,iBA1CD,MA0CK;AACHlD,4BAAQC,GAAR,CAAY,UAAUI,IAAI+C,MAA1B;AACD;AACJ;AA/CI,SAAT;AAiDH,KAtII;AAuILb,WAvIK,mBAuIGF,IAvIH,EAuIQ;AACT,YAAIgB,UAAUlF,IAAImF,OAAJ,CAAYjB,OAAK,kCAAjB,CAAd;AACA,eAAOgB,OAAP;AACH,KA1II;;AA2IL3D,mBAAc,yBAAU;AACpB,YAAIwC,SAAS,EAAb;AACAA,eAAOqB,GAAP,GAAa,MAAb;AACArB,eAAOsB,GAAP,GAAa3F,OAAO4F,YAApB;AACAvB,eAAOwB,OAAP,GAAiB,aAAjB;AACAxB,eAAOyB,IAAP,GAAc,MAAd;AACAzB,eAAO0B,IAAP,GAAc/F,OAAO4F,YAArB;AACAvB,eAAO2B,QAAP,GAAkB,aAAlB;AACA3B,eAAO4B,OAAP,GAAiBjG,OAAO4F,YAAxB;;AAEA,YAAIjC,OAAO,IAAX;AACA,YAAIiB,MAAM,IAAV;AACA,YAAIC,WAAW,KAAf;AACA,YAAIC,YAAY,SAAZA,SAAY,GAAU;AACtB;AACAnB,iBAAKvC,UAAL,CAAgBM,MAAhB,GAAyB,YAAzB;AACAkD,kBAAMnE,GAAGC,EAAH,CAAMC,IAAN,CAAW0C,WAAX,CAAuB,EAAvB,EAA0BgB,MAA1B,EAAiC,UAASU,GAAT,EAAa;AAChD;AACA,oBAAGpB,KAAKvC,UAAR,EACIuC,KAAKvC,UAAL,CAAgBM,MAAhB,GAAyB,SAAzB;AACJkD,sBAAM,IAAN;AACAC,2BAAW,IAAX;AACA7E,uBAAOkG,kBAAP,CAA0BnB,GAA1B;AACA5C,wBAAQC,GAAR,CAAYpC,OAAOmG,YAAnB;AACAxC,qBAAKyC,iBAAL;AACH,aATK,EASJpG,OAAOmG,YAAP,CAAoBE,QAThB,CAAN;AAUAjB,uBAAWC,EAAX,EAAc,IAAd;AACH,SAdD;;AAgBA,YAAIA,KAAK,SAALA,EAAK,GAAU;AACf,gBAAG,CAACR,QAAJ,EAAa;AACT,oBAAGD,GAAH,EAAO;AACHA,wBAAIU,KAAJ;AACA;AACA,wBAAG3B,KAAKvC,UAAR,EACIuC,KAAKvC,UAAL,CAAgBM,MAAhB,GAAyB,cAAzB;AACJ0D,+BAAW,YAAU;AACjBN;AACH,qBAFD,EAEE,IAFF;AAGH,iBARD,MASI;AACAA;AACH;AACJ;AACJ,SAfD;AAgBAO;AACH,KAzLI;AA0LLe,qBA1LK,+BA0Lc;AACf,YAAIzC,OAAO,IAAX;AACAlD,WAAGC,EAAH,CAAME,GAAN,CAAU0F,OAAV,CAAkBtG,OAAOmG,YAAP,CAAoBI,IAAtC,EAA2CvG,OAAOmG,YAAP,CAAoBK,IAA/D,EAAoE,UAASzB,GAAT,EAAa;AAC7E;AACA,gBAAG,OAAOnD,EAAP,IAAY,WAAf,EAA2B;AACvB+B,qBAAK8C,UAAL;AACH,aAFD,MAEK;AACD9C,qBAAK+C,aAAL;AACH;AACJ,SAPD;;AASA,YAAIC,uBAAuB,SAAvBA,oBAAuB,GAAU;AACjChD,iBAAKzB,MAAL,GAAc,IAAd;AACA;AACA;AACA;AACA;AACA;AACAzB,eAAGC,EAAH,CAAMI,QAAN,CAAe8F,SAAf;AACA5G,mBAAO6G,aAAP,GAAuB,KAAvB;AACApG,eAAG4F,QAAH,CAAYS,SAAZ,CAAsB,cAAtB;AACH,SAVD;;AAYAC,oBAAY,YAAU;AAClB,gBAAGtG,GAAGC,EAAH,CAAME,GAAN,CAAUoG,SAAb,EAAuB;AACnBrD,qBAAKsD,aAAL;AACH,aAFD,MAEK;AACD,oBAAG,CAACtD,KAAKzB,MAAT,EACIyE;AACP;AACJ,SAPW,CAOVO,IAPU,CAOL,IAPK,CAAZ,EAOa,KAPb;;AASAH,oBAAY,YAAU;AAClB,gBAAG/G,OAAOmH,QAAP,GAAkB,CAArB,EAAuB;AACnBnH,uBAAOmH,QAAP,IAAmB,CAAnB;AACH;AACJ,SAJW,CAIVD,IAJU,CAIL,IAJK,CAAZ,EAIa,IAJb;;AAMA/G,oBAAYiH,cAAZ,CAA2BpH,OAAO6D,MAAlC,EAAyC,QAAzC,EAAkDF,KAAKG,QAAvD,EAAgEH,IAAhE;AACAxD,oBAAYiH,cAAZ,CAA2BpH,OAAO6D,MAAlC,EAAyC,WAAzC,EAAqDF,KAAKI,WAA1D,EAAsEJ,IAAtE;AACAxD,oBAAYiH,cAAZ,CAA2BpH,OAAO6D,MAAlC,EAAyC,SAAzC,EAAmDF,KAAKK,SAAxD,EAAkEL,IAAlE;AACH,KAnOI;AAoOL+C,iBApOK,2BAoOU;AACX,YAAI/C,OAAO,IAAX;AACA,YAAI0D,SAASzF,GAAG0F,oBAAH,EAAb;AACAnF,gBAAQC,GAAR,CAAY,eAAemF,KAAKC,SAAL,CAAeH,MAAf,CAA3B;AACA1D,aAAKhC,QAAL,GAAiB0F,OAAOlE,KAAP,CAAasE,GAA9B;AACAtF,gBAAQC,GAAR,CAAY,iBAAiBuB,KAAKhC,QAAlC;;AAEAC,WAAG8F,WAAH,CAAe;AACXnF,qBAAS,iBAAUC,GAAV,EAAe;AACrBL,wBAAQC,GAAR,CAAY,oBAAoBmF,KAAKC,SAAL,CAAehF,IAAImF,QAAnB,CAAhC;AACA3H,uBAAO4H,YAAP,CAAoBpF,IAAImF,QAAxB;AACAhE,qBAAK8C,UAAL;AACD,aALS;AAMVhE,kBAAM,cAAUD,GAAV,EAAc;AACjBL,wBAAQC,GAAR,CAAY,WAAZ;AACA/B,8BAAcwH,mBAAd,CAAkC,MAAlC,EAAyC,QAAzC,EAAkD,IAAlD;AACH;AATU,SAAf;AAWH,KAtPI;AAuPL/D,YAvPK,oBAuPIgE,KAvPJ,EAuPU;AACX,YAAInE,OAAO,IAAX;AACAxB,gBAAQC,GAAR,CAAY,WAAZ;AACA,YAAI6C,OAAO6C,MAAMC,WAAN,EAAX;AACA5F,gBAAQC,GAAR,CAAY6C,IAAZ;AACAjF,eAAOgI,YAAP,GAAsB/C,KAAKA,IAAL,CAAUA,IAAV,CAAegD,QAArC;AACAtE,aAAKuE,SAAL;AACH,KA9PI;AA+PLnE,eA/PK,uBA+PO+D,KA/PP,EA+Pa;AACd;AACH,KAjQI;AAkQL9D,aAlQK,qBAkQK8D,KAlQL,EAkQW;AACZ,YAAInE,OAAO,IAAX;AACAxB,gBAAQC,GAAR,CAAY,YAAZ;AACAD,gBAAQC,GAAR,CAAY0F,MAAMC,WAAN,EAAZ;AACA,YAAI9C,OAAO6C,MAAMC,WAAN,EAAX;AACApE,aAAKwE,oBAAL,CAA0BlD,IAA1B;AACH,KAxQI;AAyQLgC,iBAzQK,2BAyQU;AACX;AACA,YAAI5C,SAAS,EAAb;AACAA,eAAO+D,CAAP,GAAWlI,SAASmI,OAAT,CAAiBC,SAAjB,CAA2BC,KAAtC;AACA9H,WAAGC,EAAH,CAAME,GAAN,CAAU4H,IAAV,CAAe,WAAf,EAA2BtI,SAASuI,OAAT,CAAiBH,SAA5C,EAAsDjE,MAAtD;AACArE,eAAOiD,UAAP,GAAoBjD,OAAO0I,SAAP,CAAiB,CAAjB,CAApB;AACH,KA/QI;AAgRLjC,cAhRK,wBAgRO;AACR;AACA,YAAG,OAAO7E,EAAP,IAAY,WAAf,EAA2B;AACvB,gBAAIyC,SAAS,EAAb;AACAA,mBAAO+D,CAAP,GAAWlI,SAASmI,OAAT,CAAiBM,KAAjB,CAAuBC,MAAlC;AACAvE,mBAAOwE,CAAP,GAAWvI,IAAImF,OAAJ,CAAY,UAAZ,CAAX;AACApB,mBAAOyE,CAAP,GAAW,0CAAX;AACAzE,mBAAO0E,CAAP,GAAW/I,OAAO4F,YAAlB;AACAvB,mBAAO2E,CAAP,GAAW,aAAX;AACA3E,mBAAO4E,CAAP,GAAW,UAAX;AACA5E,mBAAO/C,IAAP,GAAc,OAAd;AACA;AACAb,eAAGC,EAAH,CAAME,GAAN,CAAU4H,IAAV,CAAe,QAAf,EAAwBtI,SAASuI,OAAT,CAAiBE,KAAzC,EAA+CtE,MAA/C;AACA;AACH;AACD,YAAIV,OAAO,IAAX;AACA,YAAIuF,WAAW,YAAYvF,KAAKqB,MAAhC;AACA,YAAIiD,WAAWiB,WAAWlJ,OAAOmJ,oBAAlB,GAAyC,QAAxD;AACAlB,mBAAW3H,IAAImF,OAAJ,CAAYwC,QAAZ,CAAX;AACA,YAAImB,kBAAkBF,WAAWlJ,OAAOmJ,oBAAxC;AACAC,0BAAkB9I,IAAImF,OAAJ,CAAY2D,eAAZ,CAAlB;AACA,YAAIC,cAAc1F,KAAKqB,MAAL,GAAchF,OAAOmJ,oBAAvC;AACAE,sBAAc/I,IAAImF,OAAJ,CAAY4D,WAAZ,CAAd;;AAEA,YAAIhF,SAAS,EAAb;AACAA,eAAO+D,CAAP,GAAWlI,SAASmI,OAAT,CAAiBM,KAAjB,CAAuBC,MAAlC;AACAvE,eAAOwE,CAAP,GAAWO,eAAX;AACA/E,eAAOiF,CAAP,GAAWJ,QAAX;AACA7E,eAAOkF,CAAP,GAAWtB,QAAX;AACA5D,eAAO0E,CAAP,GAAW/I,OAAO4F,YAAlB;AACAvB,eAAO2E,CAAP,GAAW,aAAX;AACA3E,eAAO4E,CAAP,GAAWI,WAAX;AACAhF,eAAO/C,IAAP,GAAc,OAAd;AACA+C,eAAOmF,KAAP,GAAe7F,KAAKqB,MAApB;AACAvE,WAAGC,EAAH,CAAME,GAAN,CAAU4H,IAAV,CAAe,QAAf,EAAwBtI,SAASuI,OAAT,CAAiBE,KAAzC,EAA+CtE,MAA/C;AACH,KAnTI;AAoTL6D,aApTK,uBAoTM;AACP,YAAG,OAAOtG,EAAP,IAAY,WAAf,EAA2B;AACvB,gBAAIyC,SAAS,EAAb;AACAA,mBAAO+D,CAAP,GAAWlI,SAASmI,OAAT,CAAiBM,KAAjB,CAAuBc,KAAlC;AACApF,mBAAOwE,CAAP,GAAWvI,IAAImF,OAAJ,CAAY,UAAZ,CAAX;AACApB,mBAAOkF,CAAP,GAAWvJ,OAAOgI,YAAlB;AACA3D,mBAAO2E,CAAP,GAAW,aAAX;AACA3E,mBAAO0E,CAAP,GAAW/I,OAAO4F,YAAlB;AACAvB,mBAAOqF,EAAP,GAAY,CAAZ;AACArF,mBAAO4E,CAAP,GAAW,UAAX;AACA5E,mBAAOsF,EAAP,GAAY3J,OAAO4J,MAAP,CAAcC,QAA1B;AACAxF,mBAAOyF,OAAP,GAAiB9J,OAAO4J,MAAP,CAAcG,MAA/B;AACA1F,mBAAO2F,IAAP,GAAchK,OAAO4J,MAAP,CAAcK,SAA5B;AACA5F,mBAAO6F,mBAAP,GAA6BlK,OAAOmK,aAApC,CAZuB,CAY2B;AAClD1J,eAAGC,EAAH,CAAME,GAAN,CAAU4H,IAAV,CAAe,OAAf,EAAuBtI,SAASuI,OAAT,CAAiBE,KAAxC,EAA8CtE,MAA9C;AACA;AACH;AACD,YAAIV,OAAO,IAAX;AACA,YAAIU,SAAS,EAAb;AACAA,eAAO+D,CAAP,GAAWlI,SAASmI,OAAT,CAAiBM,KAAjB,CAAuBc,KAAlC;AACApF,eAAOwE,CAAP,GAAWlF,KAAKqB,MAAhB;AACAX,eAAOkF,CAAP,GAAWvJ,OAAOgI,YAAlB;AACA3D,eAAO2E,CAAP,GAAW,aAAX;AACA3E,eAAO0E,CAAP,GAAW/I,OAAO4F,YAAlB;AACAvB,eAAOqF,EAAP,GAAY,CAAZ;AACArF,eAAO4E,CAAP,GAAW,UAAX;AACA5E,eAAO+F,CAAP,GAAWzG,KAAKqB,MAAhB;AACAX,eAAOsF,EAAP,GAAY3J,OAAO4J,MAAP,CAAcC,QAA1B;AACAxF,eAAOyF,OAAP,GAAiB9J,OAAO4J,MAAP,CAAcG,MAA/B,CA5BO,CA4B+B;AACtC1F,eAAO2F,IAAP,GAAchK,OAAO4J,MAAP,CAAcK,SAA5B;AACA5F,eAAOgG,MAAP,GAAgB1G,KAAKhC,QAArB;AACA0C,eAAO6F,mBAAP,GAA6BlK,OAAOmK,aAApC,CA/BO,CA+B2C;AAClD1J,WAAGC,EAAH,CAAME,GAAN,CAAU4H,IAAV,CAAe,OAAf,EAAuBtI,SAASuI,OAAT,CAAiBE,KAAxC,EAA8CtE,MAA9C;AACA;AACH,KAtVI;AAuVL8D,wBAvVK,gCAuVgBmC,QAvVhB,EAuVyB;AAC1B,YAAIC,OAAOD,SAASrF,IAAT,CAAcsF,IAAzB;AACA;AACA,YAAGD,SAAS,MAAT,KAAoBpK,SAASsK,QAAT,CAAkB7B,KAAlB,CAAwB8B,EAA/C,EAAkD;AAC9C,gBAAIC,YAAYJ,SAAS,MAAT,EAAiB,OAAjB,CAAhB;AACA,gBAAII,aAAa,OAAOA,SAAP,IAAqB,QAAtC,EAA+C,CAC9C,CADD,MACK;AACDA,4BAAY,CAAZ;AACH;AACD,iBAAI,IAAIC,IAAE,CAAV,EAAYA,IAAEJ,KAAKK,MAAnB,EAA0BD,GAA1B,EAA8B;AAC1B,oBAAGJ,KAAKI,CAAL,EAAQE,KAAX,EAAiB;AACb,yBAAI,IAAIC,IAAE,CAAV,EAAYA,IAAEP,KAAKI,CAAL,EAAQE,KAAR,CAAcD,MAA5B,EAAmCE,GAAnC,EAAuC;AACnCP,6BAAKI,CAAL,EAAQE,KAAR,CAAcC,CAAd,EAAiBC,OAAjB,GAA2BR,KAAKI,CAAL,EAAQI,OAAnC;AACH;AACJ;AACJ;AACD/K,mBAAOgL,UAAP,GAAoBV,SAAS,MAAT,EAAiBU,UAArC;AACAhL,mBAAOiL,WAAP,GAAqBX,SAAS,MAAT,EAAiBW,WAAtC;;AAEA;AACAjL,mBAAOkL,UAAP,GAAoBZ,SAAS,MAAT,EAAiBa,iBAArC;;AAEA/K,8BAAkBgL,QAAlB,GAA6Bd,SAAS,MAAT,EAAiB,MAAjB,CAA7B;AACAlK,8BAAkBgD,GAAlB,GAAwBiI,SAASf,SAAS,MAAT,EAAiB,KAAjB,CAAT,CAAxB;AACAlK,8BAAkBkL,IAAlB,GAAyBD,SAASf,SAAS,MAAT,EAAiB,OAAjB,CAAT,CAAzB;AACAlK,8BAAkBmL,IAAlB,GAAyBF,SAASf,SAAS,MAAT,EAAiB,MAAjB,CAAT,CAAzB;AACAlK,8BAAkB2J,MAAlB,GAA2BsB,SAASf,SAAS,MAAT,EAAiB,KAAjB,CAAT,CAA3B;AACAlK,8BAAkBoL,IAAlB,GAAyBlB,SAAS,MAAT,EAAiB,MAAjB,CAAzB;AACAlK,8BAAkBqL,OAAlB,GAA4BnB,SAAS,MAAT,EAAiB,UAAjB,CAA5B;AACAlK,8BAAkBsL,KAAlB,GAA0BL,SAASf,SAAS,MAAT,EAAiB,OAAjB,CAAT,CAA1B;AACAlK,8BAAkBuL,OAAlB,GAA4BN,SAASf,SAAS,MAAT,EAAiB,UAAjB,EAA6B,SAA7B,CAAT,CAA5B;AACAlK,8BAAkBwL,GAAlB,GAAwBP,SAASf,SAAS,MAAT,EAAiB,UAAjB,EAA6B,KAA7B,CAAT,CAAxB;AACAlK,8BAAkByL,SAAlB,GAA8BvB,SAAS,MAAT,EAAiB,YAAjB,CAA9B;AACAlK,8BAAkB0L,SAAlB,GAA8BxB,SAAS,MAAT,EAAiB,WAAjB,CAA9B;AACAlK,8BAAkB2L,KAAlB,GAA0BV,SAASf,SAAS,MAAT,EAAiB,OAAjB,CAAT,CAA1B;;AAEAlK,8BAAkB4L,OAAlB,GAA4BX,SAASf,SAAS,MAAT,EAAiB,SAAjB,CAAT,CAA5B;AACAlK,8BAAkB6L,OAAlB,GAA4BZ,SAASf,SAAS,MAAT,EAAiB,SAAjB,CAAT,CAA5B;AACAlK,8BAAkB8L,UAAlB,GAA+Bb,SAASf,SAAS,MAAT,EAAiB,aAAjB,CAAT,CAA/B;;AAEAlK,8BAAkB+L,YAAlB,GAAiCd,SAASf,SAAS,MAAT,EAAiB,0BAAjB,CAAT,CAAjC;AACAlK,8BAAkBgM,aAAlB,GAAkCf,SAASf,SAAS,MAAT,EAAiB,4BAAjB,CAAT,CAAlC;;AAEAlK,8BAAkBiM,MAAlB,GAA2BhB,SAASf,SAAS,MAAT,EAAiB,QAAjB,CAAT,CAA3B;AACAlK,8BAAkBkM,GAAlB,GAAwBjB,SAASf,SAAS,MAAT,EAAiB,KAAjB,CAAT,CAAxB;AACAlK,8BAAkBmK,IAAlB,GAAyBA,IAAzB;AACAnK,8BAAkBmM,OAAlB,GAA4BjC,SAAS,MAAT,EAAiB,SAAjB,CAA5B;AACAlK,8BAAkBoM,QAAlB,GAA6BlC,SAAS,MAAT,EAAiB,UAAjB,CAA7B;AACAlK,8BAAkBqM,MAAlB,GAA2BnC,SAAS,MAAT,EAAiB,QAAjB,CAA3B;;AAEAlK,8BAAkBsM,OAAlB,GAA4BrB,SAASf,SAAS,MAAT,EAAiB,SAAjB,CAAT,CAA5B;AACAlK,8BAAkBuM,WAAlB,GAAgCtB,SAASf,SAAS,MAAT,EAAiB,cAAjB,CAAT,CAAhC;AACAlK,8BAAkBwM,YAAlB,GAAiCvB,SAASf,SAAS,MAAT,EAAiB,eAAjB,CAAT,CAAjC;AACAlK,8BAAkByM,YAAlB,GAAiCxB,SAASf,SAAS,MAAT,EAAiB,eAAjB,CAAT,CAAjC;AACAlK,8BAAkB0M,UAAlB,GAA+BzB,SAASf,SAAS,MAAT,EAAiB,aAAjB,CAAT,CAA/B;AACAlK,8BAAkB2M,SAAlB,GAA8BzC,SAAS,MAAT,EAAiB,WAAjB,CAA9B;;AAEAlK,8BAAkB4M,UAAlB,GAA+B1C,SAAS,MAAT,EAAiB,eAAjB,CAA/B;;AAEAlK,8BAAkB6M,SAAlB,GAA8B3C,SAAS,MAAT,EAAiB,KAAjB,CAA9B;AACAlK,8BAAkB2C,KAAlB,GAA0BuH,SAAS,MAAT,EAAiB,OAAjB,CAA1B;AACAlK,8BAAkB8M,KAAlB,GAA0BxC,SAA1B;;AAEA;AACAtK,8BAAkB+M,cAAlB,GAAmC7C,SAAS,MAAT,EAAiB,gBAAjB,CAAnC;;AAEAnI,oBAAQC,GAAR,CAAYkI,SAAS,MAAT,CAAZ;;AAEA;AACAtK,mBAAOmH,QAAP,GAAkBmD,SAAS,MAAT,EAAiB,wBAAjB,CAAlB;AACAtK,mBAAOoN,MAAP,GAAgB9C,SAAS,MAAT,EAAiB,0BAAjB,CAAhB;AACAtK,mBAAOqN,aAAP,GAAuB/C,SAAS,MAAT,EAAiB,qCAAjB,CAAvB;AACAnI,oBAAQC,GAAR,CAAY,uBAAZ,EAAoCpC,OAAOqN,aAA3C;;AAGA;AACArN,mBAAOsN,cAAP,GAAwBhD,SAAS,MAAT,EAAiB,8BAAjB,CAAxB;AACA;;AAEAnI,oBAAQC,GAAR,CAAY,kBAAgBiJ,SAASf,SAAS,MAAT,EAAiB,KAAjB,CAAT,CAA5B;AACA,iBAAKlJ,UAAL,CAAgBM,MAAhB,GAAyB,WAAzB;AACA;AACA,iBAAK6L,YAAL;AACH,SAhFD,MAgFK;AACD;AACA,iBAAKnM,UAAL,CAAgBM,MAAhB,GAAyB,SAAzB;AACArB,0BAAcmN,gBAAd,CAA+B,IAA/B,EAAoC,SAApC,EAA8C,YAAU;AACpD/M,mBAAG4F,QAAH,CAAYS,SAAZ,CAAsB,cAAtB;AACH,aAFD;AAGH;AACJ,KAjbI;;AAkbJ;AACA2G,oBAnbI,8BAmbc;AACfhN,WAAG4F,QAAH,CAAYqH,YAAZ,CAAyB,WAAzB,EAAsC,YAAY;AAC9C;AACAjN,eAAG4F,QAAH,CAAYS,SAAZ,CAAsB,WAAtB;AACH,SAHD;AAIH,KAxbI;;AAybL;AACAyG,gBA1bK,0BA0bS;AACV,YAAI5J,OAAO,IAAX;AACA,YAAG,OAAO/B,EAAP,IAAY,WAAf,EAA2B;AACvB+B,iBAAK8J,gBAAL;AACH,SAFD,MAEK;;AAED,gBAAIE,cAAc/L,GAAGgM,oBAAH,EAAlB;AACA,gBAAIC,aAAajM,GAAG8D,GAAH,CAAOoI,cAAP,GAAsB,gBAAvC;AACA3L,oBAAQC,GAAR,CAAY,gBAAcyL,UAA1B;AACAF,wBAAYI,MAAZ,CAAmB;AACfC,sBAAKH,UADU;AAEftL,uBAFe,mBAEPC,GAFO,EAEH;AACRL,4BAAQC,GAAR,CAAY,SAAZ,EAAsBI,GAAtB;AACAmB,yBAAK8J,gBAAL;AACH,iBALc;AAMfhL,oBANe,gBAMVD,GANU,EAMN;AACLL,4BAAQC,GAAR,CAAY,UAAZ,EAAuBI,GAAvB;AACA,wBAAIyL,eAAerM,GAAG2L,YAAH,CAAgB;AAC/BW,6BAAK,8DAD0B;AAE/B3L,iCAAS,iBAASC,GAAT,EAAc;AACnBL,oCAAQC,GAAR,CAAY,QAAZ;AACA,gCAAI+L,WAAW3L,IAAI4L,YAAnB;AACAT,wCAAYU,KAAZ,CAAkB;AACdC,6CAAYH,QADE;AAEdI,4CAAW3M,GAAG8D,GAAH,CAAOoI,cAFJ;AAGdvL,uCAHc,mBAGNC,GAHM,EAGF;AACRL,4CAAQC,GAAR,CAAY,SAAZ,EAAsBI,GAAtB;AACAmB,yCAAK8J,gBAAL;AACH,iCANa;AAOdhL,oCAPc,gBAOTD,GAPS,EAOL;AACLL,4CAAQC,GAAR,CAAY,SAAZ,EAAsBI,GAAtB;AACH;AATa,6BAAlB;AAWH,yBAhB8B;AAiB/BC,4BAjB+B,gBAiB1BD,GAjB0B,EAiBtB;AACLL,oCAAQC,GAAR,CAAY,QAAZ,EAAqBI,GAArB;AACH;AAnB8B,qBAAhB,CAAnB;AAqBAyL,iCAAaO,gBAAb,CAA8B,UAAChM,GAAD,EAAS;AACnCmB,6BAAKnC,QAAL,CAAcE,MAAd,GAAuBc,IAAIhB,QAAJ,GAAa,GAApC;AACAmC,6BAAKvC,UAAL,CAAgBM,MAAhB,GAAyB,UAAzB;AACA;AACA;AACA;AACH,qBAND;AAQH;AArCc,aAAnB;AAuCH;AACJ;AA3eI,CAAT","file":"AppStart.js","sourceRoot":"../../../../../assets/Script/gameNetwork","sourcesContent":["var config = require(\"config\");\n// var ByteArray = require(\"ByteArray\");\nvar Protocol = require(\"Protocol\");\nvar EventHelper = require(\"EventHelper\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\nvar dialogManager = require(\"dialogManager\");\nvar MD5 = require(\"md5\");\nvar GameNetMgr = require(\"GameNetMgr\");\n\nfunction initMgr(){\n    cc.vv = {};\n    cc.vv.http = require(\"HTTP\");\n    cc.vv.net = require(\"GameNet\");\n\n    var AudioMgr = require(\"AudioMgr\");\n    cc.vv.audioMgr = new AudioMgr();\n    cc.vv.audioMgr.init();\n}\n   \ncc.Class({\n    extends: cc.Component,\n    properties: {\n        labLoading : {\n            default : null,\n            type : cc.Label\n        },\n        progress : {\n            default : null,\n            type : cc.Label\n        },\n    },\n    // use this for initialization\n    onLoad: function () {\n        initMgr();\n        this.progress.string = \"\";\n        this.shareUid = 0;\n        if(typeof(wx)==\"undefined\"){\n            this.getServerInfo();\n        }else{\n            this.weixinLogin();\n        }\n        //设置常驻节点\n        var myNode = new cc.Node(\"myNode\");\n        EventHelper.addPersistRootNode(myNode);\n        this.isShow = false;\n\n        console.log(\"typeof(wx):\"+typeof(wx));\n        if(typeof(wx)==\"undefined\"){return;}\n\n        wx.setKeepScreenOn({\n            keepScreenOn:true,\n            success(res){\n                console.log(\"设置保持常亮状态成功。\",res);\n            },\n            fail(res){\n                console.log(\"设置保持常亮状态失败。\",res);\n            }\n        });\n\n        wx.showShareMenu({\n            withShareTicket: true,\n            success(res){\n                // console.log(\">>>>>>>>>showShareMenu\");\n            }\n        });\n\n        var shareImg = config.getShareImgPath(\"task\");\n        wx.onShareAppMessage(function(res){\n            return {\n                title: config.shareTxt[\"task\"][config.shareIndex],\n                imageUrl: shareImg,\n                query :  \"key=\"+PlayerDetailModel.uid,\n                success(res){\n                    console.log(\"转发成功!!!\");\n                    // console.log(res);\n                    GameNetMgr.sendRequest(\"System\",\"ShareWxRes\",1);\n                },\n                fail(res){\n                    console.log(\"转发失败!!!\")\n                } \n            }\n        });\n\n        //获取系统信息\n        wx.getSystemInfo({\n            success(res){\n                console.log(\"获取系统信息成功。\",res);\n                config.SystemInfo = res;\n                config.setDevice(res.system);\n            },\n            fail(res){\n                console.log(\"获取系统信息失败。\",res);\n            }\n        });\n    },\n    onDestroy(){\n        console.log(\"appStart Destroy\");\n        var self = this;\n        EventHelper.RemoveCustomEvent(config.MyNode,\"Regist\",self.onRegist,self);\n        EventHelper.RemoveCustomEvent(config.MyNode,\"HeartBeat\",self.onHeartBeat,self);\n        EventHelper.RemoveCustomEvent(config.MyNode,\"LoginOK\",self.onLoginOK,self); \n    },\n    weixinLogin(){\n        var self = this;\n        wx.login({\n            success: function(ress) {\n                if (ress.code) {\n                    var _url = \"https://sdk.youjoy.tv/Api/ThirdParty/WxSmallProgram/Login\";\n                    var params = {};\n                    params.game_id = 1034;\n                    params.version = \"1.0.0\";\n                    params.code = ress.code;//game_id=1034\n                    var sign = \"code=\" + ress.code + \"&\" + \"game_id=\" + \"1034\" + \"&\" + \"version=\"+ \"1.0.0\";\n                    console.log(\"sign:\"+sign);\n                    var _sign = self.getSign(sign);\n                    params._sign = _sign.toUpperCase();\n\n                    var xhr = null;\n                    var complete = false;\n                    var fnRequest = function(){\n                        // console.log(\"sdk.youjoy.tv 正在连接服务器...\");\n                        xhr = cc.vv.http.sendRequest(\"\",params,function(ret){\n                            xhr = null;\n                            complete = true;\n                            // console.log(\"connectSdkServer = \" + JSON.stringify(ret));\n                            self.sdkuid = ret.data.user_id;\n                            config.SDKUID = ret.data.user_id;\n                            console.log(\"------------sdkuid:\",self.sdkuid);\n                            self.getServerInfo();\n                        },_url);\n                        setTimeout(fn,5000);            \n                    };\n                    \n                    var fn = function(){\n                        if(!complete){\n                            if(xhr){\n                                xhr.abort();\n                                console.log(\"sdk.youjoy.tv 连接失败，即将重试...\");\n                                setTimeout(function(){\n                                    fnRequest();\n                                },5000);\n                            }\n                            else{\n                                fnRequest();\n                            }\n                        }\n                    };\n                    fn();\n                }else{\n                  console.log('登录失败！' + res.errMsg)\n                }\n            }\n        });\n    },\n    getSign(sign){\n        var endData = MD5.hex_md5(sign+\"79fad6f7510d86aabe01a7006153ddd0\");\n        return endData;\n    },\n    getServerInfo:function(){\n        var params = {};\n        params.env = \"prod\";\n        params.ver = config.VERSION_NAME;\n        params.channel = \"weichatgame\";\n        params.udid = \"udid\";\n        params.pver = config.VERSION_NAME;\n        params.pchannel = \"weichatgame\";\n        params.presver = config.VERSION_NAME;\n        \n        var self = this;\n        var xhr = null;\n        var complete = false;\n        var fnRequest = function(){\n            // console.log(\"正在连接服务器...\");\n            self.labLoading.string = \"正在连接服务器...\";\n            xhr = cc.vv.http.sendRequest(\"\",params,function(ret){\n                // console.log(\"连接成功\");\n                if(self.labLoading)\n                    self.labLoading.string = \"连接成功...\";\n                xhr = null;\n                complete = true;\n                config.GlobalRouterUpdate(ret);\n                console.log(config.GlobalRouter);\n                self.connectGameServer();\n            },config.GlobalRouter.director);\n            setTimeout(fn,5000);            \n        };\n        \n        var fn = function(){\n            if(!complete){\n                if(xhr){\n                    xhr.abort();\n                    // console.log(\"连接失败，即将重试...\");\n                    if(self.labLoading)\n                        self.labLoading.string = \"连接失败，即将重试...\";\n                    setTimeout(function(){\n                        fnRequest();\n                    },5000);\n                }\n                else{\n                    fnRequest();\n                }\n            }\n        };\n        fn();\n    },\n    connectGameServer(){\n        var self = this;\n        cc.vv.net.connect(config.GlobalRouter.host,config.GlobalRouter.port,function(ret){\n            //WebSocket连接成功\n            if(typeof(wx)==\"undefined\"){\n                self.sendRegist();\n            }else{\n                self.getWxUserInfo();\n            }\n        });\n\n        var ConnectionClosedShow = function(){\n            self.isShow = true;\n            // dialogManager.showCommonDialog(\"提示\",\"与服务器断开连接！\",function(){\n            //     self.isShow = false;\n            //     cc.vv.audioMgr.stopMusic();\n            //     cc.director.loadScene(\"LoadingScene\");\n            // });\n            cc.vv.audioMgr.stopMusic();\n            config.stopOnMassage = false;\n            cc.director.loadScene(\"LoadingScene\");\n        }\n\n        setInterval(function(){\n            if(cc.vv.net.isPinging){\n                self.sendHeartBeat();\n            }else{\n                if(!self.isShow)\n                    ConnectionClosedShow();\n            }     \n        }.bind(this),10000);\n\n        setInterval(function(){\n            if(config.adCdTime > 0){\n                config.adCdTime -= 1;\n            }   \n        }.bind(this),1000);\n\n        EventHelper.AddCustomEvent(config.MyNode,\"Regist\",self.onRegist,self);\n        EventHelper.AddCustomEvent(config.MyNode,\"HeartBeat\",self.onHeartBeat,self);\n        EventHelper.AddCustomEvent(config.MyNode,\"LoginOK\",self.onLoginOK,self); \n    },\n    getWxUserInfo(){\n        var self = this;\n        var launch = wx.getLaunchOptionsSync();\n        console.log(\"launch =  \" + JSON.stringify(launch));\n        self.shareUid =  launch.query.key;\n        console.log(\"shareUid =  \" + self.shareUid);\n\n        wx.getUserInfo({\n            success: function (res) {\n               console.log(\"res.userInfo = \" + JSON.stringify(res.userInfo));\n               config.UpdateWxInfo(res.userInfo);\n               self.sendRegist();\n             },\n             fail: function (res){\n                console.log(\"获取信息失败!!!\")\n                dialogManager.showAuthorizeDialog(\"授权失败\",\"请您重新授权\",null);\n            } \n        });\n    },\n    onRegist(event){\n        var self = this;\n        console.log(\"Regist---\");\n        var data = event.getUserData();\n        console.log(data)\n        config.temppassword = data.data.data.password;\n        self.sendLogin();\n    },\n    onHeartBeat(event){\n        // console.log(\"HeartBeat---\");\n    },\n    onLoginOK(event){\n        var self = this;\n        console.log(\"LoginOK---\");\n        console.log(event.getUserData());\n        var data = event.getUserData();\n        self.setPlayerDetailModel(data);\n    },\n    sendHeartBeat(){\n        //发送心跳\n        var params = {};\n        params.t = Protocol.Request.HeartBeat.Alive;\n        cc.vv.net.send(\"HeartBeat\",Protocol.Command.HeartBeat,params);\n        config.shareIndex = config.getRandom(1);\n    },\n    sendRegist(){\n        //注册请求\n        if(typeof(wx)==\"undefined\"){\n            var params = {};\n            params.t = Protocol.Request.Login.Regist;\n            params.d = MD5.hex_md5(\"yepat123\");\n            params.u = \"50ee8041a7fd8baa6348252ea114432bb3be23bd\";\n            params.v = config.VERSION_NAME;\n            params.c = \"weichatgame\";\n            params.e = \"defaults\";\n            params.type = \"guest\";\n            // params.sdkid = self.sdkuid;\n            cc.vv.net.send(\"Regist\",Protocol.Command.Login,params);\n            return;\n        }\n        var self = this;\n        var username = \"3rdplt_\" + self.sdkuid;\n        var password = username + config.OpenUDIDEncryptToken + \"suffix\";\n        password = MD5.hex_md5(password);\n        var encodedUsername = username + config.OpenUDIDEncryptToken;\n        encodedUsername = MD5.hex_md5(encodedUsername);\n        var encodedUDID = self.sdkuid + config.OpenUDIDEncryptToken\n        encodedUDID = MD5.hex_md5(encodedUDID);\n\n        var params = {};\n        params.t = Protocol.Request.Login.Regist;\n        params.d = encodedUsername;\n        params.a = username;\n        params.p = password;\n        params.v = config.VERSION_NAME;\n        params.c = \"weichatgame\";\n        params.e = encodedUDID;\n        params.type = \"third\";\n        params.sdkid = self.sdkuid;\n        cc.vv.net.send(\"Regist\",Protocol.Command.Login,params);  \n    },\n    sendLogin(){\n        if(typeof(wx)==\"undefined\"){\n            var params = {};\n            params.t = Protocol.Request.Login.Guest;\n            params.d = MD5.hex_md5(\"yepat123\");\n            params.p = config.temppassword;\n            params.c = \"weichatgame\";\n            params.v = config.VERSION_NAME;\n            params.tv = 1;\n            params.e = \"defaults\";\n            params.wn = config.wxInfo.nickName;\n            params.wgender = config.wxInfo.gender;\n            params.wurl = config.wxInfo.avatarUrl;\n            params.weichatgame_version = config.VERSION_ABOUT;//显示版本\n            cc.vv.net.send(\"Login\",Protocol.Command.Login,params); \n            return;\n        }\n        var self = this;\n        var params = {};\n        params.t = Protocol.Request.Login.Guest;\n        params.d = self.sdkuid;\n        params.p = config.temppassword;\n        params.c = \"weichatgame\";\n        params.v = config.VERSION_NAME;\n        params.tv = 1;\n        params.e = \"defaults\";\n        params.f = self.sdkuid;\n        params.wn = config.wxInfo.nickName;\n        params.wgender = config.wxInfo.gender;//性别 0：未知、1：男、2：女\n        params.wurl = config.wxInfo.avatarUrl;\n        params.invite = self.shareUid;\n        params.weichatgame_version = config.VERSION_ABOUT;//显示版本\n        cc.vv.net.send(\"Login\",Protocol.Command.Login,params);  \n        // console.log(\">>>>>>wgender:\",config.wxInfo.gender)\n    },\n    setPlayerDetailModel(response){\n        var room = response.data.room\n        // console.log(room);\n        if(response[\"code\"] == Protocol.Response.Login.OK){\n            var isDevData = response[\"data\"][\"isDev\"];\n            if (isDevData && typeof(isDevData) == \"number\"){\n            }else{\n                isDevData = 0\n            }\n            for(var i=0;i<room.length;i++){\n                if(room[i].rooms){\n                    for(var j=0;j<room[i].rooms.length;j++){\n                        room[i].rooms[j].modelId = room[i].modelId;\n                    }\n                }\n            }\n            config.playGameId = response[\"data\"].playGameId;\n            config.playGameMsg = response[\"data\"].playGameMsg;\n\n            // console.log(\">>>>>>>>>>>>>>>\",response[\"data\"].today_first_login)\n            config.firstLogin = response[\"data\"].today_first_login;\n\n            PlayerDetailModel.nickname = response[\"data\"][\"nick\"];\n            PlayerDetailModel.uid = parseInt(response[\"data\"][\"uid\"]);\n            PlayerDetailModel.coin = parseInt(response[\"data\"][\"coins\"]);\n            PlayerDetailModel.gold = parseInt(response[\"data\"][\"gold\"]);\n            PlayerDetailModel.gender = parseInt(response[\"data\"][\"sex\"]);\n            PlayerDetailModel.word = response[\"data\"][\"word\"];\n            PlayerDetailModel.coolnum = response[\"data\"][\"cool_num\"];\n            PlayerDetailModel.level = parseInt(response[\"data\"][\"level\"]);\n            PlayerDetailModel.matches = parseInt(response[\"data\"][\"gameData\"][\"matches\"]);\n            PlayerDetailModel.win = parseInt(response[\"data\"][\"gameData\"][\"win\"]);\n            PlayerDetailModel.checkCode = response[\"data\"][\"check_code\"];\n            PlayerDetailModel.propDress = response[\"data\"][\"propDress\"];\n            PlayerDetailModel.score = parseInt(response[\"data\"][\"score\"]);\n\n            PlayerDetailModel.verfile = parseInt(response[\"data\"][\"verfile\"]);\n            PlayerDetailModel.vertips = parseInt(response[\"data\"][\"vertips\"]);\n            PlayerDetailModel.mailUnread = parseInt(response[\"data\"][\"mail_unread\"]);\n\n            PlayerDetailModel.taskUnReward = parseInt(response[\"data\"][\"weichatgame_task_unaward\"]);\n            PlayerDetailModel.shareUnReward = parseInt(response[\"data\"][\"weichatgame_invite_unaward\"]);\n\n            PlayerDetailModel.coupon = parseInt(response[\"data\"][\"coupon\"]);\n            PlayerDetailModel.age = parseInt(response[\"data\"][\"age\"]);\n            PlayerDetailModel.room = room;\n            PlayerDetailModel.contact = response[\"data\"][\"contact\"];\n            PlayerDetailModel.contacts = response[\"data\"][\"contacts\"];\n            PlayerDetailModel.wechat = response[\"data\"][\"wechat\"];\n\n            PlayerDetailModel.lottery = parseInt(response[\"data\"][\"lottery\"]);\n            PlayerDetailModel.checkinUndo = parseInt(response[\"data\"][\"checkin_undo\"]);\n            PlayerDetailModel.task1Unaward = parseInt(response[\"data\"][\"task1_unaward\"]);\n            PlayerDetailModel.task2Unaward = parseInt(response[\"data\"][\"task2_unaward\"]);\n            PlayerDetailModel.chargeRate = parseInt(response[\"data\"][\"charge_rate\"]);\n            PlayerDetailModel.propItems = response[\"data\"][\"propItems\"];\n\n            PlayerDetailModel.rewardList = response[\"data\"][\"n_reward_list\"];\n\n            PlayerDetailModel.wechatImg = response[\"data\"][\"img\"];\n            PlayerDetailModel.title = response[\"data\"][\"title\"];\n            PlayerDetailModel.isDev = isDevData;\n\n            // if(response[\"data\"][\"continueRoomId\"])\n            PlayerDetailModel.continueRoomId = response[\"data\"][\"continueRoomId\"];\n\n            console.log(response[\"data\"]);\n\n            //看广告cd\n            config.adCdTime = response[\"data\"][\"watch_advertisement_cd\"];\n            config.showAd = response[\"data\"][\"watch_advertisement_open\"];\n            config.canSeeVideoAd = response[\"data\"][\"weichatgame_can_watch_advertisement\"];\n            console.log(\"config.canSeeVideoAd:\",config.canSeeVideoAd);\n\n\n            // console.log(\"-----config.showAd:\",config.showAd);\n            config.TrialShareShow = response[\"data\"][\"weichatgame_trial_share_show\"];\n            // console.log(\"-----config.TrialShareShow:\",config.TrialShareShow);\n\n            console.log(\"进入游戏大厅...uid:\"+parseInt(response[\"data\"][\"uid\"]));\n            this.labLoading.string = \"进入游戏大厅...\";\n            // this.preloadNextScene();\n            this.downloadFile();\n        }else{\n            // console.log(\"登陆游戏失败！\");\n            this.labLoading.string = \"登陆游戏失败！\";\n            dialogManager.showCommonDialog(\"提示\",\"登陆游戏失败！\",function(){\n                cc.director.loadScene(\"LoadingScene\");\n            });\n        }\n    },\n     //\n     preloadNextScene(){\n        cc.director.preloadScene(\"HallScene\", function () {\n            // cc.log(\"Next scene preloaded\");\n            cc.director.loadScene(\"HallScene\");\n        });\n    },\n    //下载资源包\n    downloadFile(){\n        var self = this;\n        if(typeof(wx)==\"undefined\"){\n            self.preloadNextScene();\n        }else{\n\n            var fileManager = wx.getFileSystemManager();\n            var soundspath = wx.env.USER_DATA_PATH+\"/ddz_res/1.0.6\";\n            console.log(\"soundspath:\"+soundspath);\n            fileManager.access({\n                path:soundspath,\n                success(res){\n                    console.log(\"目录存在!!!\",res);\n                    self.preloadNextScene();\n                },\n                fail(res){\n                    console.log(\"目录不存在!!!\",res);\n                    var downloadTask = wx.downloadFile({\n                        url: 'https://sg.youjoy.tv/ddzwechatgame/resources/ddz_res_106.zip',\n                        success: function(res) {\n                            console.log(\"资源下载成功\");\n                            var filePath = res.tempFilePath;\n                            fileManager.unzip({\n                                zipFilePath:filePath,\n                                targetPath:wx.env.USER_DATA_PATH,\n                                success(res){\n                                    console.log(\"解压成功!!!\",res)\n                                    self.preloadNextScene();\n                                },\n                                fail(res){\n                                    console.log(\"解压失败!!!\",res)\n                                } \n                            });\n                        },\n                        fail(res){\n                            console.log(\"资源下载失败\",res);\n                        } \n                    });\n                    downloadTask.onProgressUpdate((res) => {\n                        self.progress.string = res.progress+\"%\";\n                        self.labLoading.string = \"资源更新中...\";\n                        // console.log('下载进度', res.progress);\n                        // console.log('已经下载的数据长度', res.totalBytesWritten);\n                        // console.log('预期需要下载的数据总长度', res.totalBytesExpectedToWrite);\n                    })\n                            \n                } \n            });  \n        }\n    }\n\n\n});\n"]}