{"version":3,"sources":["../../../../../assets/Script/gameNetwork/assets/Script/gameNetwork/GameNet.js"],"names":["config","require","EventHelper","Protocol","Events","GameNet","cc","Class","extends","Component","statics","ip","sio","isPinging","fnDisconnect","handlers","addHandler","event","fn","connect","port","callback","self","WebSocket","binaryType","onopen","evt","console","log","onmessage","cmd","strdata","data","JSON","parse","receivedMsg","onclose","onerror","send","params","info","stringify","close","code","Command","Game","Response","ReconnectionData","DispatchCustomEvent","MyNode","stopOnMassage","HeartBeat","Alive","Login","Regist","OK","System","RepeatLogin","RefreshDataResult","MailResult","ReadMailResult","GetMailAttachmentResult","DelMailResult","TaskDailyResult","GetTaskRewardResult","ShareInfoResult","ShareGetResult","ShareWxResResult","WatchAdvertisementResult","BagInfoResult","NoLogin","handleLoginRoomResult","InitOk","CoinsNoMatchRoom","Queued","GameReady","TableTimesUpdate","SendCard","RefreshPlayerData","TurnCallLord","CallLord","TurnGrabLord","GrabLord","CallLordOver","CanDoubleResult","TurnSendCard","PlayerDelegated","PlayerCancelDelegate","PlayerSendCard","PlayerNotSend","PlayerShowCard","GameComplete","TableUserExit","InvalidCardNum","SayToTableInfo","OpenRechargeTipResult","PokerTask","EmoticonData","SendLzCard","InvalidCardType","response","succ","coinsNoMatchRoom","inGaming","msg","newRoomId","RoomId","name","Network","LoginRoomResult","ok","payload","noCoin"],"mappings":";;;;;;AAEA;AACA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,cAAcD,QAAQ,aAAR,CAAlB;AACA,IAAIE,WAAWF,QAAQ,UAAR,CAAf;AACA,IAAIG,SAASH,QAAQ,QAAR,CAAb;;AAEA,IAAII,UAAUC,GAAGC,KAAH,CAAS;AACnBC,aAASF,GAAGG,SADO;AAEnBC,aAAS;AACLC,YAAG,EADE;AAELC,aAAI,IAFC;AAGLC,mBAAU,KAHL;AAILC,sBAAa,IAJR;AAKLC,kBAAS,EALJ;AAMLC,oBAAW,oBAASC,KAAT,EAAeC,EAAf,EAAkB,CAC5B,CAPI;AAQLC,iBAAQ,iBAASR,EAAT,EAAYS,IAAZ,EAAiBC,QAAjB,EAA0B;AAC9B,gBAAIC,OAAO,IAAX;AACAA,iBAAKD,QAAL,GAAgBA,QAAhB;AACA,iBAAKV,EAAL,GAAUA,KAAK,GAAL,GAAWS,IAArB;AACA,iBAAKR,GAAL,GAAW,IAAIW,SAAJ,CAAc,WAAS,KAAKZ,EAA5B,CAAX;AACA;AACA;AACA;;AAEA,iBAAKC,GAAL,CAASY,UAAT,GAAsB,aAAtB;AACA,iBAAKZ,GAAL,CAASa,MAAT,GAAkB,UAASC,GAAT,EAAc;AAC5BC,wBAAQC,GAAR,CAAY,kBAAZ;AACAN,qBAAKT,SAAL,GAAiB,IAAjB;AACAS,qBAAKD,QAAL;AACH,aAJD;AAKA,iBAAKT,GAAL,CAASiB,SAAT,GAAqB,UAASH,GAAT,EAAc;AAC/B;AACA;AACA,oBAAII,MAAM,CAAC,CAAX,CAH+B,CAGlB;AACb,oBAAIC,UAAUL,IAAIM,IAAlB;AACA,oBAAIA,OAAOC,KAAKC,KAAL,CAAWH,OAAX,CAAX;AACAT,qBAAKa,WAAL,CAAiBH,IAAjB,EAAsBF,GAAtB;AACH,aAPD;AAQA,iBAAKlB,GAAL,CAASwB,OAAT,GAAmB,UAASV,GAAT,EAAc;AAC7BC,wBAAQC,GAAR,CAAY,oBAAZ;AACAN,qBAAKT,SAAL,GAAiB,KAAjB;AACH,aAHD;AAIA,iBAAKD,GAAL,CAASyB,OAAT,GAAmB,UAASX,GAAT,EAAc;AAC7BC,wBAAQC,GAAR,CAAY,wBAAuBF,IAAIM,IAAvC;AACAV,qBAAKT,SAAL,GAAiB,KAAjB;AACH,aAHD;AAIH,SAvCI;AAwCLyB,cAAK,cAASrB,KAAT,EAAea,GAAf,EAAmBS,MAAnB,EAA0B;AAC3B,gBAAGtB,SAAQ,WAAX,EACIU,QAAQC,GAAR,CAAY,aAAWX,KAAvB;AACJ;;AAEAsB,mBAAOT,GAAP,GAAaA,GAAb;AACA,gBAAIU,OAAOP,KAAKQ,SAAL,CAAeF,MAAf,CAAX;AACA;AACA,iBAAK3B,GAAL,CAAS0B,IAAT,CAAcE,IAAd;;AAEA;AACA;AACA;AACH,SArDI;AAsDLE,eAAM,iBAAU;AACZ,gBAAG,KAAK9B,GAAR,EACI,KAAKA,GAAL,CAAS8B,KAAT;AACP,SAzDI;AA0DLP,mBA1DK,uBA0DOH,IA1DP,EA0DYF,GA1DZ,EA0DgB;AACjB;AACA;AACAA,kBAAME,KAAKF,GAAX;AACA,gBAAGA,OAAO,CAAV,EAAY;AACRH,wBAAQC,GAAR,CAAY,YAAUE,GAAV,GAAc,QAAd,GAAuBE,KAAKW,IAAxC;AACH;;AAED,gBAAGb,OAAO3B,SAASyC,OAAT,CAAiBC,IAA3B,EAAgC;AAC5B,oBAAGb,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBE,gBAAvC,EAAwD;AACpD;AACA;AACA7C,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,kBAA9C,EAAiEjB,IAAjE;AACH;AACJ;;AAED,gBAAGhC,OAAOkD,aAAV,EAAwB;AACpB;;AAEJ,gBAAGpB,OAAO3B,SAASyC,OAAT,CAAiBO,SAA3B,EAAqC;AAAE;AACnC,oBAAGnB,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBK,SAAlB,CAA4BC,KAA5C,EAAkD;AAC9ClD,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,WAA9C,EAA0DjB,IAA1D;AACH;AACJ;;AAED,gBAAGF,OAAO3B,SAASyC,OAAT,CAAiBS,KAA3B,EAAiC;AAAC;AAC9B,oBAAGrB,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBO,KAAlB,CAAwBC,MAAxC,EAA+C;AAC3CpD,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,QAA9C,EAAuDjB,IAAvD;AACH,iBAFD,MAEM,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBO,KAAlB,CAAwBE,EAAxC,EAA2C;AAC7CrD,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,SAA9C,EAAwDjB,IAAxD;AACH;AACJ;;AAED,gBAAGF,OAAO3B,SAASyC,OAAT,CAAiBY,MAA3B,EAAkC;;AAE9B,oBAAGxB,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBU,MAAlB,CAAyBC,WAAzC,EAAqD;AACjD;AACA;AACAvD,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,aAA9C,EAA4DjB,IAA5D;AACH;;AAED,oBAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBU,MAAlB,CAAyBE,iBAAzC,EAA2D;AACvD;AACA;AACAxD,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,mBAA9C,EAAkEjB,IAAlE;AACH,iBAJD,MAIM,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBU,MAAlB,CAAyBG,UAAzC,EAAoD;AACtD;AACA;AACAzD,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,YAA9C,EAA2DjB,IAA3D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBU,MAAlB,CAAyBI,cAAzC,EAAwD;AAC1D;AACA;AACA1D,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,gBAA9C,EAA+DjB,IAA/D;AACH,iBAJK,MAKD,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBU,MAAlB,CAAyBK,uBAAzC,EAAiE;AAClE;AACA;AACA3D,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,yBAA9C,EAAwEjB,IAAxE;AACH,iBAJI,MAKA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBU,MAAlB,CAAyBM,aAAzC,EAAuD;AACxD;AACA;AACA5D,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,eAA9C,EAA8DjB,IAA9D;AACH,iBAJI,MAIC,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBU,MAAlB,CAAyBO,eAAzC,EAAyD;AAC3D;AACA;AACA7D,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,iBAA9C,EAAgEjB,IAAhE;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBU,MAAlB,CAAyBQ,mBAAzC,EAA6D;AAC/D;AACA;AACA9D,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,qBAA9C,EAAoEjB,IAApE;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBU,MAAlB,CAAyBS,eAAzC,EAAyD;AAC3D;AACA;AACA/D,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,iBAA9C,EAAgEjB,IAAhE;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBU,MAAlB,CAAyBU,cAAzC,EAAwD;AAC1D;AACA;AACAhE,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,gBAA9C,EAA+DjB,IAA/D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBU,MAAlB,CAAyBW,gBAAzC,EAA0D;AAC5D;AACA;AACA;AACAjE,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,kBAA9C,EAAiEjB,IAAjE;AACH,iBALK,MAKA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBU,MAAlB,CAAyBY,wBAAzC,EAAkE;AACpE;AACA;AACA;AACAlE,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,0BAA9C,EAAyEjB,IAAzE;AACH,iBALK,MAKA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBU,MAAlB,CAAyBa,aAAzC,EAAuD;AACzD;AACA;AACA;AACAnE,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,eAA9C,EAA8DjB,IAA9D;AACH;AACJ;;AAED,gBAAGF,OAAO3B,SAASyC,OAAT,CAAiBC,IAA3B,EAAgC;AAC5BlB,wBAAQC,GAAR,CAAYI,IAAZ;AACA,oBAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuByB,OAAvC,EAA+C;AAC3C,yBAAKC,qBAAL,CAA2BvC,IAA3B,EAAgCA,KAAKW,IAArC;AACH,iBAFD,MAEM,IAAGX,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuB2B,MAAvC,EAA8C;AAChD,yBAAKD,qBAAL,CAA2BvC,IAA3B,EAAgCA,KAAKW,IAArC;AACH,iBAFK,MAEA,IAAGX,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuB4B,gBAAvC,EAAwD;AAC1D,yBAAKF,qBAAL,CAA2BvC,IAA3B,EAAgCA,KAAKW,IAArC;AACH,iBAFK,MAEA,IAAGX,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuB6B,MAAvC,EAA8C;AAChD;AACA;AACAxE,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,QAA9C,EAAuDjB,IAAvD;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuB8B,SAAvC,EAAiD;AACnD;AACA;AACAzE,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,WAA9C,EAA0DjB,IAA1D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuB+B,gBAAvC,EAAwD;AAC1D;AACA;AACA1E,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,kBAA9C,EAAiEjB,IAAjE;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBgC,QAAvC,EAAgD;AAClD;AACA;AACA3E,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,UAA9C,EAAyDjB,IAAzD;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBiC,iBAAvC,EAAyD;AAC3D;AACA;AACA5E,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,mBAA9C,EAAkEjB,IAAlE;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBkC,YAAvC,EAAoD;AACtD;AACA;AACA7E,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,cAA9C,EAA6DjB,IAA7D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBmC,QAAvC,EAAgD;AAClD;AACA;AACA9E,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,UAA9C,EAAyDjB,IAAzD;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBoC,YAAvC,EAAoD;AACtD;AACA;AACA/E,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,cAA9C,EAA6DjB,IAA7D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBqC,QAAvC,EAAgD;AAClD;AACA;AACAhF,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,UAA9C,EAAyDjB,IAAzD;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBsC,YAAvC,EAAoD;AACtD;AACA;AACAjF,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,cAA9C,EAA6DjB,IAA7D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBuC,eAAvC,EAAuD;AACzD;AACA;AACAlF,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,iBAA9C,EAAgEjB,IAAhE;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBwC,YAAvC,EAAoD;AACtD;AACA;AACAnF,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,cAA9C,EAA6DjB,IAA7D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuByC,eAAvC,EAAuD;AACzD;AACA;AACApF,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,iBAA9C,EAAgEjB,IAAhE;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuB0C,oBAAvC,EAA4D;AAC9D;AACA;AACArF,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,sBAA9C,EAAqEjB,IAArE;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuB2C,cAAvC,EAAsD;AACxD;AACA;AACAtF,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,gBAA9C,EAA+DjB,IAA/D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuB4C,aAAvC,EAAqD;AACvD;AACA;AACAvF,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,eAA9C,EAA8DjB,IAA9D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuB6C,cAAvC,EAAsD;AACxD;AACA;AACAxF,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,gBAA9C,EAA+DjB,IAA/D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuB8C,YAAvC,EAAoD;AACtD;AACA;AACAzF,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,cAA9C,EAA6DjB,IAA7D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuB+C,aAAvC,EAAqD;AACvD;AACA;AACA1F,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,eAA9C,EAA8DjB,IAA9D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBgD,cAAvC,EAAsD;AACxD;AACA;AACA3F,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,gBAA9C,EAA+DjB,IAA/D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBiD,cAAvC,EAAsD;AACxD;AACA;AACA5F,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,gBAA9C,EAA+DjB,IAA/D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBkD,qBAAvC,EAA6D;AAC/D;AACA;AACA7F,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,uBAA9C,EAAsEjB,IAAtE;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBmD,SAAvC,EAAiD;AACnD;AACA;AACA9F,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,WAA9C,EAA0DjB,IAA1D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBoD,YAAvC,EAAoD;AACtD;AACA;AACA/F,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,cAA9C,EAA6DjB,IAA7D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBqD,UAAvC,EAAkD;AACpD;AACA;AACAhG,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,YAA9C,EAA2DjB,IAA3D;AACH,iBAJK,MAIA,IAAGA,KAAKW,IAAL,IAAaxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuBsD,eAAvC,EAAuD;AACzD;AACA;AACAjG,gCAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C,iBAA9C,EAAgEjB,IAAhE;AACH;AACJ;AACJ,SA7QI;AA8QLuC,6BA9QK,iCA8QiB6B,QA9QjB,EA8Q2BzD,IA9Q3B,EA8QgC;AACjC,gBAAI0D,OAAO,IAAX;AACA,gBAAIC,mBAAmB,KAAvB;AACA,gBAAIC,WAAW,KAAf;AACA,gBAAIC,MAAM,IAAV;AACA,gBAAIC,YAAY,IAAhB;;AAEA,gBAAI9D,QAAQxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuByB,OAAnC,EAA2C;AACvC+B,uBAAO,KAAP;AACA1E,wBAAQC,GAAR,CAAY,KAAZ;AACA;AACH,aAJD,MAIM,IAAIe,QAAQxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuB2B,MAAnC,EAA0C;AAC5C7C,wBAAQC,GAAR,CAAY,QAAZ;AACA,oBAAIwE,SAAS,MAAT,EAAiB,UAAjB,KAAgC,CAApC,EAAsC;AAClC;AACAG,+BAAW,IAAX;AACAF,2BAAO,KAAP;AACArG,2BAAO0G,MAAP,GAAgBN,SAAS,MAAT,EAAiB,QAAjB,CAAhB;AACH;AACJ,aARK,MAQA,IAAIzD,QAAQxC,SAAS2C,QAAT,CAAkBD,IAAlB,CAAuB4B,gBAAnC,EAAoD;AACtD9C,wBAAQC,GAAR,CAAY,QAAZ;AACAyE,uBAAO,KAAP;AACAC,mCAAmB,IAAnB;AACAE,sBAAMJ,SAAS,MAAT,EAAiB,KAAjB,CAAN;AACAK,4BAAYL,SAAS,MAAT,EAAiB,WAAjB,CAAZ;AACH;;AAED,gBAAI7D,SAAS,EAAb;AACAA,mBAAOoE,IAAP,GAAcvG,OAAOwG,OAAP,CAAeC,eAA7B;AACAtE,mBAAOuE,EAAP,GAAYT,IAAZ;AACA9D,mBAAOwE,OAAP,GAAiBX,QAAjB;AACA7D,mBAAOyE,MAAP,GAAgBV,gBAAhB;AACA/D,mBAAOgE,QAAP,GAAkBA,QAAlB;AACAhE,mBAAOiE,GAAP,GAAaA,GAAb;AACAjE,mBAAOkE,SAAP,GAAmBA,SAAnB;AACAvG,wBAAY8C,mBAAZ,CAAgChD,OAAOiD,MAAvC,EAA8C7C,OAAOwG,OAAP,CAAeC,eAA7D,EAA6EtE,MAA7E;AACH;AAlTI;AAFU,CAAT,CAAd","file":"GameNet.js","sourceRoot":"../../../../../assets/Script/gameNetwork","sourcesContent":["\n\n// var ByteArray = require(\"ByteArray\");\nvar config = require(\"config\");\nvar EventHelper = require(\"EventHelper\");\nvar Protocol = require(\"Protocol\");\nvar Events = require(\"Events\");\n\nvar GameNet = cc.Class({\n    extends: cc.Component,\n    statics: {\n        ip:\"\",\n        sio:null,\n        isPinging:false,\n        fnDisconnect:null,\n        handlers:{},\n        addHandler:function(event,fn){ \n        },\n        connect:function(ip,port,callback){\n            var self = this;\n            self.callback = callback;\n            this.ip = ip + \":\" + port;\n            this.sio = new WebSocket(\"wss://\"+this.ip);\n            //xx_test\n            // this.ip = \"180.150.178.112:9300\";\n            // this.sio = new WebSocket(\"ws://\"+this.ip);\n\n            this.sio.binaryType = \"arraybuffer\";\n            this.sio.onopen = function(evt) { \n                console.log(\"Connection open \");\n                self.isPinging = true\n                self.callback();\n            };\n            this.sio.onmessage = function(evt) {\n                // console.log(evt.data);\n                // console.log(\"length:\"+evt.data.length)\n                var cmd = -1;//第八位是大协议号\n                var strdata = evt.data;\n                var data = JSON.parse(strdata);\n                self.receivedMsg(data,cmd);\n            };\n            this.sio.onclose = function(evt) {\n                console.log(\"Connection closed.\");\n                self.isPinging = false;\n            }; \n            this.sio.onerror = function(evt) {\n                console.log(\"Connection onerror.\"+ evt.data);\n                self.isPinging = false;\n            }; \n        },\n        send:function(event,cmd,params){\n            if(event !=\"HeartBeat\")\n                console.log(\"<- send:\"+event);\n            // console.log(params);\n            \n            params.cmd = cmd;\n            var info = JSON.stringify(params);\n            // console.log(params);\n            this.sio.send(info);\n\n            // var view = ByteArray.getView(params,cmd);\n            // if(this.sio)\n            //     this.sio.send(view);\n        },\n        close:function(){\n            if(this.sio)\n                this.sio.close();\n        },\n        receivedMsg(data,cmd){\n            // console.log(typeof(data));\n            // console.log(data);\n            cmd = data.cmd;\n            if(cmd != 0){\n                console.log(\"-> cmd:\"+cmd+\" code:\"+data.code);\n            }\n            \n            if(cmd == Protocol.Command.Game){\n                if(data.code == Protocol.Response.Game.ReconnectionData){\n                    //短线重连\n                    // console.log(\"短线重连\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"ReconnectionData\",data);\n                }\n            }\n\n            if(config.stopOnMassage)//暂停协议处理\n                return;\n\n            if(cmd == Protocol.Command.HeartBeat){ //心跳\n                if(data.code == Protocol.Response.HeartBeat.Alive){\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"HeartBeat\",data);\n                }\n            }\n\n            if(cmd == Protocol.Command.Login){//登陆\n                if(data.code == Protocol.Response.Login.Regist){\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"Regist\",data);\n                }else if(data.code == Protocol.Response.Login.OK){\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"LoginOK\",data);\n                }\n            }\n\n            if(cmd == Protocol.Command.System){\n    \n                if(data.code == Protocol.Response.System.RepeatLogin){\n                    //通知用户连接被另外一个连接踢掉\n                    // console.log(\"通知用户连接被另外一个连接踢掉\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"RepeatLogin\",data);\n                }\n\n                if(data.code == Protocol.Response.System.RefreshDataResult){\n                    //刷新用户信息数据\n                    // console.log(\"刷新用户信息数据\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"RefreshDataResult\",data);\n                }else if(data.code == Protocol.Response.System.MailResult){\n                    //邮箱数据\n                    // console.log(\"邮箱数据\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"MailResult\",data);\n                }else if(data.code == Protocol.Response.System.ReadMailResult){\n                    //标记邮件已读结果\n                    // console.log(\"标记邮件已读结果\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"ReadMailResult\",data);\n                }\n                else if(data.code == Protocol.Response.System.GetMailAttachmentResult){\n                    //领取邮件附件结果\n                    // console.log(\"领取邮件附件结果\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"GetMailAttachmentResult\",data);\n                }\n                else if(data.code == Protocol.Response.System.DelMailResult){\n                    //删除某个邮件结果\n                    // console.log(\"删除某个邮件结果\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"DelMailResult\",data);\n                }else if(data.code == Protocol.Response.System.TaskDailyResult){\n                    //打开每日任务面板\n                    // console.log(\"打开每日任务面板\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"TaskDailyResult\",data);\n                }else if(data.code == Protocol.Response.System.GetTaskRewardResult){\n                    //领取任务奖励\n                    // console.log(\"领取任务奖励\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"GetTaskRewardResult\",data);\n                }else if(data.code == Protocol.Response.System.ShareInfoResult){\n                    //分享信息结果\n                    // console.log(\"分享信息结果\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"ShareInfoResult\",data);\n                }else if(data.code == Protocol.Response.System.ShareGetResult){\n                    //分享领取结果\n                    // console.log(\"分享领取结果\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"ShareGetResult\",data);\n                }else if(data.code == Protocol.Response.System.ShareWxResResult){\n                    //微信分享成功发送结果\n                    // console.log(\"微信分享成功发送结果\");\n                    // console.log(data);\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"ShareWxResResult\",data);\n                }else if(data.code == Protocol.Response.System.WatchAdvertisementResult){\n                    //看完广告领奖\n                    // console.log(\"看完广告领奖\");\n                    // console.log(data);\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"WatchAdvertisementResult\",data);\n                }else if(data.code == Protocol.Response.System.BagInfoResult){\n                    //背包信息\n                    // console.log(\"背包信息\");\n                    // console.log(data);\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"BagInfoResult\",data);\n                }\n            }\n\n            if(cmd == Protocol.Command.Game){\n                console.log(data);\n                if(data.code == Protocol.Response.Game.NoLogin){\n                    this.handleLoginRoomResult(data,data.code);\n                }else if(data.code == Protocol.Response.Game.InitOk){\n                    this.handleLoginRoomResult(data,data.code);\n                }else if(data.code == Protocol.Response.Game.CoinsNoMatchRoom){\n                    this.handleLoginRoomResult(data,data.code);\n                }else if(data.code == Protocol.Response.Game.Queued){\n                    //进入队列\n                    // console.log(\"进入队列\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"Queued\",data);\n                }else if(data.code == Protocol.Response.Game.GameReady){\n                    //游戏准备好了\n                    // console.log(\"游戏准备好了\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"GameReady\",data);\n                }else if(data.code == Protocol.Response.Game.TableTimesUpdate){\n                    //桌子的倍数发生改变\n                    // console.log(\"桌子的倍数发生改变\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"TableTimesUpdate\",data);\n                }else if(data.code == Protocol.Response.Game.SendCard){\n                    //发牌, 包括各用户的牌信息\n                    // console.log(\"发牌, 包括各用户的牌信息\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"SendCard\",data);\n                }else if(data.code == Protocol.Response.Game.RefreshPlayerData){\n                    //刷新用户金币(用户桌面)\n                    // console.log(\"刷新用户金币\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"RefreshPlayerData\",data);\n                }else if(data.code == Protocol.Response.Game.TurnCallLord){\n                    //轮到谁叫地主\n                    // console.log(\"轮到谁叫地主\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"TurnCallLord\",data);\n                }else if(data.code == Protocol.Response.Game.CallLord){\n                    //玩家叫地主\n                    // console.log(\"玩家叫地主\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"CallLord\",data);\n                }else if(data.code == Protocol.Response.Game.TurnGrabLord){\n                    //轮到谁抢地主\n                    // console.log(\"轮到谁抢地主\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"TurnGrabLord\",data);\n                }else if(data.code == Protocol.Response.Game.GrabLord){\n                    //玩家抢地主\n                    // console.log(\"玩家抢地主\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"GrabLord\",data);\n                }else if(data.code == Protocol.Response.Game.CallLordOver){\n                    //叫地主结束\n                    // console.log(\"叫地主结束\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"CallLordOver\",data);\n                }else if(data.code == Protocol.Response.Game.CanDoubleResult){\n                    //通知是否可以加倍\n                    // console.log(\"通知是否可以加倍\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"CanDoubleResult\",data);\n                }else if(data.code == Protocol.Response.Game.TurnSendCard){\n                    //轮到谁出牌\n                    // console.log(\"轮到谁出牌\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"TurnSendCard\",data);\n                }else if(data.code == Protocol.Response.Game.PlayerDelegated){\n                    //用户托管\n                    // console.log(\"用户托管\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"PlayerDelegated\",data);\n                }else if(data.code == Protocol.Response.Game.PlayerCancelDelegate){\n                    //用户取消托管\n                    // console.log(\"用户取消托管\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"PlayerCancelDelegate\",data);\n                }else if(data.code == Protocol.Response.Game.PlayerSendCard){\n                    //用户出牌\n                    // console.log(\"用户出牌\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"PlayerSendCard\",data);\n                }else if(data.code == Protocol.Response.Game.PlayerNotSend){\n                    //用户不出牌\n                    // console.log(\"用户不出牌\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"PlayerNotSend\",data);\n                }else if(data.code == Protocol.Response.Game.PlayerShowCard){\n                    //用户明牌\n                    // console.log(\"用户明牌\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"PlayerShowCard\",data);\n                }else if(data.code == Protocol.Response.Game.GameComplete){\n                    //本局结束\n                    // console.log(\"本局结束\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"GameComplete\",data);\n                }else if(data.code == Protocol.Response.Game.TableUserExit){\n                    //有用户退出 通知桌上的玩家重新进入队列\n                    // console.log(\"有用户退出 通知桌上的玩家重新进入队列\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"TableUserExit\",data);\n                }else if(data.code == Protocol.Response.Game.InvalidCardNum){\n                    //出的牌不够大 [非法出牌]\n                    // console.log(\"出的牌不够大 [非法出牌]\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"InvalidCardNum\",data);\n                }else if(data.code == Protocol.Response.Game.SayToTableInfo){\n                    //聊天信息\n                    // console.log(\"聊天信息\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"SayToTableInfo\",data);\n                }else if(data.code == Protocol.Response.Game.OpenRechargeTipResult){\n                    //打开救济面板\n                    // console.log(\"打开救济面板\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"OpenRechargeTipResult\",data);\n                }else if(data.code == Protocol.Response.Game.PokerTask){\n                    //触发牌局任务\n                    // console.log(\"触发牌局任务\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"PokerTask\",data);\n                }else if(data.code == Protocol.Response.Game.EmoticonData){\n                    //广播表情包\n                    // console.log(\"广播表情包\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"EmoticonData\",data);\n                }else if(data.code == Protocol.Response.Game.SendLzCard){\n                    //发送癞子牌\n                    // console.log(\"发送癞子牌\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"SendLzCard\",data);\n                }else if(data.code == Protocol.Response.Game.InvalidCardType){\n                    //出牌有非法数据 [非法出牌]\n                    // console.log(\"出牌有非法数据 [非法出牌]\");\n                    EventHelper.DispatchCustomEvent(config.MyNode,\"InvalidCardType\",data);\n                }\n            }\n        },\n        handleLoginRoomResult(response, code){\n            var succ = true;\n            var coinsNoMatchRoom = false;\n            var inGaming = false;\n            var msg = null;\n            var newRoomId = null;\n\n            if (code == Protocol.Response.Game.NoLogin){\n                succ = false;\n                console.log(\"未登录\");\n                return;\n            }else if (code == Protocol.Response.Game.InitOk){\n                console.log(\"进入房间成功\");\n                if (response[\"data\"][\"isGaming\"] == 1){\n                    // console.log(\"进入未完成牌局\");\n                    inGaming = true;\n                    succ = false;\n                    config.RoomId = response[\"data\"][\"roomId\"];\n                }\n            }else if (code == Protocol.Response.Game.CoinsNoMatchRoom){\n                console.log(\"进入房间失败\");\n                succ = false;\n                coinsNoMatchRoom = true;\n                msg = response[\"data\"][\"msg\"];\n                newRoomId = response[\"data\"][\"newRoomId\"];\n            }\n\n            var params = {};\n            params.name = Events.Network.LoginRoomResult;\n            params.ok = succ;\n            params.payload = response;\n            params.noCoin = coinsNoMatchRoom;\n            params.inGaming = inGaming;\n            params.msg = msg;\n            params.newRoomId = newRoomId;\n            EventHelper.DispatchCustomEvent(config.MyNode,Events.Network.LoginRoomResult,params);\n        }\n    },\n});"]}