{"version":3,"sources":["../../../../assets/Script/assets/Script/opratCallLordControl.js"],"names":["config","require","cc","Class","extends","Component","properties","timeTxt","default","type","Label","btnNode1","Node","btnNode2","btnSp1","Sprite","btnSp2","clock","timeCount","start","clockX","getPositionX","clockY","getPositionY","schedule","shakeClock","pre","node","destroy","t","Math","ceil","string","show","time","btn1Func","btn2Func","self","opratType","callLoad","grabLoad","loader","loadRes","SpriteFrame","err","spriteFrame","getComponent","mustOutCard","x","active","close","btn1Click","console","log","btn2Click","mt1","moveTo","mt2","mt3","mt4","mt5","mt6","mt7","runAction","sequence"],"mappings":"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","file":"opratCallLordControl.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\nvar config = require(\"config\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        timeTxt : {\n            default : null,\n            type : cc.Label\n        },\n        btnNode1 : {\n            default : null,\n            type : cc.Node\n        },\n        btnNode2 : {\n            default : null,\n            type : cc.Node\n        },\n        btnSp1 : {\n            default : null,\n            type : cc.Sprite\n        },\n        btnSp2 : {\n            default : null,\n            type : cc.Sprite\n        },\n        clock : {\n            default : null,\n            type : cc.Node,\n        },\n        timeCount:30,\n    },\n\n    start () {\n        this.clockX = this.clock.getPositionX();\n        this.clockY = this.clock.getPositionY();\n\n        this.schedule(function() {\n            if(this.timeCount > 0){\n                this.timeCount -= 1;\n                if(this.timeCount <= 5){\n                    // cc.vv.audioMgr.playSFX(\"timeup_alarm.mp3\");\n                    this.shakeClock();\n                }\n                var pre = \"\";\n                if(this.timeCount <= 0){\n                    this.timeCount = 0;\n                    this.node.destroy();\n                }\n                var t = Math.ceil(this.timeCount);\n                if(t < 10){\n                    pre = \"\";\n                }\n                this.timeTxt.string = pre + t; \n            }   \n        }, 1);\n\n        //xx_test\n        // this.show(10,null,null,2);\n    },\n    show(time,btn1Func,btn2Func,type){\n        this.timeCount = time;\n        this.btn1Func = btn1Func;\n        this.btn2Func = btn2Func;\n\n        var self = this;\n\n        this.type = type;\n\n        var pre = \"\";\n        if(time < 10){\n            pre = \"\";\n        }\n        this.timeTxt.string = pre + time;\n\n        // this.btnSp1\n        if(type == config.opratType.callLoad){\n            // this.btnTxt1.string = \"叫地主\";\n            // this.btnTxt2.string = \"不叫\";\n        }else if(type == config.opratType.grabLoad){\n            // this.btnTxt1.string = \"抢地主\";\n            // this.btnTxt2.string = \"不抢\";\n            cc.loader.loadRes(\"operation_btn/p_qiangyes\",cc.SpriteFrame,function(err,spriteFrame){\n                self.btnSp1.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n            cc.loader.loadRes(\"operation_btn/p_qiangno\",cc.SpriteFrame,function(err,spriteFrame){\n                self.btnSp2.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n        }else if(type == config.opratType.mustOutCard){\n            this.btnNode1.x = 0;\n            this.btnNode1.active = false;\n            // this.btnTxt2.string = \"出牌\";\n            cc.loader.loadRes(\"operation_btn/p_cardout\",cc.SpriteFrame,function(err,spriteFrame){\n                self.btnSp2.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n        }\n    },\n    close(){\n        if(this.node){\n            this.node.destroy();\n        }\n    },\n    btn1Click() {\n        console.log(\"btn1Click\");\n        if(this.btn1Func){\n            this.btn1Func();\n        }\n        this.node.destroy();\n    },\n    btn2Click() {\n        console.log(\"btn2Click\");\n        if(this.btn2Func){\n            this.btn2Func();\n        }\n        if(this.type == config.opratType.mustOutCard){\n        }else{\n            this.node.destroy();\n        }\n    },\n    shakeClock(){\n        var mt1 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt2 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt3 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt4 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt5 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt6 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt7 = cc.moveTo(0.05,this.clockX,this.clockY);\n        this.clock.runAction(cc.sequence(mt1,mt2,mt3,mt4,mt5,mt6,mt7));\n    }\n});\n"]}