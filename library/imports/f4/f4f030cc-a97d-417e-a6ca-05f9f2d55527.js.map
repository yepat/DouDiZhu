{"version":3,"sources":["../../../../../assets/Script/dialog/assets/Script/dialog/BagControl.js"],"names":["BagItemControl","require","GameNetMgr","EventHelper","config","dialogManager","PlayerDetailModel","cc","Class","extends","Component","properties","btnLeft_1","default","type","Sprite","btnLeft_2","btnRight_1","btnRight_2","content","Node","propItem","Prefab","lab_tips","Label","onLoad","string","start","self","sendRequest","AddCustomEvent","MyNode","onBagInfoResult","event","response","getUserData","console","log","show","data","list","item","propName","propNum","coupon","push","noteCards","i","length","instantiate","parent","prop","getComponent","closeClick","RemoveCustomEvent","node","destroy","vv","audioMgr","playSFX","leftClick","enabled","rightClick"],"mappings":"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","file":"BagControl.js","sourceRoot":"../../../../../assets/Script/dialog","sourcesContent":["var BagItemControl = require(\"BagItemControl\");\nvar GameNetMgr = require(\"GameNetMgr\");\nvar EventHelper = require(\"EventHelper\");\nvar config = require(\"config\");\nvar dialogManager = require(\"dialogManager\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        btnLeft_1 : {\n            default : null,\n            type : cc.Sprite\n        },\n        btnLeft_2 : {\n            default : null,\n            type : cc.Sprite\n        },\n        btnRight_1 : {\n            default : null,\n            type : cc.Sprite\n        },\n        btnRight_2 : {\n            default : null,\n            type : cc.Sprite\n        },\n        content : {\n            default : null,\n            type : cc.Node\n        },\n        propItem : {\n            default : null,\n            type : cc.Prefab\n        },\n        lab_tips : {\n            default : null,\n            type : cc.Label\n        },\n    },\n    onLoad () {\n        this.lab_tips.string = \"空空如也\";\n    },\n    start () {\n        // this.btnRight_1.enabled = false;\n        var self = this;\n        GameNetMgr.sendRequest(\"System\", \"BagInfo\");\n        EventHelper.AddCustomEvent(config.MyNode,\"BagInfoResult\",self.onBagInfoResult,self);\n        // this.show();\n    },  \n    onBagInfoResult(event){\n        var response = event.getUserData();\n        console.log(\"背包：\",response)\n        this.show(response.data);\n    },\n    show(data){\n        // var coupon = PlayerDetailModel.getCoupon();\n        // var list = [\n        //     {propName:\"lequan\",propNum:coupon},{propName:\"jipaiqi\",propNum:\"11\"},\n        // ]\n        var list = [];\n        var item = {propName:\"lequan\",propNum:data.list.coupon}\n        list.push(item);\n\n        if(data.list.noteCards){\n            var item = {propName:\"jipaiqi\",propNum:data.list.noteCards}\n            list.push(item);\n        }\n\n        for(var i = 0;i<list.length;i++){\n            var propItem = cc.instantiate(this.propItem);\n            propItem.parent = this.content;\n            var prop = propItem.getComponent(BagItemControl);\n            prop.show(list[i].propName,list[i].propNum,i);\n        }\n        if(list.length>0){\n            this.lab_tips.string = \"\";\n        }\n    },\n    closeClick(){\n        console.log(\"close click\");\n        var self = this;\n        EventHelper.RemoveCustomEvent(config.MyNode,\"BagInfoResult\",self.onBagInfoResult,self);\n        this.node.destroy();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    leftClick(){\n        console.log(\"left click\");\n        this.btnLeft_1.enabled = true;\n        this.btnRight_1.enabled = false;\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    rightClick(){\n        console.log(\"right click\");\n        this.btnLeft_1.enabled = false;\n        this.btnRight_1.enabled = true; \n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    }\n});\n"]}