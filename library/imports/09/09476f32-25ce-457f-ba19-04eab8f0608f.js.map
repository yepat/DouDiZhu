{"version":3,"sources":["../../../../assets/Script/assets/Script/RoomLayerControl.js"],"names":["config","require","EventHelper","PlayerDetailModel","cc","Class","extends","Component","properties","headImg","default","type","Sprite","playerName","Label","playerLevel","playerLedou","playerLeQuan","room1","Node","room2","room3","room4","start","self","setHeadUrl","setNickName","getNickName","setLevel","getTitle","setLeDou","getCoin","setLuQuan","getCoupon","initRoomInfo","console","log","roomInfos","i","index","name","strPeopleNum","strCoins","lab_peopleNum","find","getComponent","lab_coins","item","peopleNum","coins","push","roomType_","rooms","getRoom","k","v","modelId","ModelId","normal","length","string","pepleNumAdd","str_enter","replace","url","imgUrl","loader","load","err","texture","spriteFrame","SpriteFrame","lv","number","Math","floor","room1Click","director","loadScene","room2Click","room3Click","room4Click","quickStartClick","str","curNum","parseInt","endNum"],"mappings":"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","file":"RoomLayerControl.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\nvar config = require(\"config\");\nvar EventHelper = require(\"EventHelper\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        headImg : {\n            default : null,\n            type : cc.Sprite\n        },\n        playerName : {\n            default : null,\n            type : cc.Label\n        },\n        playerLevel : {\n            default : null,\n            type : cc.Label\n        },\n        playerLedou : {\n            default : null,\n            type : cc.Label\n        },\n        playerLeQuan : {\n            default : null,\n            type : cc.Label\n        },\n        room1 : {\n            default : null,\n            type : cc.Node\n        },\n        room2 : {\n            default : null,\n            type : cc.Node\n        },\n        room3 : {\n            default : null,\n            type : cc.Node\n        },\n        room4 : {\n            default : null,\n            type : cc.Node\n        },\n        \n    },\n    // onLoad () {},\n    start () {\n        var self = this;\n        // EventHelper.AddCustomEvent(config.MyNode,\"EnterHallOK\",function(event){\n            self.setHeadUrl(\"\");\n            self.setNickName(PlayerDetailModel.getNickName());\n            self.setLevel(PlayerDetailModel.getTitle());\n            self.setLeDou(PlayerDetailModel.getCoin());\n            self.setLuQuan(PlayerDetailModel.getCoupon());\n        // });\n\n        this.initRoomInfo();\n    },\n    initRoomInfo(){\n        console.log(\">>>initRoomInfo\");\n\n        var roomInfos = [];\n        for(var i=0;i<4;i++){\n            var index = i+1;\n            var name = \"p_room_\"+index;\n            var strPeopleNum = \"Canvas/happyroom/rooms/\"+name+\"/lab_peopleNum\";\n            var strCoins = \"Canvas/happyroom/rooms/\"+name+\"/lab_coins\";\n\n            var lab_peopleNum =  cc.find(strPeopleNum).getComponent(cc.Label);\n            var lab_coins =  cc.find(strCoins).getComponent(cc.Label);\n            var item = {\n                peopleNum:lab_peopleNum,\n                coins:lab_coins\n            }\n            roomInfos.push(item);\n        }\n\n        var roomType_ = [];\n        var rooms = PlayerDetailModel.getRoom();\n        for(var k in rooms){\n            var v = rooms[k];\n            if(v.modelId == config.ModelId.normal){\n                roomType_ =  v.rooms;\n            }\n        }\n        console.log(roomType_);\n\n        for(var i = 0;i<roomType_.length;i++){\n            roomInfos[i].peopleNum.string = \"\"+this.pepleNumAdd(roomType_[i][\"onlineNum\"]);\n            var str_enter = roomType_[i][\"enter\"].replace(\"乐豆\", \"\");\n            roomInfos[i].coins.string = str_enter;\n        }\n    },\n    setHeadUrl(url){\n        var self = this;\n         //设置微信头像\n         var imgUrl=\"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLSO7sOWsNicYdNM3MbNGGo58zticxgqoO2aqS7zOCVClXl7WExa4KNQ48uSTSszicsyspzsDQ51M4EQ/132\";\n         imgUrl = imgUrl + \"?aa=aa.jpg\";\n         cc.loader.load(imgUrl, function(err, texture){\n             self.headImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\n         });\n    },\n    setNickName(name){\n         //修改昵称\n         this.playerName.string = name;\n    },\n    setLevel(lv){\n        //修改等级\n        this.playerLevel.string = lv;\n    },\n    setLeDou(number){\n        //修改乐豆数\n        if(number >= 10000000){\n            number = Math.floor(number / 10000)\n            this.playerLedou.string = \"\"+number+\"万\";\n        }else{\n            this.playerLedou.string = \"\"+number;\n        }\n    },\n    setLuQuan(number){\n        //修改乐券数\n        if(number >= 10000000){\n            number = Math.floor(number / 10000)\n            this.playerLeQuan.string = \"\"+number+\"万\";\n        }else{\n            this.playerLeQuan.string = \"\"+number;\n        }\n    },\n    room1Click(){\n        console.log(\"room1Click\");\n        cc.director.loadScene(\"GameScene\");\n    },\n    room2Click(){\n        console.log(\"room2Click\");\n        cc.director.loadScene(\"GameScene\");\n    },\n    room3Click(){\n        console.log(\"room3Click\");\n        cc.director.loadScene(\"GameScene\");\n    },\n    room4Click(){\n        console.log(\"room4Click\");\n        cc.director.loadScene(\"GameScene\");\n    },\n    quickStartClick(){\n        console.log(\"quickStartClick\");\n        cc.director.loadScene(\"GameScene\");\n    },\n    pepleNumAdd(str){\n        var curNum = str;\n        if(typeof(str) == \"string\")\n            curNum = parseInt(str);\n        var endNum = 0\n        if (curNum <= 60){\n            endNum = curNum + 60;\n        }else if(curNum > 60 && curNum <=200){\n            endNum = curNum + 200;\n        }else if(curNum > 200 && curNum <=500){\n            endNum = curNum + 1000;\n        }else{\n            endNum = curNum + 3000;\n        }\n           \n        return endNum;\n    }\n    // update (dt) {},\n});\n"]}