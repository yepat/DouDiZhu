{"version":3,"sources":["../../../../assets/Script/assets/Script/RoomLayerControl.js"],"names":["config","require","EventHelper","PlayerDetailModel","GameNetMgr","Events","dialogManager","cc","Class","extends","Component","properties","headImg","default","type","Sprite","playerName","Label","playerLevel","playerLedou","playerLeQuan","room1","Node","room2","room3","room4","start","self","setHeadUrl","setNickName","getNickName","setLevel","getTitle","setLeDou","getCoin","setLuQuan","getCoupon","roomModelId_","curRoomModelId","initRoomInfo","AddCustomEvent","MyNode","Network","LoginRoomResult","event","console","log","data","getUserData","handleLoginRoomResult","roomInfos","i","index","name","strPeopleNum","strCoins","lab_peopleNum","find","getComponent","lab_coins","item","peopleNum","coins","push","roomType_","rooms","getRoom","k","v","modelId","length","string","pepleNumAdd","str_enter","replace","url","imgUrl","loader","load","err","texture","spriteFrame","SpriteFrame","lv","number","Math","floor","room1Click","selectedIdx_","roomMinScore","trialInfo","gotoRoom","room2Click","room3Click","room4Click","quickStartClick","onWantGotoRoom","str","curNum","parseInt","endNum","mRoomId","arg","roomId","isContinue","RoomConfig","ModelId","lazarillo","sendRequest","setCoin","payload","isGotoLazarillo_","ok","args","contest","m_sended","m_totalTimes","m_curTimes","isSend","sended","totalTimes","curTimes","director","loadScene","noCoin","showCommonDialog","inGaming","normal","model","getRoomByModel","room","enterLimit","enterLimit_"],"mappings":"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","file":"RoomLayerControl.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\nvar config = require(\"config\");\nvar EventHelper = require(\"EventHelper\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\nvar GameNetMgr = require(\"GameNetMgr\");\nvar Events = require(\"Events\");\nvar dialogManager = require(\"dialogManager\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        headImg : {\n            default : null,\n            type : cc.Sprite\n        },\n        playerName : {\n            default : null,\n            type : cc.Label\n        },\n        playerLevel : {\n            default : null,\n            type : cc.Label\n        },\n        playerLedou : {\n            default : null,\n            type : cc.Label\n        },\n        playerLeQuan : {\n            default : null,\n            type : cc.Label\n        },\n        room1 : {\n            default : null,\n            type : cc.Node\n        },\n        room2 : {\n            default : null,\n            type : cc.Node\n        },\n        room3 : {\n            default : null,\n            type : cc.Node\n        },\n        room4 : {\n            default : null,\n            type : cc.Node\n        },\n        \n    },\n    // onLoad () {},\n    start () {\n        var self = this;\n        this.setHeadUrl(\"\");\n        this.setNickName(PlayerDetailModel.getNickName());\n        this.setLevel(PlayerDetailModel.getTitle());\n        this.setLeDou(PlayerDetailModel.getCoin());\n        this.setLuQuan(PlayerDetailModel.getCoupon());\n        this.roomModelId_ = config.curRoomModelId;\n        this.initRoomInfo();\n\n        EventHelper.AddCustomEvent(config.MyNode,Events.Network.LoginRoomResult,function(event){\n            console.log(\"登陆房间回掉---\");\n            var data = event.getUserData();\n            console.log(data);\n            self.handleLoginRoomResult(data);\n        });\n    },\n    initRoomInfo(){\n        console.log(\">>>initRoomInfo\");\n\n        var roomInfos = [];\n        for(var i=0;i<4;i++){\n            var index = i+1;\n            var name = \"p_room_\"+index;\n            var strPeopleNum = \"Canvas/happyroom/rooms/\"+name+\"/lab_peopleNum\";\n            var strCoins = \"Canvas/happyroom/rooms/\"+name+\"/lab_coins\";\n\n            var lab_peopleNum =  cc.find(strPeopleNum).getComponent(cc.Label);\n            var lab_coins =  cc.find(strCoins).getComponent(cc.Label);\n            var item = {\n                peopleNum:lab_peopleNum,\n                coins:lab_coins\n            }\n            roomInfos.push(item);\n        }\n\n        var roomType_ = [];\n        var rooms = PlayerDetailModel.getRoom();\n        for(var k in rooms){\n            var v = rooms[k];\n            if(v.modelId == config.curRoomModelId){\n                roomType_ =  v.rooms;\n            }\n        }\n        this.roomType_ = roomType_;\n        console.log(roomType_);\n\n        for(var i = 0;i<roomType_.length;i++){\n            roomInfos[i].peopleNum.string = \"\"+this.pepleNumAdd(roomType_[i][\"onlineNum\"]);\n            var str_enter = roomType_[i][\"enter\"].replace(\"乐豆\", \"\");\n            roomInfos[i].coins.string = str_enter;\n        }\n    },\n    setHeadUrl(url){\n        var self = this;\n         //设置微信头像\n         var imgUrl=\"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLSO7sOWsNicYdNM3MbNGGo58zticxgqoO2aqS7zOCVClXl7WExa4KNQ48uSTSszicsyspzsDQ51M4EQ/132\";\n         imgUrl = imgUrl + \"?aa=aa.jpg\";\n         cc.loader.load(imgUrl, function(err, texture){\n             self.headImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\n         });\n    },\n    setNickName(name){\n         //修改昵称\n         this.playerName.string = name;\n    },\n    setLevel(lv){\n        //修改等级\n        this.playerLevel.string = lv;\n    },\n    setLeDou(number){\n        //修改乐豆数\n        if(number >= 10000000){\n            number = Math.floor(number / 10000)\n            this.playerLedou.string = \"\"+number+\"万\";\n        }else{\n            this.playerLedou.string = \"\"+number;\n        }\n    },\n    setLuQuan(number){\n        //修改乐券数\n        if(number >= 10000000){\n            number = Math.floor(number / 10000)\n            this.playerLeQuan.string = \"\"+number+\"万\";\n        }else{\n            this.playerLeQuan.string = \"\"+number;\n        }\n    },\n    room1Click(){\n        console.log(\"room1Click\");\n        // cc.director.loadScene(\"GameScene\");\n        this.selectedIdx_ = 0\n        this.roomMinScore = this.roomType_[0][\"enterLimit\"];\n        this.trialInfo = this.roomType_[0][\"trial\"];\n        this.gotoRoom(this.roomType_[0][\"roomId\"]);\n        // console.log(\"roomMinScore:\"+this.roomMinScore+\"  trialInfo:\"+this.trialInfo+\" roomId:\"+this.roomType_[0][\"roomId\"]);\n    },\n    room2Click(){\n        console.log(\"room2Click\");\n        // cc.director.loadScene(\"GameScene\");\n        this.selectedIdx_ = 1\n        this.roomMinScore = this.roomType_[1][\"enterLimit\"];\n        this.trialInfo = this.roomType_[1][\"trial\"];\n        this.gotoRoom(this.roomType_[1][\"roomId\"]);\n        // console.log(\"roomMinScore:\"+this.roomMinScore+\"  trialInfo:\"+this.trialInfo+\" roomId:\"+this.roomType_[1][\"roomId\"]);\n    },\n    room3Click(){\n        console.log(\"room3Click\");\n        // cc.director.loadScene(\"GameScene\");\n        this.selectedIdx_ = 2\n        this.roomMinScore = this.roomType_[2][\"enterLimit\"];\n        this.trialInfo = this.roomType_[2][\"trial\"];\n        this.gotoRoom(this.roomType_[2][\"roomId\"]);\n        // console.log(\"roomMinScore:\"+this.roomMinScore+\"  trialInfo:\"+this.trialInfo+\" roomId:\"+this.roomType_[2][\"roomId\"]);\n    },\n    room4Click(){\n        console.log(\"room4Click\");\n        // cc.director.loadScene(\"GameScene\");\n        this.selectedIdx_ = 3\n        this.roomMinScore = this.roomType_[3][\"enterLimit\"];\n        this.trialInfo = this.roomType_[3][\"trial\"];\n        this.gotoRoom(this.roomType_[3][\"roomId\"]);\n        // console.log(\"roomMinScore:\"+this.roomMinScore+\"  trialInfo:\"+this.trialInfo+\" roomId:\"+this.roomType_[3][\"roomId\"]);\n    },\n    quickStartClick(){\n        console.log(\"quickStartClick\");\n        // cc.director.loadScene(\"GameScene\");\n        this.onWantGotoRoom();\n    },\n    pepleNumAdd(str){\n        var curNum = str;\n        if(typeof(str) == \"string\")\n            curNum = parseInt(str);\n        var endNum = 0\n        if (curNum <= 60){\n            endNum = curNum + 60;\n        }else if(curNum > 60 && curNum <=200){\n            endNum = curNum + 200;\n        }else if(curNum > 200 && curNum <=500){\n            endNum = curNum + 1000;\n        }else{\n            endNum = curNum + 3000;\n        }\n           \n        return endNum;\n    },\n    gotoRoom(mRoomId){\n        var self = this;\n        var coins = PlayerDetailModel.getCoin();\n        var arg = {};\n        arg.roomId = mRoomId;\n        arg.isContinue = 0;\n        console.log(\"coins:\"+coins);\n\n        if(mRoomId == config.RoomConfig[1].roomId || \n            mRoomId == config.RoomConfig[7].roomId){\n            if (coins >= self.roomMinScore){\n                if (self.roomModelId_ == config.ModelId.lazarillo){\n                    arg.modelId = config.ModelId.lazarillo\n                    GameNetMgr.sendRequest(\"Game\", \"loginRoom\", arg)\n                }\n                else{\n                    GameNetMgr.sendRequest(\"Game\", \"loginRoom\", arg)\n                }\n            }else{\n                // GameNetMgr.sendRequest(\"Game\", \"openRechargeTip\", {})\n                console.log(\"弹出救济框\");\n            }\n            console.log(\"新手场\");\n        }else{\n            if (coins >= self.roomMinScore){\n                if (self.roomModelId_ == config.ModelId.lazarillo){\n                    arg.modelId = config.ModelId.lazarillo\n                    GameNetMgr.sendRequest(\"Game\", \"loginRoom\", arg)\n                }else{\n                    GameNetMgr.sendRequest(\"Game\", \"loginRoom\", arg)\n                }\n            }else{\n                console.log(\"弹出充值框\");\n            }\n        }\n    },\n    handleLoginRoomResult(event){\n        var self = this;\n        // --更新玩家乐豆\n        PlayerDetailModel.setCoin(event.payload[\"data\"][\"coins\"]);\n        var payload = event.payload;\n        self.isGotoLazarillo_ = false; //是否进入癞子场\n\n        if(event.ok){\n            var args = {};\n            args[\"baseCoins\"] = payload[\"data\"][\"baseCoins\"];\n            args[\"rate\"] = payload[\"data\"][\"rate\"];\n            args[\"limitCoins\"] = payload[\"data\"][\"limitCoins\"];\n            args[\"rake\"] = payload[\"data\"][\"rake\"];\n            args[\"roomId\"] = payload[\"data\"][\"roomId\"];\n            args[\"rateMax\"] = payload[\"data\"][\"rateMax\"];\n            args[\"enterLimit\"] = payload[\"data\"][\"enterLimit\"];\n            args[\"emoticon\"] = payload[\"data\"][\"emoticon\"];\n            args[\"emoticon_items\"] = payload[\"data\"][\"emoticon_items\"];\n            args[\"advert\"] = payload[\"data\"][\"advert\"]; //记牌器数据\n\n            if(payload[\"data\"][\"modelId\"]){\n                args[\"modelId\"] = payload[\"data\"][\"modelId\"];\n            }\n            args[\"buys\"] = payload[\"data\"][\"buys\"];\n            args[\"givecoins\"] = null;\n\n            if(payload[\"data\"][\"isContinue\"] && parseInt(payload[\"data\"][\"isContinue\"]) == 1){\n                args[\"isContinueGaming\"] = true\n            } \n            if(args[\"roomId\"] == 1002 || args[\"roomId\"] == 1003 || args[\"roomId\"] == 1009){\n                // CompatibleHelper.NoTalkController = false\n            }\n\n            if(parseInt(payload[\"data\"][\"modelId\"]) == config.ModelId.contest){\n                console(\"比赛场\")\n                return;\n            }\n\n            var m_sended = payload[\"data\"][\"sendCoins\"];\n            var m_totalTimes = payload[\"data\"][\"sendCoinsTimes\"];\n            var m_curTimes = payload[\"data\"][\"sendCoinsTimesToday\"];\n            var isSend = payload[\"data\"][\"isSend\"];\n\n            if(m_sended && m_sended > 0){\n                args[\"givecoins\"] = {\n                    sended : m_sended,\n                    totalTimes : m_totalTimes,\n                    curTimes : m_curTimes,\n                };\n                //刷新用户乐豆乐券\n                // app:dispatchEvent({name = app.class.UserProfileUpdate})\n                console.log(\"刷新用户乐豆乐券\");\n            }\n\n            if(parseInt(payload[\"data\"][\"modelId\"]) == config.ModelId.lazarillo){\n                // --癞子场\n                // DeviceHelper.addGameLog(\"enterRoom_lz\"..args[\"roomId\"],\"a\")\n                // app:enterPokerLazarilloScene(args)\n                console.log(\"进入癞子场\");\n            }else{\n                // --普通场\n                // DeviceHelper.addGameLog(\"enterRoom\"..args[\"roomId\"],\"a\")\n                // app:enterPokerScene(args)\n                console.log(\"进入普通场\");\n                cc.director.loadScene(\"GameScene\");\n            }\n\n        }else{\n            if (event.noCoin){\n                if(parseInt(event.payload[\"data\"][\"isSmall\"]) == 1){ //钱少\n                    // var trial = null;\n                    // var rooms = PlayerDetailModel.getRoomByModel();\n                    // for(var k  in rooms){\n                    //     var room = rooms[k]\n                    //     if (parseInt(room.roomId) == parseInt(payload[\"data\"][\"roomId\"])){\n                    //         trial = {\n                    //             id=room.trial.goodsId, text=room.trial.into, price=room.trial.price\n                    //         }\n                    //         break\n                    //     }\n                    // }\n                    console.log(\"乐豆不够去商城充值\");\n                    dialogManager.showCommonDialog(\"温馨提示\",\"乐豆不够前往商城充值\",function(){\n                        console.log(\"打开商城\");\n                    });\n                }else{//--0:钱多\n                    console.log(\"亲,豆子太多啦,系统为您推送到合适的房间！\")\n                    dialogManager.showCommonDialog(\"温馨提示\",\"亲,豆子太多啦,系统为您推送到合适的房间！\",function(){\n                        console.log(\"去合适场次\");\n                        self.onWantGotoRoom();\n                    });\n                    if (parseInt(payload[\"data\"][\"modelId\"]) == config.ModelId.lazarillo){\n                        self.isGotoLazarillo_ = true;\n                    }\n                }\n\n            }else if(event.inGaming){\n                if ( !payload.data.modelId || parseInt(payload.data.modelId) == config.ModelId.normal){\n                    console.log(\"您还在其他房间中对局哟，现在进去看看吧！\");\n                    dialogManager.showCommonDialog(\"温馨提示\",\"您还在其他房间中对局哟，现在进去看看吧！\",function(){\n                        console.log(\"短线重连普通场\");\n                        // self.onWantContinueGaming();\n                    });\n                }else if(!payload.data.modelId || parseInt(payload.data.modelId) == config.ModelId.lazarillo){\n                    console.log(\"您还在其他癞子场中对局哟，现在进去看看吧！\");\n                    dialogManager.showCommonDialog(\"温馨提示\",\"您还在其他癞子场中对局哟，现在进去看看吧！\",function(){\n                        console.log(\"短线重连赖子场\");\n                        // self.onWantContinueLzGaming();\n                    });\n                }else{\n                    console.log(\"您正在竞技场牌局中，请返回继续！\");\n                    dialogManager.showCommonDialog(\"温馨提示\",\"您正在竞技场牌局中，请返回继续！\",function(){\n                        console.log(\"短线重连比赛场\");\n                        // self.onWantContest();\n                    });\n                }\n            }\n        }\n\n    },\n    onWantGotoRoom(){//去适合的场次\n        var self = this;\n        if (self.roomModelId_ == config.ModelId.contest){\n            // --比赛场\n            return;\n        }\n\n        var model = PlayerDetailModel;\n        var rooms = model.getRoomByModel(self.roomModelId_);\n        var coins = model.getCoin();\n\n        console.log(rooms);\n\n        if(self.roomModelId_ == config.ModelId.lazarillo){\n            var roomId = -1;\n            // --癞子场\n            for (var i = 0;i<rooms.length;i++){\n                var room = rooms[i];\n                // --豆够\n                if (room.modelId == config.ModelId.lazarillo && coins >= parseInt(room.enterLimit) && coins <= parseInt(room.enterLimit_)){\n                    roomId = room.roomId;\n                    break;\n                }\n            }\n\n            if (roomId <= 0 ){\n                for (var i = rooms.length-1;i>=0;i--){\n                    var room = rooms[i];\n                    // --豆够\n                    if (room.modelId == config.ModelId.lazarillo && coins >= parseInt(room.enterLimit) ){\n                        roomId = room.roomId;\n                        break\n                    }\n                }\n            }\n\n            if (roomId > 0 ){\n                var arg = {};\n                arg.roomId = roomId;\n                arg.isContinue = 0;\n                arg.modelId = config.ModelId.lazarillo;\n                console.log(\"钱多能去的最高赖子场---------------:\"+room.roomId);\n                GameNetMgr.sendRequest(\"Game\", \"loginRoom\", arg);\n                return\n            }\n        }else{\n            var roomId = -1;\n            // --普通场\n            for (var i = 0;i<rooms.length;i++){\n                var room = rooms[i];\n                // --豆够\n                if (room.modelId == config.ModelId.normal && coins >= parseInt(room.enterLimit) && coins <= parseInt(room.enterLimit_)){\n                    roomId = room.roomId;\n                    break;\n                }\n            }\n\n            if (roomId <= 0 ){\n                for (var i = rooms.length-1;i>=0;i--){\n                    var room = rooms[i];\n                    // --豆够\n                    if (room.modelId == config.ModelId.normal && coins >= parseInt(room.enterLimit) ){\n                        roomId = room.roomId;\n                        break;\n                    }\n                }\n            }\n            console.log(\"普通场 roomId:\"+roomId);\n            \n            if (roomId > 0 ){\n                var arg = {};\n                arg.roomId = roomId;\n                arg.isContinue = 0;\n                console.log(\"钱多能去的最高普通场---------------:\"+room.roomId);\n                GameNetMgr.sendRequest(\"Game\", \"loginRoom\", arg);\n                return;\n            }\n\n        }\n\n        if (coins >= self.roomType_[0][\"enterLimit\"]){\n        }else{\n            // proxy:sendRequest(\"Game\", \"openRechargeTip\", {})\n            console.log(\"弹出救济框\");\n        }\n\n    }\n\n});\n"]}