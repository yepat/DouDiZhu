{"version":3,"sources":["../../../../assets/Script/assets/Script/GameTable.js"],"names":["PokerData","require","PokerControl","config","CardUtil","PopCardUtil","opratOutCardControl","dialogManager","cc","Class","extends","Component","properties","pokerCard","default","type","Prefab","pokerLayerLeft","Node","pokerLayerRight","pokerLayerMy","chupaiBtn","buchuBtn","canvas","opratOutCard","onLoad","load","start","self","touchBeganX","leftX","rightX","upY","downY","isTouchbegan","allPeoplePokerData","getPartCardsData","leftPokerData","rightPokerData","myPokerData","console","log","seatPos","myCardValue","myCardColor","i","length","pokerDataItem","showTxt","showType","push","sort","gradeDown","myPokerNode","leftPokerNode","rightPokerNode","dispatchCard","sceneWidth","director","getWinSize","width","scene","getScene","cardNode","instantiate","parent","scale","center","pokerScale","poker","getComponent","canTouch","showPoker","neatenPoker","setCardDiZhu","registerEvent","playerLeftShowCard","playerRightShowCard","pokerNode","seatPosParam","showWidth","startX","pokerNum","needWidth","disBetween","node","startPosX","setPosition","positionY","playCard","cardScale","showCardWidth","posX","move","moveTo","easing","easeIn","runAction","on","EventType","TOUCH_START","event","p","getLocation","x","setSelectCardByTouch","y","x1","getPositionX","x2","py","getPositionY","psize","getContentSize","pwidth","pheight","height","moveAllCardDown","TOUCH_END","moveCard","TOUCH_MOVE","Math","abs","unregisterEvent","targetOff","istouchbegan","touchStart","touchEnd","selected","posY","size","right","left","buttom","up","setChoosed","cardMove","cardMoveDown","onShow","onMyOutCard","onHide","topcards","getMyTopCards","mycards","autocards","getCardsFromTopCards","AutoChooseLiftUpCard","removeFromParent","buchuFunc","tishiNum","tishiFunc","cards","cardstype","get_topCard_type","myCards","cardValue","StringToNumber","tishicards","get_cards_larger","stopAllActions","callFunc","delay","delayTime","sequence","chupaiFunc","topCards","isTopped","popCardsType","isChoosedPoker","unshift","splice","opOutCard","opOutCardControl","show","leftCardValue","leftCardColor","neatenLeftPoker","index","playCardLeft","len","startY","rightCardValue","rightCardColor","neatenRightPoker","playCardRight","btnBackClick","loadScene","btnDelegateClick","showCancelDelegate","btnSetClick","showSetDialog","btnJiPaiQiClick","btnChatClick"],"mappings":"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","file":"GameTable.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\nvar PokerData = require(\"PokerData\");\nvar PokerControl = require(\"PokerControl\");\nvar config = require(\"config\");\nvar CardUtil = require(\"CardUtil\")\nvar PopCardUtil = require(\"PopCardUtil\")\nvar opratOutCardControl = require(\"opratOutCardControl\");\nvar dialogManager = require(\"dialogManager\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        pokerCard : {\n            default : null,\n            type : cc.Prefab\n        },\n\n        pokerLayerLeft:{\n            default : null,\n            type : cc.Node,\n        },\n        pokerLayerRight:{\n            default : null,\n            type : cc.Node,\n        },\n        pokerLayerMy:{\n            default : null,\n            type : cc.Node,\n        },\n\n        chupaiBtn : {\n            default : null,\n            type : cc.Node,\n        },\n\n        buchuBtn : {\n            default : null,\n            type : cc.Node\n        },\n        canvas:cc.Node, \n        opratOutCard:{\n            default : null,\n            type : cc.Prefab\n        },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n    onLoad () {\n        //初始化纸牌数据\n        PokerData.load();\n    },\n    start () {\n        var self = this;\n    \n        self.touchBeganX = 0;\n        self.leftX = 0;\n        self.rightX = 0;\n        self.upY = 0;\n        self.downY = 0;\n        self.isTouchbegan = false;\n        //得到第三份数据\n        var allPeoplePokerData = PokerData.getPartCardsData()\n        var leftPokerData = allPeoplePokerData[0];\n        var rightPokerData = allPeoplePokerData[1];\n        var myPokerData = allPeoplePokerData[2];\n        console.log(config.seatPos);\n\n        //xx_test\n        myPokerData = [];\n        var myCardValue = [\n            3,5,5,5,5,6,6,6,6,9,9,9,10,10,10,\"J\",\"J\",\"J\",\"Q\",\"K\"//g/G\n        ];\n        var myCardColor = [\n            1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4//\"smallG\",\"bigG\"\n        ]; \n        for(var i = 0;i < myCardValue.length;i++){\n            var pokerDataItem = {\n                showTxt : myCardValue[i],\n                showType : myCardColor[i]\n            }\n            myPokerData.push(pokerDataItem);\n        }\n        myPokerData.sort(CardUtil.gradeDown);\n\n\n        //-----\n        // var source = [3,3,3,5,6,7,7,7,9,9,10,10,11,11,12,12,12];\n        // var source = [];\n        // for(var i=0;i<myCardValue.length;i++){\n        //     source[i]=CardUtil.StringToNumber(myCardValue[i]);\n        // }\n        // console.log(\"sourcelength:\"+source.length);\n\n        // var sameValues = PopCardUtil.getSameCards(myCardValue);\n        // PopCardUtil.setSameVulueCardCount(sameValues);\n\n        // for(var k in sameValues){\n        //     var d = sameValues[k];\n        //     console.log(\"length_d:\"+d.length+\"  k:\"+k);\n        // }\n        //-----\n\n        \n\n       \n        var myPokerNode = [];\n        var leftPokerNode = [];\n        var rightPokerNode = [];\n        var dispatchCard = [];\n        var sceneWidth = cc.director.getWinSize().width;\n        //将预制节点放置在界面上\n        var scene = cc.director.getScene();\n        // var scene = this.pokerLayerMy;\n\n        console.log(\"sceneWidth:\"+sceneWidth);\n\n\n        for(var i = 0;i < myPokerData.length;i++){\n            var cardNode = cc.instantiate(this.pokerCard);\n            cardNode.parent = scene;\n            cardNode.scale = config.seatPos.center.pokerScale;\n            var poker = cardNode.getComponent(PokerControl);\n            myPokerData[i].canTouch = true;\n            poker.showPoker(myPokerData[i]);\n            myPokerNode.push(cardNode);\n            this.neatenPoker(myPokerNode,config.seatPos.center,sceneWidth);\n        }\n        //最后一张牌设置为地主牌\n        myPokerNode[myPokerNode.length-1].getComponent(PokerControl).setCardDiZhu(true);\n\n        // for(var i = 0;i < myPokerData.length;i++){ //myPokerData leftPokerData\n        //     var cardNode = cc.instantiate(this.pokerCard);\n        //     cardNode.parent = scene;\n        //     cardNode.scale = config.seatPos.left.pokerScale;\n        //     var poker = cardNode.getComponent(PokerControl);\n        //     myPokerData[i].canTouch = false;\n        //     poker.showPoker(myPokerData[i]);\n        //     leftPokerNode.push(cardNode);\n        //     this.neatenPoker(leftPokerNode,config.seatPos.left,sceneWidth/2, 230);\n        // }\n\n        // for(var i = 0;i < myPokerData.length;i++){ //myPokerData rightPokerData\n        //     var cardNode = cc.instantiate(this.pokerCard);\n        //     cardNode.parent = scene;\n        //     cardNode.scale = config.seatPos.right.pokerScale;\n        //     var poker = cardNode.getComponent(PokerControl);\n        //     myPokerData[i].canTouch = false;\n        //     poker.showPoker(myPokerData[i]);\n        //     rightPokerNode.push(cardNode);\n        //     this.neatenPoker(rightPokerNode,config.seatPos.right,sceneWidth/2, sceneWidth/2 + 140);\n        // }\n\n        this.myPokerData = myPokerData;\n        this.myPokerNode = myPokerNode;\n        this.dispatchCard = dispatchCard;\n\n        this.sceneWidth = sceneWidth;\n        this.scene = scene;\n        this.registerEvent();\n\n        this.playerLeftShowCard();\n        this.playerRightShowCard();\n    },\n    //理牌\n    neatenPoker(pokerNode,seatPosParam,showWidth,startX){\n        if(pokerNode.length < 1){return}\n        var pokerNum = pokerNode.length;\n        var needWidth = (pokerNum - 1) * seatPosParam.disBetween + pokerNode[0].getComponent(PokerControl).node.width * seatPosParam.pokerScale;\n        // console.log(\"needWidth:\" + needWidth);\n        showWidth = showWidth || cc.director.getWinSize().width;\n        var startPosX = (showWidth - needWidth) / 2;\n        startX = startX || startPosX;\n        for(var i = 0; i < pokerNode.length; i++){\n            pokerNode[i].setPosition(startX + i * seatPosParam.disBetween + pokerNode[0].getComponent(PokerControl).node.width * seatPosParam.pokerScale * 0.5,seatPosParam.positionY);\n        }\n    },\n    //出牌\n    playCard(pokerNode){\n        if(pokerNode.length < 1){return}\n        var cardScale = 0.57\n        var disBetween = 40;\n        var showCardWidth = (pokerNode.length - 1) * disBetween + pokerNode[0].getComponent(PokerControl).node.width * cardScale;\n        // console.log(\"showCardWidth:\"+showCardWidth);\n        var sceneWidth = cc.director.getWinSize().width;\n        var startX = (sceneWidth - showCardWidth) / 2;\n        // console.log(\"startX:\"+startX);\n        //设置出去的牌的大小\n        for(var i = 0; i < pokerNode.length; i++){\n            pokerNode[i].scale = cardScale;\n            var posX = startX + i * disBetween + pokerNode[0].getComponent(PokerControl).node.width * cardScale * 0.5;\n            // console.log(\"posX:\"+posX);\n            var move = cc.moveTo(0.2,posX,500);\n            move.easing(cc.easeIn(2));\n            var poker = pokerNode[i].getComponent(PokerControl);\n            poker.node.runAction(move);\n\n            if(i==pokerNode.length-1){\n                poker.setCardDiZhu(true);\n            }\n        }\n    },\n    //注册触摸事件\n    registerEvent(){\n        var self = this;\n        var myPokerNode = this.myPokerNode;\n\n        this.canvas.on(cc.Node.EventType.TOUCH_START, function(event){\n            // console.log(\"touchStart\");\n            if(myPokerNode.length < 1)\n            return false;\n            var p = event.getLocation();\n            // console.log(\">>x:\"+p.x+\">>y:\"+p.y);\n            self.touchBeganX = p.x;\n            self.leftX = 0;\n            self.rightX = 10000;\n            self.upY = 10000;\n            self.downY = 0;\n            self.isTouchbegan = true;\n            self.setSelectCardByTouch(myPokerNode,p.x,p.y,self.isTouchbegan);\n\n            if (self.isTouchbegan){\n                var x1 = myPokerNode[0].getPositionX();\n                var x2 = myPokerNode[myPokerNode.length-1].getPositionX();\n                var py = myPokerNode[0].getPositionY();\n                var psize = myPokerNode[0].getContentSize();\n                var pwidth = psize.width;\n                var pheight = psize.height;\n\n                var disBetween = 10;\n    \n                self.leftX = x1-pwidth/2-disBetween;\n                self.rightX = x2+pwidth/2+disBetween;\n                self.upY = py+pheight/2+40;\n                self.downY = py-pheight/2;\n\n                console.log(\"self.leftX:\"+self.leftX+\"  self.rightX:\"+self.rightX+\" self.downY:\"+self.downY+\"  self.upY:\"+ self.upY);\n                if (self.isTouchbegan && (p.y > self.upY || p.y < self.downY || p.x < self.leftX || p.x > self.rightX)){\n                    self.moveAllCardDown(myPokerNode);\n                }\n            }\n        }, this.node);\n        this.canvas.on(cc.Node.EventType.TOUCH_END,function(event){\n            // console.log(\"touchEnd\");\n            if(myPokerNode.length < 1)\n            return;\n            var p = event.getLocation();\n            self.moveCard(myPokerNode);\n        }, this.node);\n        this.canvas.on(cc.Node.EventType.TOUCH_MOVE,function(event){\n            if(myPokerNode.length < 1)\n            return;\n            var p = event.getLocation();\n            if (Math.abs(self.touchBeganX - p.x) > 40){\n                self.isTouchbegan = false;\n                self.setSelectCardByTouch(myPokerNode,p.x,p.y,self.isTouchbegan);\n            }\n        }, this.node);\n    },\n    //移除触摸事件\n    unregisterEvent(){\n        this.canvas.targetOff(this.node);\n        console.log(\"off\");\n    },\n    setSelectCardByTouch(myPokerNode,x,y,istouchbegan){\n        var touchStart = this.touchBeganX;\n        var touchEnd = x;\n        this.isTouchbegan = istouchbegan;\n\n        if (this.touchBeganX > x){\n            touchStart = x;\n            touchEnd = this.touchBeganX; \n        }\n        \n        //如果起点跟终点距离小于5 则处理成起点等于终点\n        if (touchEnd - touchStart<5){\n            touchEnd = touchStart;\n        }\n\n        var selected = false; //选中状态\n        \n        for(var i = 0;i < myPokerNode.length;i++){\n            var pokerNode = myPokerNode[i];\n            var posY = pokerNode.getPositionY();\n            var size = pokerNode.getContentSize();\n            var posX = pokerNode.getPositionX(); //+ size.width/2;\n\n            var width = size.width;\n            var height = size.height;\n\n            var disBetween = config.seatPos.center.disBetween;\n\n            var right = posX - width/2+disBetween;\n            var left =  posX - width/2;\n            var buttom = posY - height/2;\n            var up = posY + height/2;\n            //最后一张整张牌都可以点击\n            if(i == myPokerNode.length-1){\n                right = posX+width/2; \n            }\n            // console.log(\"left:\"+left+\"  right:\"+right+\" buttom:\"+buttom+\" up:\"+up);\n            // console.log(\"posX:\"+posX+\" posY:\"+posY+\" sizeW:\"+width+\" sizeH:\"+height);\n            if ( y >= buttom && y <= up &&\n                ((left>= touchStart && left <= touchEnd) || (right>= touchStart && right <= touchEnd) ||\n                (touchStart>= left && touchStart <= right) || (touchEnd>= left && touchEnd <= right))){\n                    pokerNode.getComponent(PokerControl).setChoosed(true);\n                }else{\n                    // pokerNode:clearSelection();\n             }\n        }   \n    },\n    moveCard(myPokerNode){\n        for(var i = 0;i < myPokerNode.length;i++){\n            var pokerNode = myPokerNode[i];\n            pokerNode.getComponent(PokerControl).cardMove();\n        }\n    },\n    moveAllCardDown(myPokerNode){\n        console.log(\"moveAllCardDown\");\n        for(var i = 0;i < myPokerNode.length;i++){\n            var pokerNode = myPokerNode[i];\n            pokerNode.getComponent(PokerControl).cardMoveDown();\n        }\n    },\n    onShow(){\n        console.log(\"onShow\");\n        this.onMyOutCard();\n    },\n    onHide(){\n        console.log(\"onHide\");\n        //智能提牌测试\n        var myPokerNode = this.myPokerNode;\n        var myPokerData = this.myPokerData;\n        var topcards = CardUtil.getMyTopCards(myPokerNode,PokerControl);\n        \n        var mycards = [];\n        for(var i = myPokerData.length - 1; i > -1;i--){\n            mycards.push(myPokerData[i].showTxt);\n            console.log(\"xx\"+myPokerData[i].showTxt);\n        } \n        \n        var autocards = CardUtil.getCardsFromTopCards(mycards,topcards);\n        if(autocards.length < 1){\n        }else{\n            this.moveAllCardDown(myPokerNode);//先放下在提起\n            CardUtil.AutoChooseLiftUpCard(myPokerNode,PokerControl,autocards);\n        } \n    },\n    //轮到自己出牌\n    onMyOutCard(){\n        var self = this;\n        var dispatchCard = this.dispatchCard;\n        var sceneWidth = this.sceneWidth;\n        // var scene = this.scene;\n        var scene = cc.director.getScene();\n\n        var myPokerNode = this.myPokerNode;\n        var myPokerData = this.myPokerData;\n\n        //牌桌上已经有了出牌，清除掉\n        if(dispatchCard.length > 0){\n            console.log(\"dispatchCard.length:\"+dispatchCard.length);\n            for(var i = 0; i < dispatchCard.length; i++){\n                dispatchCard[i].getComponent(PokerControl).node.removeFromParent();\n            }\n            dispatchCard = [];\n        }\n\n        var buchuFunc = function(){\n            self.moveAllCardDown(myPokerNode);\n        }\n        var tishiNum = 0;\n        var tishiFunc = function(){\n            // var cards = [\"3\",\"3\",\"3\",\"7\",\"7\"];\n            var cards = [5,5,5,6,6,6,7,7];//\"3\",\"3\",\"3\",\"3\"\n            var cardstype = CardUtil.get_topCard_type(cards);\n            var myCards = [];\n            console.log(cardstype);\n\n            for(var i = myPokerData.length - 1; i > -1;i--){\n                var cardValue = CardUtil.StringToNumber(myPokerData[i].showTxt);\n                myCards.push(cardValue); \n            }\n\n            var tishicards = CardUtil.get_cards_larger(cardstype,myCards);\n\n            if(tishicards.length == 0){\n                console.log(\"没有符合的牌型可供提示\");\n                return;\n            }\n\n            console.log(\"xxx:\"+tishicards.length);\n            console.log(tishicards);\n\n            cards = tishicards[tishiNum];\n\n        \n            if(tishiNum<tishicards.length-1){\n                tishiNum++;\n            }else{\n                tishiNum = 0;\n            }\n\n\n            this.node.stopAllActions();\n            var callFunc = cc.callFunc(function(){\n                CardUtil.AutoChooseLiftUpCard(myPokerNode,PokerControl,cards);\n            });\n            var delay = cc.delayTime(0.25);\n            this.node.runAction(cc.sequence(delay,callFunc));\n\n            self.moveAllCardDown(myPokerNode);\n        }\n        var chupaiFunc = function(){\n            console.log(\"点击了出牌\");\n            var topCards = [];\n            //获取提起的牌直\n            for(var i = myPokerData.length - 1; i > -1;i--){\n                if(myPokerData[i].isTopped){\n                    var cardValue = CardUtil.StringToNumber(myPokerData[i].showTxt);\n                    topCards.push(cardValue);\n                }\n            }\n\n            if(topCards.length>=1){\n                var popCardsType = CardUtil.get_topCard_type(topCards);\n                console.log(popCardsType);\n                if(popCardsType.type == 0){\n                    console.log(\"提起的牌不合法\");\n                    return -1;\n                }    \n            }else{\n                console.log(\"没有牌提起\");\n                return 0;\n            }\n\n            for(var i = myPokerData.length - 1; i > -1;i--){\n                    if(myPokerData[i].isTopped){ //myPokerData[i].isChoosed\n                    var isChoosedPoker = myPokerNode[i];\n                    dispatchCard.unshift(isChoosedPoker);\n                    myPokerData.splice(i,1);\n                    myPokerNode.splice(i,1);\n                }\n            }\n            self.dispatchCard = dispatchCard;\n            //出牌\n            self.playCard(dispatchCard);\n            self.neatenPoker(myPokerNode,config.seatPos.center,sceneWidth);\n            //最后一张牌设置为地主牌\n            if(myPokerNode.length>0){\n                myPokerNode[myPokerNode.length-1].getComponent(PokerControl).setCardDiZhu(true);\n            }\n        }\n        var opOutCard = cc.instantiate(this.opratOutCard);\n        // opOutCard.setPositionX(sceneWidth/2);\n        opOutCard.parent = scene;\n        var opOutCardControl = opOutCard.getComponent(opratOutCardControl);\n        opOutCardControl.show(20,buchuFunc,tishiFunc,chupaiFunc);\n    },\n    playerLeftShowCard(){\n        var leftPokerData = [];\n        var leftCardValue = [\n            3,5,5,5,5,6,6,6,6,9,9,9,10,10,10,\"J\",\"J\"//,\"J\",\"g\",\"G\"\n        ];\n        var leftCardColor = [\n            1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4,1,2,\"smallG\",\"bigG\"\n        ]; \n        for(var i = 0;i < leftCardValue.length;i++){\n            var pokerDataItem = {\n                showTxt : leftCardValue[i],\n                showType : leftCardColor[i]\n            }\n            leftPokerData.push(pokerDataItem);\n        }\n        leftPokerData.sort(CardUtil.gradeDown);\n\n        var leftPokerNode = [];\n        var dispatchCard = [];\n        var sceneWidth = cc.director.getWinSize().width;\n        var scene = this.pokerLayerLeft;\n\n        for(var i = 0;i < leftPokerData.length;i++){\n            var cardNode = cc.instantiate(this.pokerCard);\n            cardNode.parent = scene;\n            cardNode.scale = config.seatPos.left.pokerScale;\n            var poker = cardNode.getComponent(PokerControl);\n            leftPokerData[i].canTouch = false;\n            poker.showPoker(leftPokerData[i]);\n            leftPokerNode.push(cardNode);\n            this.neatenLeftPoker(leftPokerNode,config.seatPos.left,sceneWidth/2, 230);\n        }\n        leftPokerNode[leftPokerNode.length-1].getComponent(PokerControl).setCardDiZhu(true);\n\n        //出牌\n        var cards = [3];//,5,5,5,5,6,6,6,6,9,9,9,10,10,10\n        // cards.sort(config.arrayDown);\n        var index = 0;\n        for(var i = leftPokerData.length - 1; i > -1;i--){\n            var cardValue = CardUtil.StringToNumber(leftPokerData[i].showTxt);\n            // var index = leftPokerData.length - 1 - i;\n            console.log(\"cardValue:\"+cardValue+\"index:\"+index);\n\n            if(cards[index]&&cards[index]==cardValue){ //myPokerData[i].isChoosed\n                console.log(\"cards:\"+cards[index]);\n                var isChoosedPoker = leftPokerNode[i];\n                dispatchCard.unshift(isChoosedPoker);\n                leftPokerData.splice(i,1);\n                leftPokerNode.splice(i,1);\n            }\n            index++;\n        }\n        // self.dispatchCard = dispatchCard;\n        //出牌\n        this.playCardLeft(dispatchCard,320,650);\n        this.neatenLeftPoker(leftPokerNode,config.seatPos.left,sceneWidth/2, 230);\n        //最后一张牌设置为地主牌\n        if(leftPokerNode.length>0){\n            leftPokerNode[leftPokerNode.length-1].getComponent(PokerControl).setCardDiZhu(true);\n        }\n\n    },\n    neatenLeftPoker(pokerNode,seatPosParam,showWidth,startX){\n        if(pokerNode.length < 1){return}\n        var pokerNum = pokerNode.length;\n        var needWidth = (pokerNum - 1) * seatPosParam.disBetween + pokerNode[0].getComponent(PokerControl).node.width * seatPosParam.pokerScale;\n        showWidth = showWidth || cc.director.getWinSize().width;\n        var startPosX = (showWidth - needWidth) / 2;\n        startX = startX || startPosX;\n\n        var len = pokerNode.length;\n        if(len<=10){\n            for(var i = 0; i < pokerNode.length; i++){\n                pokerNode[i].setPosition(startX + i * seatPosParam.disBetween + pokerNode[0].getComponent(PokerControl).node.width * seatPosParam.pokerScale * 0.5,seatPosParam.positionY);\n            }\n        }else{\n            for(var i = 0; i < 10; i++){\n                pokerNode[i].setPosition(startX + i * seatPosParam.disBetween + pokerNode[0].getComponent(PokerControl).node.width * seatPosParam.pokerScale * 0.5,seatPosParam.positionY);\n            }\n\n            for(var i=0;i<len-10;i++){\n                pokerNode[i+10].setPosition(startX + i * seatPosParam.disBetween + pokerNode[0].getComponent(PokerControl).node.width * seatPosParam.pokerScale * 0.5,seatPosParam.positionY-55);\n            }\n        }\n    },\n    //左边出牌\n    playCardLeft(pokerNode,startX,startY){\n        if(pokerNode.length < 1){return}\n        var cardScale = 0.38;\n        var disBetween = 27;\n        var showCardWidth = (pokerNode.length - 1) * disBetween + pokerNode[0].getComponent(PokerControl).node.width * cardScale;\n        // console.log(\"showCardWidth:\"+showCardWidth);\n        var sceneWidth = cc.director.getWinSize().width;\n        // var startX = (sceneWidth/2 - showCardWidth) / 2;\n\n        // console.log(\"startX:\"+startX);\n        //设置出去的牌的大小\n        for(var i = 0; i < pokerNode.length; i++){\n            pokerNode[i].scale = cardScale;\n            var posX = startX + i * disBetween + pokerNode[0].getComponent(PokerControl).node.width * cardScale * 0.5;\n            // console.log(\"posX:\"+posX);\n            var poker = pokerNode[i].getComponent(PokerControl);\n            poker.node.runAction(cc.moveTo(0.2,posX,startY));\n\n            if(i==pokerNode.length-1){\n                poker.setCardDiZhu(true);\n            }\n        }\n    },\n\n    //右边玩家明牌\n    playerRightShowCard(){\n\n        var rightPokerData = [];\n        var rightCardValue = [\n            3,5,5,5,5,6,6,6,6,9,9,9,10,10,10,\"J\",\"J\",\"J\",\"g\",\"G\"\n        ];\n        var rightCardColor = [\n            1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4,1,2,\"smallG\",\"bigG\"\n        ]; \n        for(var i = 0;i < rightCardValue.length;i++){\n            var pokerDataItem = {\n                showTxt : rightCardValue[i],\n                showType : rightCardColor[i]\n            }\n            rightPokerData.push(pokerDataItem);\n        }\n        rightPokerData.sort(CardUtil.gradeDown);\n\n        var rightPokerNode = [];\n        var dispatchCard = [];\n        var sceneWidth = cc.director.getWinSize().width;\n        var scene = this.pokerLayerRight;\n\n        for(var i = 0;i < rightPokerData.length;i++){\n            var cardNode = cc.instantiate(this.pokerCard);\n            cardNode.parent = scene;\n            cardNode.scale = config.seatPos.right.pokerScale;\n            var poker = cardNode.getComponent(PokerControl);\n            rightPokerData[i].canTouch = false;\n            poker.showPoker(rightPokerData[i]);\n            rightPokerNode.push(cardNode);\n            this.neatenRightPoker(rightPokerNode,config.seatPos.right,sceneWidth/2, sceneWidth/2 + 140);\n        }\n\n         //出牌\n         var cards = [3,5,5,5,5,6,6,6,9,9,9,10,10,10,\"J\",\"J\",\"J\"];//,5,5,5,5,6,6,6,6\n         // cards.sort(config.arrayDown);\n         var index = 0;\n         for(var i = rightPokerData.length - 1; i > -1;i--){\n             var cardValue = CardUtil.StringToNumber(rightPokerData[i].showTxt);\n\n             console.log(\"cardValueB:\"+cardValue+\"indexB:\"+index);\n        \n             if(cards[index]&&cards[index]==cardValue){ //myPokerData[i].isChoosed\n                 console.log(\"cardsB:\"+cards[index]);\n                 var isChoosedPoker = rightPokerNode[i];\n                 dispatchCard.unshift(isChoosedPoker);\n                 rightPokerData.splice(i,1);\n                 rightPokerNode.splice(i,1);\n             }\n             index++;\n         }\n         // self.dispatchCard = dispatchCard;\n         //出牌\n         this.playCardRight(dispatchCard,620,650);\n         this.neatenRightPoker(rightPokerNode,config.seatPos.right,sceneWidth/2, sceneWidth/2 + 140);\n         //最后一张牌设置为地主牌\n        //  if(leftPokerNode.length>0){\n        //      leftPokerNode[leftPokerNode.length-1].getComponent(PokerControl).setCardDiZhu(true);\n        //  }\n\n    },\n    neatenRightPoker(pokerNode,seatPosParam,showWidth,startX){\n        if(pokerNode.length < 1){return}\n        var pokerNum = pokerNode.length;\n        var needWidth = (pokerNum - 1) * seatPosParam.disBetween + pokerNode[0].getComponent(PokerControl).node.width * seatPosParam.pokerScale;\n        showWidth = showWidth || cc.director.getWinSize().width;\n        var startPosX = (showWidth - needWidth) / 2;\n        startX = startX || startPosX;\n\n        startX = startX + 10*seatPosParam.disBetween;\n\n        var len = pokerNode.length;\n        if(len<=10){\n            startX = startX + (10 - len)*seatPosParam.disBetween;\n            for(var i = 0; i < pokerNode.length; i++){\n                pokerNode[i].setPosition(startX + i * seatPosParam.disBetween + pokerNode[0].getComponent(PokerControl).node.width * seatPosParam.pokerScale * 0.5,seatPosParam.positionY);\n            }\n        }else{\n            for(var i = 0; i < 10; i++){\n                pokerNode[i].setPosition(startX + i * seatPosParam.disBetween + pokerNode[0].getComponent(PokerControl).node.width * seatPosParam.pokerScale * 0.5,seatPosParam.positionY);\n            }\n\n            for(var i=0;i<len-10;i++){\n                pokerNode[i+10].setPosition(startX + i * seatPosParam.disBetween + pokerNode[0].getComponent(PokerControl).node.width * seatPosParam.pokerScale * 0.5,seatPosParam.positionY-55);\n            }\n        }\n    },\n\n    playCardRight(pokerNode,startX,startY){\n        if(pokerNode.length < 1){return}\n        var cardScale = 0.38;\n        var disBetween = 27;\n        var showCardWidth = (pokerNode.length - 1) * disBetween + pokerNode[0].getComponent(PokerControl).node.width * cardScale;\n        // console.log(\"showCardWidth:\"+showCardWidth);\n        var sceneWidth = cc.director.getWinSize().width;\n        // var startX = (sceneWidth/2 - showCardWidth) / 2;\n\n        startX = sceneWidth/2 + 590 - disBetween*pokerNode.length;\n\n        // console.log(\"startX:\"+startX);\n        //设置出去的牌的大小\n        for(var i = 0; i < pokerNode.length; i++){\n            pokerNode[i].scale = cardScale;\n            var posX = startX + i * disBetween + pokerNode[0].getComponent(PokerControl).node.width * cardScale * 0.5;\n            // console.log(\"posX:\"+posX);\n            var poker = pokerNode[i].getComponent(PokerControl);\n            poker.node.runAction(cc.moveTo(0.2,posX,startY));\n\n            // if(i==pokerNode.length-1){\n            //     poker.setCardDiZhu(true);\n            // }\n        }\n    },\n\n    //按钮点击事件\n    btnBackClick(){\n        console.log(\"btnBackClick\");\n        cc.director.loadScene(\"HallScene\");\n    },\n    btnDelegateClick(){\n        console.log(\"btnDelegateClick\");\n        dialogManager.showCancelDelegate();\n    },\n    btnSetClick(){\n        console.log(\"btnSetClick\");\n        dialogManager.showSetDialog();\n    },\n    btnJiPaiQiClick(){\n        console.log(\"btnJiPaiQiClick\");\n    },\n    btnChatClick(){\n        console.log(\"btnChatClick\");\n    }\n});\n"]}