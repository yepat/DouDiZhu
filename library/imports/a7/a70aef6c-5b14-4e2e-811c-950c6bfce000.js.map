{"version":3,"sources":["../../../../../assets/Script/dialog/assets/Script/dialog/emailItemControl.js"],"names":["GameNetMgr","require","PlayerDetailModel","cc","Class","extends","Component","properties","read","default","type","Node","unRead","labTitle","Label","labContent","labTime","onLoad","active","info","id","init","title","content","time","string","is_read","getClick","console","log","sendRequest","num","getMailUnread","setMailUnread","node","destroy","vv","audioMgr","playSFX"],"mappings":";;;;;;AAAA,IAAIA,aAAaC,QAAQ,YAAR,CAAjB;AACA,IAAIC,oBAAoBD,QAAQ,mBAAR,CAAxB;AACAE,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAO;AACHC,qBAAU,IADP;AAEHC,kBAAOP,GAAGQ;AAFP,SADC;AAKRC,gBAAS;AACLH,qBAAU,IADL;AAELC,kBAAOP,GAAGQ;AAFL,SALD;AASRE,kBAAW;AACPJ,qBAAU,IADH;AAEPC,kBAAOP,GAAGW;AAFH,SATH;AAaRC,oBAAa;AACTN,qBAAU,IADD;AAETC,kBAAOP,GAAGW;AAFD,SAbL;AAiBRE,iBAAU;AACNP,qBAAU,IADJ;AAENC,kBAAOP,GAAGW;AAFJ;AAjBF,KAHP;AAyBLG,UAzBK,oBAyBK;AACN,aAAKT,IAAL,CAAUU,MAAV,GAAmB,KAAnB;AACA,aAAKN,MAAL,CAAYM,MAAZ,GAAqB,KAArB;AACA,aAAKC,IAAL,GAAY,CAAZ;AACA,aAAKC,EAAL,GAAU,CAAV;;AAEA;AACA;AACA;AACJ,KAlCK;AAmCNC,QAnCM,gBAmCDF,IAnCC,EAmCIC,EAnCJ,EAmCOE,KAnCP,EAmCaC,OAnCb,EAmCqBC,IAnCrB,EAmC0B;AAC3B,aAAKL,IAAL,GAAYA,IAAZ;AACA,aAAKC,EAAL,GAAUA,EAAV;AACA,aAAKP,QAAL,CAAcY,MAAd,GAAuBH,KAAvB;AACA,aAAKP,UAAL,CAAgBU,MAAhB,GAAyBF,OAAzB;AACA,aAAKP,OAAL,CAAaS,MAAb,GAAsBD,IAAtB;AACA,YAAGL,KAAKO,OAAL,IAAgB,CAAnB,EAAqB;AAAE;AACnB,iBAAKlB,IAAL,CAAUU,MAAV,GAAmB,IAAnB;AACH,SAFD,MAEK;AAAC;AACF,iBAAKN,MAAL,CAAYM,MAAZ,GAAqB,IAArB;AACH;AACJ,KA9CI;AA+CLS,YA/CK,sBA+CK;AACNC,gBAAQC,GAAR,CAAY,UAAQ,KAAKT,EAAzB;AACApB,mBAAW8B,WAAX,CAAuB,QAAvB,EAAgC,UAAhC,EAA2C,KAAKV,EAAhD;AACApB,mBAAW8B,WAAX,CAAuB,QAAvB,EAAgC,mBAAhC,EAAoD,KAAKV,EAAzD;;AAEA,YAAIW,MAAM7B,kBAAkB8B,aAAlB,EAAV;AACA9B,0BAAkB+B,aAAlB,CAAgCF,MAAI,CAApC;;AAEA,aAAKG,IAAL,CAAUC,OAAV;;AAEAhC,WAAGiC,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,QAAvB;AACH;AA1DI,CAAT","file":"emailItemControl.js","sourceRoot":"../../../../../assets/Script/dialog","sourcesContent":["var GameNetMgr = require(\"GameNetMgr\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        read : {\n            default : null,\n            type : cc.Node\n        },\n        unRead : {\n            default : null,\n            type : cc.Node\n        },\n        labTitle : {\n            default : null,\n            type : cc.Label\n        },\n        labContent : {\n            default : null,\n            type : cc.Label\n        },\n        labTime : {\n            default : null,\n            type : cc.Label\n        },\n    },\n    onLoad () {\n        this.read.active = false;\n        this.unRead.active = false;\n        this.info = 0;\n        this.id = 0;\n\n        //领取/删除按钮\n        //v.items == 1  //领取\n        //v.is_read == 1 --已读\n   },\n   init(info,id,title,content,time){\n        this.info = info;\n        this.id = id;\n        this.labTitle.string = title;\n        this.labContent.string = content;\n        this.labTime.string = time;\n        if(info.is_read == 1){ //已读\n            this.read.active = true;\n        }else{//未读\n            this.unRead.active = true;\n        }\n    },\n    getClick(){\n        console.log(\"点击了邮件\"+this.id);\n        GameNetMgr.sendRequest(\"System\",\"ReadMail\",this.id);\n        GameNetMgr.sendRequest(\"System\",\"GetMailAttachment\",this.id);\n\n        var num = PlayerDetailModel.getMailUnread();\n        PlayerDetailModel.setMailUnread(num-1);\n\n        this.node.destroy();\n\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    }\n});\n"]}