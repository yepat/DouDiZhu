{"version":3,"sources":["../../../../assets/Script/assets/Script/HallCanvasControl.js"],"names":["config","require","dialogManager","GameNetMgr","cc","Class","extends","Component","properties","hallLayer","default","type","Node","roomLayer","onLoad","sendReq","fn","leDouShareSucss","sendRequest","setTimeout","game","on","EVENT_HIDE","console","log","vv","audioMgr","stopMusic","EVENT_SHOW","playBGM","start","active","btnRoom1Click","curRoomModelId","ModelId","normal","playSFX","btnRoom2Click","lazarillo","roomBackHall","loadSubpackage","wx","loadTask","name","success","res","fail","onProgressUpdate","progress","totalBytesWritten","totalBytesExpectedToWrite"],"mappings":"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","file":"HallCanvasControl.js","sourceRoot":"../../../../assets/Script","sourcesContent":["var config = require(\"config\");\nvar dialogManager = require(\"dialogManager\");\nvar GameNetMgr = require(\"GameNetMgr\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        hallLayer : {\n            default : null,\n            type : cc.Node\n        },\n        roomLayer : {\n            default : null,\n            type : cc.Node\n        }\n    },\n    onLoad () {\n        var sendReq = function(){\n            var fn = function(){\n                if(config.leDouShareSucss){\n                    GameNetMgr.sendRequest(\"System\",\"ShareWxRes\",3);\n                    GameNetMgr.sendRequest(\"Game\", \"openReliefTip\", {});\n                }\n            }\n            setTimeout(fn,1000);\n        }\n        cc.game.on(cc.game.EVENT_HIDE, function(){\n            console.log(\"游戏进入后台\");   \n            // config.stopOnMassage = true;  \n            cc.vv.audioMgr.stopMusic();\n        },this);\n        cc.game.on(cc.game.EVENT_SHOW, function(){\n            console.log(\"重新返回游戏\");\n            cc.vv.audioMgr.playBGM(\"MusicEx_Welcome\");\n            sendReq();\n        },this);\n\n        cc.vv.audioMgr.playBGM(\"MusicEx_Welcome\");\n        // this.loadSubpackage();\n\n        // if(typeof(wx)==\"undefined\"){\n        //     return;\n        // }\n        // wx.onHide(function () {\n        //     console.log(\"wx 游戏进入后台\");\n        // });\n        // wx.onShow(function (){\n        //     console.log(\"wx 重新返回游戏\");\n        // });\n    },\n    start () {\n       this.hallLayer.active = true;\n       this.roomLayer.active = false;\n    },\n    btnRoom1Click(){\n        console.log(\"欢乐场\")\n        config.curRoomModelId = config.ModelId.normal;\n        this.hallLayer.active = false;\n        this.roomLayer.active = true;\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnRoom2Click(){\n        console.log(\"赖子场\")\n        config.curRoomModelId = config.ModelId.lazarillo;\n        this.hallLayer.active = false;\n        this.roomLayer.active = true;\n        // dialogManager.showCommonDialog(\"温馨提示\",\"赖子场暂未开放！\",null,null);\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    roomBackHall(){\n        console.log(\"反回大厅\")\n        this.hallLayer.active = true;\n        this.roomLayer.active = false;\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    loadSubpackage(){\n        if(typeof(wx)==\"undefined\"){return;}\n\n        if (wx.loadSubpackage) {\n        }else{\n            console.log(\"没有分包加载这个接口\");\n            return;\n        }\n\n        var loadTask = wx.loadSubpackage({\n            name: 'stage1', // name 可以填 name 或者 root\n            success: function(res) {\n              // 分包加载成功后通过 success 回调\n              console.log(\"分包加载成功\",res);\n            },\n            fail: function(res) {\n              // 分包加载失败通过 fail 回调\n              console.log(\"分包加载失败\",res);\n            }\n          })\n          \n          loadTask.onProgressUpdate(res => {\n            console.log('下载进度', res.progress)\n            console.log('已经下载的数据长度', res.totalBytesWritten)\n            console.log('预期需要下载的数据总长度', res.totalBytesExpectedToWrite)\n          })\n    }\n});\n"]}