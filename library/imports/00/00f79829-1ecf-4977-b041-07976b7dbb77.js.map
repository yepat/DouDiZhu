{"version":3,"sources":["../../../../../assets/Script/util/assets/Script/util/PokerControl.js"],"names":["config","require","CardUtil","cc","Class","extends","Component","properties","pokerNum","default","type","Sprite","pokerType","pokerType2","pokerBg","pokerLight","pokerDiZhu","pokerShow","canTouch","isTouched","cardData","isTopped","showPoker","showData","self","showType","cardValue","showTxt","numUrl","enabled","loader","loadRes","SpriteFrame","err","spriteFrame","getComponent","imgUrl","pokerCardType","spade","node","color","Color","hearts","redslice","blackberry","ghostCardType","bigG","smallG","jokerValue","serverCardValueToClient","joker","setPokerLight","isVisible","setChoosed","isChoosed","cardMove","move","moveBy","easing","easeIn","runAction","cardMoveDown","setCardDiZhu","isEnabled","setCardShow","setMoveDown","setPokerBg","setScale","scale","scaleX","scaleY","convertLazarillo"],"mappings":"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","file":"PokerControl.js","sourceRoot":"../../../../../assets/Script/util","sourcesContent":["\nvar config = require(\"config\");\nvar CardUtil = require(\"CardUtil\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        pokerNum : {\n            default : null,\n            type : cc.Sprite\n        },\n\n        pokerType : {\n            default : null,\n            type : cc.Sprite\n        },\n\n        pokerType2 : {\n            default : null,\n            type : cc.Sprite\n        },\n\n        pokerBg : {\n            default : null,\n            type : cc.Sprite\n        },\n        pokerLight : {\n            default : null,\n            type : cc.Sprite\n        },\n\n        pokerDiZhu : {\n            default : null,\n            type : cc.Sprite\n        },\n        pokerShow : {\n            default : null,\n            type : cc.Sprite\n        },\n\n        canTouch : false,\n        isTouched : false,\n        cardData : {\n            default : null,\n        },\n        isTopped:false,//是否被提起\n    },\n    //展示poker\n    showPoker(showData){\n        var self = this;\n        self.cardData = showData;\n        var showType = showData.showType;\n        self.canTouch = showData.canTouch;\n\n        self.cardValue = showData.showTxt;\n        var numUrl = \"cards/poke_\" + self.cardValue;\n       \n        if(self.cardValue!=16&&self.cardValue!=17){\n            self.pokerType2.enabled = true;\n            self.pokerNum.enabled = true;\n            cc.loader.loadRes(numUrl,cc.SpriteFrame,function(err,spriteFrame){\n                self.pokerNum.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n        }\n        \n        // console.log(\"\"+showData.showTxt+\":\"+self.cardValue);\n        // self.pokerType2.enabled = true;\n        // self.pokerNum.enabled = true;\n        \n        self.pokerDiZhu.enabled = false;\n        self.pokerLight.enabled = false;\n        self.pokerShow.enabled = false;\n        self.pokerType.enabled = true;\n        self.pokerType2.enabled = true;\n\n        var imgUrl = \"cards/heitao\";\n        if(showType == config.pokerCardType.spade){\n            imgUrl = \"cards/heitao\";\n            self.pokerNum.node.color = new cc.Color(27, 27, 27);\n        }else if(showType == config.pokerCardType.hearts){\n            imgUrl = \"cards/hongxin\";\n            self.pokerNum.node.color = new cc.Color(246, 58, 27);\n        }else if(showType == config.pokerCardType.redslice){\n            imgUrl = \"cards/hongfang\";\n            self.pokerNum.node.color = new cc.Color(246, 58, 27);\n        }else if(showType == config.pokerCardType.blackberry){\n            imgUrl = \"cards/heimei\";\n            self.pokerNum.node.color = new cc.Color(27, 27, 27);\n        }else if(showType == config.ghostCardType.bigG){\n            self.pokerType.enabled = false;\n            self.pokerType2.enabled = false;\n            self.pokerNum.enabled = false;\n            cc.loader.loadRes(\"cards/joker_red\",cc.SpriteFrame,function(err,spriteFrame){\n                self.pokerBg.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            })\n        }else if(showType == config.ghostCardType.smallG){\n            self.pokerType.enabled = false;\n            self.pokerType2.enabled = false;\n            self.pokerNum.enabled = false;\n            cc.loader.loadRes(\"cards/joker_black\",cc.SpriteFrame,function(err,spriteFrame){\n                self.pokerBg.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            })\n        }\n        var jokerValue = CardUtil.serverCardValueToClient(config.joker);\n        if(self.cardValue == jokerValue){\n            imgUrl = \"cards/laizi\";\n            self.pokerNum.node.color = new cc.Color(221, 109, 30);\n            // console.log(\"numUrl:\"+numUrl);\n        }\n        cc.loader.loadRes(imgUrl,cc.SpriteFrame,function(err,spriteFrame){\n            self.pokerType.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            self.pokerType2.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        })\n    },\n    setPokerLight(isVisible){\n        this.pokerLight.enabled = isVisible;\n    },\n    setChoosed(isTouched){ \n        this.cardData.isChoosed = isTouched;\n        this.pokerLight.enabled = isTouched;\n    },\n    cardMove(){\n        if(this.cardData.isChoosed&&this.cardData.isTopped){\n            // this.node.\n            var move = cc.moveBy(0.1,0,-30);\n            move.easing(cc.easeIn(3));\n            this.node.runAction(move);\n            this.cardData.isTopped = false;\n            this.cardData.isChoosed = false;\n            this.pokerLight.enabled = false;\n        }else if(this.cardData.isChoosed&&!this.cardData.isTopped){\n            var move = cc.moveBy(0.1,0,30);\n            move.easing(cc.easeIn(3));\n            this.node.runAction(move);\n            this.cardData.isTopped = true;\n            this.cardData.isChoosed = false;\n            this.pokerLight.enabled = false;\n        }\n    },\n    cardMoveDown(){\n        if(this.cardData.isTopped){\n            var move = cc.moveBy(0.1,0,-30);\n            move.easing(cc.easeIn(3));\n            this.node.runAction(move);\n            this.cardData.isTopped = false;\n            this.cardData.isChoosed = false;\n            this.pokerLight.enabled = false;\n        }\n    },\n    setCardDiZhu(isEnabled){\n        this.pokerDiZhu.enabled = isEnabled;\n    },\n    setCardShow(isEnabled){\n        this.pokerShow.enabled = isEnabled;\n    },\n    setMoveDown(){\n        this.cardData.isTopped = false;\n        this.cardData.isChoosed = false;\n        this.pokerLight.enabled = false;\n    },\n    setPokerBg(){\n        var self = this;\n        cc.loader.loadRes(\"cards/blank_card\",cc.SpriteFrame,function(err,spriteFrame){\n            self.pokerBg.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        })\n    },\n    setScale(scale){\n        this.node.scaleX = scale;\n        this.node.scaleY = scale;\n    },\n    convertLazarillo(cardValue){\n        var self = this;\n\n        self.pokerDiZhu.enabled = false;\n        self.pokerLight.enabled = false;\n        self.pokerShow.enabled = false;\n        self.pokerType.enabled = true;\n        self.pokerType2.enabled = true;\n\n        var numUrl = \"cards/poke_\" + cardValue;\n        cc.loader.loadRes(numUrl,cc.SpriteFrame,function(err,spriteFrame){\n            self.pokerNum.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            // console.log(\"convertLazarillo:\"+numUrl);\n        });\n\n        var imgUrl = \"cards/laizi\";\n        self.pokerNum.node.color = new cc.Color(221, 109, 30);\n        cc.loader.loadRes(imgUrl,cc.SpriteFrame,function(err,spriteFrame){\n            self.pokerType.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            self.pokerType2.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        })\n    }\n});\n"]}