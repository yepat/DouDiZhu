{"version":3,"sources":["../../../../../assets/Script/animation/assets/Script/animation/expressionControl.js"],"names":["cc","Class","extends","Component","properties","node_ske","default","type","Node","node_pic","Sprite","onLoad","width","director","getWinSize","height","node","start","show","args","beginPos","endpos","audioUrl","setPosition","p","x","y","active","self","callFunc1","callFunc","enabled","dragonDisplay","getComponent","dragonBones","ArmatureDisplay","playAnimation","vv","audioMgr","playSFX","callFunc2","destroy","move","moveTo","delay","delayTime","runAction","sequence","close"],"mappings":";;;;;;AAAA;AACA;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAW;AACPC,qBAAU,IADH;AAEPC,kBAAOP,GAAGQ;AAFH,SADH;AAKRC,kBAAW;AACPH,qBAAU,IADH;AAEPC,kBAAOP,GAAGU;AAFH;AALH,KAHP;AAaLC,UAbK,oBAaK;AACN,YAAIC,QAAQZ,GAAGa,QAAH,CAAYC,UAAZ,GAAyBF,KAArC;AACA,YAAIG,SAASf,GAAGa,QAAH,CAAYC,UAAZ,GAAyBC,MAAtC;AACA;AACA;AACA,aAAKC,IAAL,CAAUJ,KAAV,GAAkBA,KAAlB;AACA,aAAKI,IAAL,CAAUD,MAAV,GAAmBA,MAAnB;AACH,KApBI;AAqBLE,SArBK,mBAqBI;AACL;AACA;AACA;AACA;AACA;AACA;AACH,KA5BI;AA6BLC,QA7BK,gBA6BAC,IA7BA,EA6BK;AACN,YAAG,CAACA,IAAJ,EACI;;AAEJ,YAAIC,WAAWD,KAAKC,QAApB;AACA,YAAIC,SAASF,KAAKE,MAAlB;AACA,YAAIC,WAAWH,KAAKG,QAApB;;AAEA,aAAKb,QAAL,CAAcO,IAAd,CAAmBO,WAAnB,CAA+BH,QAA/B;AACA,aAAKf,QAAL,CAAckB,WAAd,CAA0BvB,GAAGwB,CAAH,CAAKH,OAAOI,CAAZ,EAAcJ,OAAOK,CAAP,GAAS,EAAvB,CAA1B;AACA,aAAKrB,QAAL,CAAcsB,MAAd,GAAuB,KAAvB;AACA,YAAIC,OAAO,IAAX;AACA,YAAIC,YAAY7B,GAAG8B,QAAH,CAAY,YAAU;AAClCF,iBAAKvB,QAAL,CAAcsB,MAAd,GAAuB,IAAvB;AACAC,iBAAKnB,QAAL,CAAcsB,OAAd,GAAwB,KAAxB;AACA,gBAAIC,gBAAgBJ,KAAKvB,QAAL,CAAc4B,YAAd,CAA2BC,YAAYC,eAAvC,CAApB;AACA,gBAAGH,aAAH,EAAiB;AACbA,8BAAcI,aAAd,CAA4B,cAA5B;AACA,oBAAGd,YAAY,EAAf,EACItB,GAAGqC,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuBjB,QAAvB;AACP;AACJ,SATe,CAAhB;AAUA,YAAIkB,YAAYxC,GAAG8B,QAAH,CAAY,YAAU;AAClCF,iBAAKZ,IAAL,CAAUyB,OAAV;AACH,SAFe,CAAhB;;AAIA,YAAIC,OAAO1C,GAAG2C,MAAH,CAAU,GAAV,EAAc3C,GAAGwB,CAAH,CAAKH,OAAOI,CAAZ,EAAcJ,OAAOK,CAAP,GAAS,EAAvB,CAAd,CAAX;AACA,YAAIkB,QAAQ5C,GAAG6C,SAAH,CAAa,CAAb,CAAZ;AACA,aAAKpC,QAAL,CAAcO,IAAd,CAAmB8B,SAAnB,CAA6B9C,GAAG+C,QAAH,CAAYL,IAAZ,EAAiBb,SAAjB,EAA2Be,KAA3B,EAAiCJ,SAAjC,CAA7B;AACH,KA1DI;AA2DLQ,SA3DK,mBA2DE;AACH,aAAKhC,IAAL,CAAUyB,OAAV;AACH;AA7DI,CAAT","file":"expressionControl.js","sourceRoot":"../../../../../assets/Script/animation","sourcesContent":["// var GameNetMgr = require(\"GameNetMgr\");\n// var config = require(\"config\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        node_ske : {\n            default : null,\n            type : cc.Node,\n        },\n        node_pic : {\n            default : null,\n            type : cc.Sprite\n        },\n    },\n    onLoad () {\n        var width = cc.director.getWinSize().width;\n        var height = cc.director.getWinSize().height;\n        // console.log(\"width:\"+width);\n        // console.log(\"height:\"+height);\n        this.node.width = width;\n        this.node.height = height;\n    },\n    start () {\n        // var args = {\n        //     beginPos:cc.p(0,0),\n        //     endpos:cc.p(300,300),\n        //     audioUrl:\"\"\n        // }\n        // this.show(args);\n    },\n    show(args){\n        if(!args)\n            return;\n\n        var beginPos = args.beginPos;\n        var endpos = args.endpos;\n        var audioUrl = args.audioUrl;\n\n        this.node_pic.node.setPosition(beginPos);\n        this.node_ske.setPosition(cc.p(endpos.x,endpos.y-50));\n        this.node_ske.active = false;\n        var self = this;\n        var callFunc1 = cc.callFunc(function(){\n            self.node_ske.active = true;\n            self.node_pic.enabled = false;\n            var dragonDisplay = self.node_ske.getComponent(dragonBones.ArmatureDisplay);\n            if(dragonDisplay){\n                dragonDisplay.playAnimation('newAnimation');\n                if(audioUrl != \"\")\n                    cc.vv.audioMgr.playSFX(audioUrl);\n            }\n        });\n        var callFunc2 = cc.callFunc(function(){\n            self.node.destroy();\n        });\n\n        var move = cc.moveTo(0.2,cc.p(endpos.x,endpos.y-50));\n        var delay = cc.delayTime(2);\n        this.node_pic.node.runAction(cc.sequence(move,callFunc1,delay,callFunc2)); \n    },\n    close(){\n        this.node.destroy();\n    }\n});\n"]}