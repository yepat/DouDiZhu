{"version":3,"sources":["../../../../assets/Script/assets/Script/HallLayerControl.js"],"names":["dialogManager","require","PlayerDetailModel","EventHelper","config","GameNetMgr","Events","cc","Class","extends","Component","properties","taskTip","default","type","Sprite","mailTip","shareTip","videoAdTip","btn_videoAd","ad_time","Label","start","self","enabled","string","timeCount","adCanTouch","getTaskUnReward","getMailUnread","getShareUnReward","AddCustomEvent","MyNode","onRefreshDataResult","onWatchAdvertisementResult","continueRoomId","callFunc","arg","roomId","sendRequest","delay","delayTime","node","runAction","sequence","Network","LoginRoomResult","onLoginRoomResult","firstLogin","showShareDialog","showAd","initWxVideoAd","device","console","log","canSeeVideoAd","color","Color","onEnable","adCdTime","onDisable","wx","rewardedVideoAd","schedule","showTimes","createRewardedVideoAd","adUnitId","onLoad","onError","onClose","res","isEnded","undefined","rewardedVideoType","videoEndFuc","time","times","fen","Math","floor","miao","strfen","strmiao","onDestroy","RemoveCustomEvent","event","data","getUserData","handleLoginRoomResult","preloadNextScene","director","preloadScene","loadScene","payload","mail_unread","weichatgame_task_unaward","weichatgame_invite_unaward","btnSetClick","showSetDialog","vv","audioMgr","playSFX","btnTaskClick","showTaskDialog","btnEmailClick","showEmailDialog","btnBagClick","showBagDialog","btnShopClick","btnShouCangClick","showShouCangDialog","btnShareClick","btnVideoAdClick","showCommonDialog","show","then","btnKefuClick","openCustomerServiceConversation","success","fail","complete","args","parseInt","m_sended","m_totalTimes","m_curTimes","sended","totalTimes","curTimes","tableInfo","IsContinueGaming","response","award","list","coins","arg1","arg2","push","coupon","noteCards","length","showAnimGetProp","watch_advertisement_cd","weichatgame_can_watch_advertisement"],"mappings":"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","file":"HallLayerControl.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\nvar dialogManager = require(\"dialogManager\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\nvar EventHelper = require(\"EventHelper\");\nvar config = require(\"config\");\nvar GameNetMgr = require(\"GameNetMgr\");\nvar Events = require(\"Events\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        taskTip : {\n            default : null,\n            type : cc.Sprite\n        },\n        mailTip : {\n            default : null,\n            type : cc.Sprite\n        },\n        shareTip : {\n            default : null,\n            type : cc.Sprite\n        },\n        videoAdTip : {\n            default : null,\n            type : cc.Sprite\n        },\n        btn_videoAd : {\n            default : null,\n            type : cc.Sprite\n        },\n        ad_time : {\n            default : null,\n            type : cc.Label\n        },\n    },\n    // onLoad () {},\n    start () {\n        var self = this;\n        this.taskTip.enabled = false;\n        this.mailTip.enabled = false;\n        this.shareTip.enabled = false;\n        this.ad_time.string = \"\";\n        this.timeCount = 0;\n        this.adCanTouch = true;\n        this.btn_videoAd.enabled = false;\n\n        if(PlayerDetailModel.getTaskUnReward()>0){\n            this.taskTip.enabled = true;\n        }\n        if(PlayerDetailModel.getMailUnread()>0){\n            this.mailTip.enabled = true;\n        }\n        if(PlayerDetailModel.getShareUnReward()>0){\n            this.shareTip.enabled = true;\n        }\n\n        EventHelper.AddCustomEvent(config.MyNode,\"RefreshDataResult\",self.onRefreshDataResult,self);\n        EventHelper.AddCustomEvent(config.MyNode,\"WatchAdvertisementResult\",self.onWatchAdvertisementResult,self);\n\n        if(PlayerDetailModel.continueRoomId != 0){\n            var callFunc = cc.callFunc(function(){\n                var arg = {};\n                arg.roomId = PlayerDetailModel.continueRoomId;\n                GameNetMgr.sendRequest(\"Game\", \"loginRoom\", arg);\n                // self.preloadNextScene();\n             });\n             var delay = cc.delayTime(0.5);\n             this.node.runAction(cc.sequence(delay,callFunc));\n             EventHelper.AddCustomEvent(config.MyNode,Events.Network.LoginRoomResult,self.onLoginRoomResult,self);\n        }\n\n        //第一次登陆弹出分享窗口\n        if(config.firstLogin){\n            config.firstLogin = false;\n            dialogManager.showShareDialog();\n        }\n\n        //微信视频广告\n        if(config.showAd == 1){\n            this.btn_videoAd.enabled = true;\n        }\n        this.initWxVideoAd();\n\n        if(config.device){\n            console.log(\">>>>>>>>device:\",config.device);\n        }\n\n        if(!config.canSeeVideoAd){\n            this.videoAdTip.enabled = false;\n            this.btn_videoAd.node.color = new cc.Color(218, 218, 218);\n        }\n    },\n    onEnable(){\n        console.log(\" HallLayer onEnable\");\n        if(config.adCdTime>1){\n            this.btn_videoAd.node.color = new cc.Color(218, 218, 218);\n            this.adCanTouch = false;\n        }\n        if(!config.canSeeVideoAd){\n            this.videoAdTip.enabled = false;\n            this.btn_videoAd.node.color = new cc.Color(218, 218, 218);\n        }\n    },\n    onDisable(){\n        console.log(\" HallLayer onDisable\");\n    },\n    initWxVideoAd(){\n        var self = this;\n        if(typeof(wx)==\"undefined\"){\n            return;\n        }\n        var rewardedVideoAd = null;\n\n        if(config.adCdTime>1){\n            this.btn_videoAd.node.color = new cc.Color(218, 218, 218);\n            this.adCanTouch = false;\n            this.videoAdTip.enabled = false;\n        }\n\n        //计时器\n        this.timeCount = config.adCdTime;\n        this.schedule(function() {\n            if(this.timeCount > 0){\n                this.timeCount -= 1;\n                this.ad_time.string = this.showTimes(this.timeCount); \n                if(this.timeCount == 0){\n                    this.ad_time.string = \"\";\n                    this.btn_videoAd.node.color = new cc.Color(255, 255, 255);\n                    this.adCanTouch = true;\n                    this.videoAdTip.enabled = true;\n                }\n            }\n        }, 1);\n\n        if(!config.rewardedVideoAd){\n            rewardedVideoAd = wx.createRewardedVideoAd({ adUnitId: 'adunit-5e51a762e521fda5' })\n        }else{\n            return;\n        }\n        rewardedVideoAd.onLoad(() => {\n            // console.log('激励视频 广告加载成功')\n        })\n        rewardedVideoAd.onError(err => {\n            // console.log(\"激励视频 拉取失败\"+err)\n        })\n        rewardedVideoAd.onClose(res => {\n            if (res && res.isEnded || res === undefined) {\n                // console.log(\"正常播放结束，可以下发游戏奖励\")\n                GameNetMgr.sendRequest(\"System\", \"WatchAdvertisement\",config.rewardedVideoType);\n                // console.log(\">>>>>rewardedVideoType:\",config.rewardedVideoType);\n                if(config.rewardedVideoType == 1){\n                    if(config.videoEndFuc)\n                        config.videoEndFuc();\n                }\n            }\n            else {\n                // console.log(\"播放中途退出，不下发游戏奖励\")\n            }\n            // cc.vv.audioMgr.playBGM(\"MusicEx_Welcome\");\n        })\n\n        config.rewardedVideoAd = rewardedVideoAd;\n    },\n    showTimes(time){\n        //秒转换分钟格式 2:00 == 120\n        var times = \"00:00\";\n        var fen = Math.floor(time/60);\n        var miao = time - fen*60; \n        var strfen = \"00\";\n        var strmiao = \"00\";\n        if(fen == 0){\n            strfen = \"00\";\n        }else if(fen < 10){\n            strfen = \"0\"+fen;\n        }else{\n            strfen = \"\"+fen;\n        }\n        if(miao == 0){\n            strmiao = \"00\";\n        }else if(miao < 10){\n            strmiao = \"0\"+miao;\n        }else{\n            strmiao = \"\"+miao;\n        }\n        times = strfen+\":\"+strmiao;\n        return times;\n    },\n    onDestroy(){\n        console.log(\" HallLayer Destroy\");\n        var self = this;\n        EventHelper.RemoveCustomEvent(config.MyNode,\"RefreshDataResult\",self.onRefreshDataResult,self);\n        EventHelper.RemoveCustomEvent(config.MyNode,\"WatchAdvertisementResult\",self.onWatchAdvertisementResult,self);\n    },\n    onLoginRoomResult(event){\n        var self = this;\n        console.log(\"登陆房间回掉---\");\n        var data = event.getUserData();\n        // console.log(data);\n        self.handleLoginRoomResult(data); \n    },\n    preloadNextScene(){\n        var self = this;\n        EventHelper.RemoveCustomEvent(config.MyNode,Events.Network.LoginRoomResult,self.onLoginRoomResult,self);\n        cc.director.preloadScene(\"GameScene\", function () {\n            // cc.log(\"Next scene preloaded\");\n            cc.director.loadScene(\"GameScene\");\n        });\n    },\n    onRefreshDataResult(event){\n        var payload = event.getUserData();\n        console.log(\"onRefreshDataResult  33333\")\n        //未读邮件数\n        if (payload.data){\n            if(payload.data.mail_unread>0){\n                this.mailTip.enabled = true;\n            }else{\n                this.mailTip.enabled = false;\n            }\n        }\n        //未领取任务数\n        if (payload.data){\n            if(payload.data.weichatgame_task_unaward>0){\n                this.taskTip.enabled = true;\n            }else{\n                this.taskTip.enabled = false;\n            }\n        }\n        //未领取分享数\n        if (payload.data){\n            if(payload.data.weichatgame_invite_unaward>0){\n                this.shareTip.enabled = true;\n            }else{\n                this.shareTip.enabled = false;\n            }\n        }\n    },\n    btnSetClick(){\n        // console.log(\"btnSetClick\");\n        dialogManager.showSetDialog();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnTaskClick(){\n        // console.log(\"btnTaskClick\");\n        dialogManager.showTaskDialog();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnEmailClick(){\n        // console.log(\"btnEmailClick\");\n        dialogManager.showEmailDialog();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnBagClick(){\n        // console.log(\"btnBagClick\");\n        dialogManager.showBagDialog();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnShopClick(){\n        // console.log(\"btnShopClick\");\n        // dialogManager.showShopDialog();\n    },\n    btnShouCangClick(){\n        console.log(\"btnShouCangClick\");\n        dialogManager.showShouCangDialog();\n    },\n    btnShareClick(){\n        // console.log(\"btnShareClick\");\n        dialogManager.showShareDialog();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnVideoAdClick(){\n        // console.log(\"btnVideoAdClick\");\n        if(!config.canSeeVideoAd){\n            dialogManager.showCommonDialog(\"温馨提示\",\"今日看广告机会已经用完，请明天再来\",null,null); \n            this.videoAdTip.enabled = false;\n            this.btn_videoAd.node.color = new cc.Color(218, 218, 218);\n            return;\n        }\n\n        if(!this.adCanTouch){\n            // console.log(\"cd中。。。。。。。。\")\n            return;\n        }\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n        if(typeof(wx)==\"undefined\"){\n            return;\n        }\n        config.rewardedVideoType = 1;\n        if(config.rewardedVideoAd){\n            var self = this;\n            var videoEndFuc  = function(){\n                self.btn_videoAd.node.color = new cc.Color(218, 218, 218);\n                self.adCanTouch = false;\n                self.videoAdTip.enabled = false;\n            }\n            config.videoEndFuc = videoEndFuc;\n            config.rewardedVideoAd.show().then();//() => cc.vv.audioMgr.stopMusic()\n        }\n    },\n    btnKefuClick(){\n        // console.log(\"btnKefuClick\");\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n        \n        if(typeof(wx)==\"undefined\"){\n            return;\n        }\n        wx.openCustomerServiceConversation({\n            success:function(res) {\n                // console.log(\"吊起会话成功>>>>>>>\");\n            },\n            fail:function(res){\n                // console.log(\"吊起会失败>>>>>>>\");\n            },\n            complete:function(res){\n                // console.log(\"会话完成>>>>>>>>\");\n            }\n        });\n    },\n    handleLoginRoomResult(event){\n        console.log(\"--进入上局未完的普通牌桌>>>\");\n        var payload = event.payload;\n        var args = {};\n        args[\"baseCoins\"] = payload[\"data\"][\"baseCoins\"];\n        args[\"rate\"] = payload[\"data\"][\"rate\"];\n        args[\"limitCoins\"] = payload[\"data\"][\"limitCoins\"];\n        args[\"rake\"] = payload[\"data\"][\"rake\"];\n        args[\"roomId\"] = payload[\"data\"][\"roomId\"];\n        args[\"rateMax\"] = payload[\"data\"][\"rateMax\"];\n        args[\"enterLimit\"] = payload[\"data\"][\"enterLimit\"];\n        args[\"emoticon\"] = payload[\"data\"][\"emoticon\"];\n        args[\"emoticon_items\"] = payload[\"data\"][\"emoticon_items\"];\n        args[\"advert\"] = payload[\"data\"][\"advert\"]; //记牌器数据\n\n        if(payload[\"data\"][\"modelId\"]){\n            args[\"modelId\"] = payload[\"data\"][\"modelId\"];\n        }\n        args[\"buys\"] = payload[\"data\"][\"buys\"];\n        args[\"givecoins\"] = null;\n\n        if(payload[\"data\"][\"isContinue\"] && parseInt(payload[\"data\"][\"isContinue\"]) == 1){\n            args[\"isContinueGaming\"] = true\n        } \n        var m_sended = payload[\"data\"][\"sendCoins\"];\n        var m_totalTimes = payload[\"data\"][\"sendCoinsTimes\"];\n        var m_curTimes = payload[\"data\"][\"sendCoinsTimesToday\"];\n\n        if(m_sended && m_sended > 0){\n            args[\"givecoins\"] = {\n                sended : m_sended,\n                totalTimes : m_totalTimes,\n                curTimes : m_curTimes,\n            };\n            //刷新用户乐豆乐券\n            // console.log(\"刷新用户乐豆乐券\");\n        }\n        config.tableInfo = args;\n\n        console.log(config.tableInfo);\n\n        config.IsContinueGaming = 1;\n        this.preloadNextScene();\n    },\n    onWatchAdvertisementResult(event){\n        // console.log(\"-----看完广告领奖\");\n        var response = event.getUserData();\n        var award = response.data;\n        var list = [];\n        if(award.coins){\n            var args = {\n                arg1:\"ledou\",\n                arg2:award.coins,\n            }\n            list.push(args);\n        } \n        if(award.coupon){\n            var args = {\n                arg1:\"lequan\",\n                arg2:award.coupon,\n            }\n            list.push(args);\n        } \n        if(award.noteCards){\n            var args = {\n                arg1:\"jipaiqi\",\n                arg2:award.noteCards,\n            }\n            list.push(args);\n        } \n        if(list.length>0){\n            dialogManager.showAnimGetProp(list);\n        }\n        config.adCdTime = award.watch_advertisement_cd;\n        this.timeCount = config.adCdTime;\n\n        config.canSeeVideoAd = award.weichatgame_can_watch_advertisement;\n    }\n});\n"]}