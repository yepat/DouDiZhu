{"version":3,"sources":["TaskCompleteShareControl.js"],"names":["GameNetMgr","require","PlayerDetailModel","config","cc","Class","extends","Component","properties","img_bg","default","type","Sprite","img_head","btn_1","Node","btn_2","opentype","lab_rate","Label","onLoad","dialogName","string","canSeeVideoAd","active","x","start","show","loadImage","maxRateShare","setHeadUrl","self","imgUrl","wxInfo","avatarUrl","headUrl","getGender","loader","loadRes","SpriteFrame","err","spriteFrame","getComponent","load","texture","closeClick","node","destroy","vv","audioMgr","playSFX","btnEnterClick","shareType","index","getRandom","shareTxt","shareImg","getShareImgPath","wx","shareAppMessage","title","imageUrl","query","uid","success","res","console","log","fail","btnKanShiPinClick","rewardedVideoType","rewardedVideoAd","then"],"mappings":"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","file":"TaskCompleteShareControl.js","sourceRoot":"../../../../../assets/Script/myCreate","sourcesContent":["var GameNetMgr = require(\"GameNetMgr\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\nvar config = require(\"config\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        img_bg : {\n            default : null,\n            type : cc.Sprite\n        },\n        img_head : {\n            default : null,\n            type : cc.Sprite\n        },\n        btn_1 : {\n            default : null,\n            type : cc.Node,\n        },\n        btn_2 : {\n            default : null,\n            type : cc.Node,\n            opentype : \"share\"\n        },\n        lab_rate : {\n            default : null,\n            type : cc.Label\n        },\n\n    },\n    onLoad () {\n        // 获取乐券和打出春天公用\n        this.dialogName = \"\";\n        this.lab_rate.string = \"\";\n\n        if(!config.canSeeVideoAd){\n            this.btn_1.active = false;\n            this.btn_2.x = 0;\n        }\n    },\n    start () {\n        // this.show(\"chuntian\");\n    },   \n    show(dialogName){\n        this.dialogName = dialogName;\n        if(dialogName == \"lequan\"){\n            config.loadImage(this.img_bg,\"p_get_lequan\");\n        }else if(dialogName == \"chuntian\"){\n            config.loadImage(this.img_bg,\"p_chuntian\");\n        }else if(dialogName == \"liansheng_3\"){\n            config.loadImage(this.img_bg,\"p_liansheng_3\");\n        }else if(dialogName == \"gaobei\"){\n            config.loadImage(this.img_bg,\"p_gaobei\");\n            this.lab_rate.string = \"\"+config.maxRateShare;\n        }\n        this.setHeadUrl();\n    },\n    setHeadUrl(){\n        var self = this;\n         //设置微信头像\n         var imgUrl=config.wxInfo.avatarUrl;\n         if(imgUrl==\"\"){\n            var headUrl = \"common/p_head_woman\";\n            if(PlayerDetailModel.getGender() == 1){\n                headUrl = \"common/p_head_man\";\n            }\n            cc.loader.loadRes(headUrl,cc.SpriteFrame,function(err,spriteFrame){\n                self.img_head.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n            return;\n        }\n\n        imgUrl = imgUrl + \"?aa=aa.jpg\";\n        cc.loader.load(imgUrl, function(err, texture){\n            self.img_head.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\n        });\n    },\n    closeClick(){\n        // console.log(\"close click\");\n        this.node.destroy();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnEnterClick(){\n        var dialogName = this.dialogName; //lequan 5  //chuntian  5\n        var shareType = 5;\n        if(dialogName == \"lequan\"){\n            shareType = 5;\n        }else if(dialogName == \"chuntian\"){\n            shareType = 5;\n        }else if(dialogName == \"liansheng_3\"){\n            shareType = 5;\n        }else if(dialogName == \"gaobei\"){\n            shareType = 5;\n        }\n\n        var index = config.getRandom(1);\n        var shareTxt = config.shareTxt[dialogName][index];\n        var shareImg = config.getShareImgPath(dialogName);\n        wx.shareAppMessage({\n            title: shareTxt,\n            imageUrl: shareImg,\n            query : \"key=\"+PlayerDetailModel.uid,\n            success(res){\n                console.log(\"---转发成功!!!\");\n                console.log(res);\n                // GameNetMgr.sendRequest(\"System\",\"ShareWxRes\",shareType);\n            },\n            fail(res){\n                console.log(\"---转发失败!!!\")\n            } \n        })\n\n        this.node.destroy();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnKanShiPinClick(){\n        console.log(\"btnKanShiPinClick\");\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n        if(typeof(wx)==\"undefined\"){\n            return;\n        }\n        config.rewardedVideoType = 3;\n        if(config.rewardedVideoAd){\n            config.rewardedVideoAd.show().then();//() => cc.vv.audioMgr.stopMusic()\n            if(this.node)\n                this.node.destroy();\n        }\n    }\n});\n"]}