{"version":3,"sources":["TaskCompleteShareControl.js"],"names":["GameNetMgr","require","PlayerDetailModel","config","cc","Class","extends","Component","properties","img_bg","default","type","Sprite","img_head","btn_1","Node","btn_2","opentype","onLoad","dialogName","start","show","loadImage","setHeadUrl","self","imgUrl","wxInfo","avatarUrl","headUrl","getGender","loader","loadRes","SpriteFrame","err","spriteFrame","getComponent","load","texture","closeClick","node","destroy","vv","audioMgr","playSFX","btnEnterClick","shareType","index","getRandom","shareTxt","shareImg","getShareImgPath","wx","shareAppMessage","title","imageUrl","query","uid","success","res","console","log","fail","btnKanShiPinClick","rewardedVideoType","rewardedVideoAd","then"],"mappings":";;;;;;AAAA,IAAIA,aAAaC,QAAQ,YAAR,CAAjB;AACA,IAAIC,oBAAoBD,QAAQ,mBAAR,CAAxB;AACA,IAAIE,SAASF,QAAQ,QAAR,CAAb;;AAEAG,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAS;AACLC,qBAAU,IADL;AAELC,kBAAOP,GAAGQ;AAFL,SADD;AAKRC,kBAAW;AACPH,qBAAU,IADH;AAEPC,kBAAOP,GAAGQ;AAFH,SALH;AASRE,eAAQ;AACJJ,qBAAU,IADN;AAEJC,kBAAOP,GAAGW;AAFN,SATA;AAaRC,eAAQ;AACJN,qBAAU,IADN;AAEJC,kBAAOP,GAAGW,IAFN;AAGJE,sBAAW;AAHP;AAbA,KAHP;AAsBLC,UAtBK,oBAsBK;AACN;AACA,aAAKC,UAAL,GAAkB,EAAlB;AACH,KAzBI;AA0BLC,SA1BK,mBA0BI;AACL;AACH,KA5BI;AA6BLC,QA7BK,gBA6BAF,UA7BA,EA6BW;AACZ,aAAKA,UAAL,GAAkBA,UAAlB;AACA,YAAGA,cAAc,QAAjB,EAA0B;AACtBhB,mBAAOmB,SAAP,CAAiB,KAAKb,MAAtB,EAA6B,cAA7B;AACH,SAFD,MAEM,IAAGU,cAAc,UAAjB,EAA4B;AAC9BhB,mBAAOmB,SAAP,CAAiB,KAAKb,MAAtB,EAA6B,YAA7B;AACH,SAFK,MAEA,IAAGU,cAAc,aAAjB,EAA+B;AACjChB,mBAAOmB,SAAP,CAAiB,KAAKb,MAAtB,EAA6B,eAA7B;AACH;AACD,aAAKc,UAAL;AACH,KAvCI;AAwCLA,cAxCK,wBAwCO;AACR,YAAIC,OAAO,IAAX;AACC;AACA,YAAIC,SAAOtB,OAAOuB,MAAP,CAAcC,SAAzB;AACA,YAAGF,UAAQ,EAAX,EAAc;AACX,gBAAIG,UAAU,cAAd;AACA,gBAAG1B,kBAAkB2B,SAAlB,MAAiC,CAApC,EAAsC;AAClCD,0BAAU,YAAV;AACH;AACDxB,eAAG0B,MAAH,CAAUC,OAAV,CAAkBH,OAAlB,EAA0BxB,GAAG4B,WAA7B,EAAyC,UAASC,GAAT,EAAaC,WAAb,EAAyB;AAC9DV,qBAAKX,QAAL,CAAcsB,YAAd,CAA2B/B,GAAGQ,MAA9B,EAAsCsB,WAAtC,GAAoDA,WAApD;AACH,aAFD;AAGA;AACH;;AAEDT,iBAASA,SAAS,YAAlB;AACArB,WAAG0B,MAAH,CAAUM,IAAV,CAAeX,MAAf,EAAuB,UAASQ,GAAT,EAAcI,OAAd,EAAsB;AACzCb,iBAAKX,QAAL,CAAcsB,YAAd,CAA2B/B,GAAGQ,MAA9B,EAAsCsB,WAAtC,GAAoD,IAAI9B,GAAG4B,WAAP,CAAmBK,OAAnB,CAApD;AACH,SAFD;AAGH,KA3DI;AA4DLC,cA5DK,wBA4DO;AACR;AACA,aAAKC,IAAL,CAAUC,OAAV;AACApC,WAAGqC,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,QAAvB;AACH,KAhEI;AAiELC,iBAjEK,2BAiEU;AACX,YAAIzB,aAAa,KAAKA,UAAtB,CADW,CACuB;AAClC,YAAI0B,YAAY,CAAhB;AACA,YAAG1B,cAAc,QAAjB,EAA0B;AACtB0B,wBAAY,CAAZ;AACH,SAFD,MAEM,IAAG1B,cAAc,UAAjB,EAA4B;AAC9B0B,wBAAY,CAAZ;AACH,SAFK,MAEA,IAAG1B,cAAc,aAAjB,EAA+B;AACjC0B,wBAAY,CAAZ;AACH;;AAED,YAAIC,QAAQ3C,OAAO4C,SAAP,CAAiB,CAAjB,CAAZ;AACA,YAAIC,WAAW7C,OAAO6C,QAAP,CAAgB7B,UAAhB,EAA4B2B,KAA5B,CAAf;AACA,YAAIG,WAAW9C,OAAO+C,eAAP,CAAuB/B,UAAvB,CAAf;AACAgC,WAAGC,eAAH,CAAmB;AACfC,mBAAOL,QADQ;AAEfM,sBAAUL,QAFK;AAGfM,mBAAQ,SAAOrD,kBAAkBsD,GAHlB;AAIfC,mBAJe,mBAIPC,GAJO,EAIH;AACRC,wBAAQC,GAAR,CAAY,YAAZ;AACAD,wBAAQC,GAAR,CAAYF,GAAZ;AACA;AACH,aARc;AASfG,gBATe,gBASVH,GATU,EASN;AACLC,wBAAQC,GAAR,CAAY,YAAZ;AACH;AAXc,SAAnB;;AAcA,aAAKrB,IAAL,CAAUC,OAAV;AACApC,WAAGqC,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,QAAvB;AACH,KA/FI;AAgGLmB,qBAhGK,+BAgGc;AACfH,gBAAQC,GAAR,CAAY,mBAAZ;AACAxD,WAAGqC,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,QAAvB;AACA,YAAG,OAAOQ,EAAP,IAAY,WAAf,EAA2B;AACvB;AACH;AACDhD,eAAO4D,iBAAP,GAA2B,CAA3B;AACA,YAAG5D,OAAO6D,eAAV,EAA0B;AACtB7D,mBAAO6D,eAAP,CAAuB3C,IAAvB,GAA8B4C,IAA9B,GADsB,CACe;AACrC,gBAAG,KAAK1B,IAAR,EACI,KAAKA,IAAL,CAAUC,OAAV;AACP;AACJ;AA5GI,CAAT","file":"TaskCompleteShareControl.js","sourceRoot":"../../../../../assets/Script/myCreate","sourcesContent":["var GameNetMgr = require(\"GameNetMgr\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\nvar config = require(\"config\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        img_bg : {\n            default : null,\n            type : cc.Sprite\n        },\n        img_head : {\n            default : null,\n            type : cc.Sprite\n        },\n        btn_1 : {\n            default : null,\n            type : cc.Node,\n        },\n        btn_2 : {\n            default : null,\n            type : cc.Node,\n            opentype : \"share\"\n        },\n    },\n    onLoad () {\n        // 获取乐券和打出春天公用\n        this.dialogName = \"\";\n    },\n    start () {\n        // this.show(\"chuntian\");\n    },   \n    show(dialogName){\n        this.dialogName = dialogName;\n        if(dialogName == \"lequan\"){\n            config.loadImage(this.img_bg,\"p_get_lequan\");\n        }else if(dialogName == \"chuntian\"){\n            config.loadImage(this.img_bg,\"p_chuntian\");\n        }else if(dialogName == \"liansheng_3\"){\n            config.loadImage(this.img_bg,\"p_liansheng_3\");\n        }\n        this.setHeadUrl();\n    },\n    setHeadUrl(){\n        var self = this;\n         //设置微信头像\n         var imgUrl=config.wxInfo.avatarUrl;\n         if(imgUrl==\"\"){\n            var headUrl = \"p_head_woman\";\n            if(PlayerDetailModel.getGender() == 1){\n                headUrl = \"p_head_man\";\n            }\n            cc.loader.loadRes(headUrl,cc.SpriteFrame,function(err,spriteFrame){\n                self.img_head.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n            return;\n        }\n\n        imgUrl = imgUrl + \"?aa=aa.jpg\";\n        cc.loader.load(imgUrl, function(err, texture){\n            self.img_head.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\n        });\n    },\n    closeClick(){\n        // console.log(\"close click\");\n        this.node.destroy();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnEnterClick(){\n        var dialogName = this.dialogName; //lequan 5  //chuntian  5\n        var shareType = 5;\n        if(dialogName == \"lequan\"){\n            shareType = 5;\n        }else if(dialogName == \"chuntian\"){\n            shareType = 5;\n        }else if(dialogName == \"liansheng_3\"){\n            shareType = 5;\n        }\n\n        var index = config.getRandom(1);\n        var shareTxt = config.shareTxt[dialogName][index];\n        var shareImg = config.getShareImgPath(dialogName);\n        wx.shareAppMessage({\n            title: shareTxt,\n            imageUrl: shareImg,\n            query : \"key=\"+PlayerDetailModel.uid,\n            success(res){\n                console.log(\"---转发成功!!!\");\n                console.log(res);\n                // GameNetMgr.sendRequest(\"System\",\"ShareWxRes\",shareType);\n            },\n            fail(res){\n                console.log(\"---转发失败!!!\")\n            } \n        })\n\n        this.node.destroy();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnKanShiPinClick(){\n        console.log(\"btnKanShiPinClick\");\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n        if(typeof(wx)==\"undefined\"){\n            return;\n        }\n        config.rewardedVideoType = 3;\n        if(config.rewardedVideoAd){\n            config.rewardedVideoAd.show().then();//() => cc.vv.audioMgr.stopMusic()\n            if(this.node)\n                this.node.destroy();\n        }\n    }\n});\n"]}