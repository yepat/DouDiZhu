{"version":3,"sources":["AppStart.js"],"names":["config","require","ByteArray","Protocol","EventHelper","PlayerDetailModel","initMgr","cc","vv","http","net","Class","extends","Component","properties","labLoading","default","type","Label","onLoad","getServerInfo","myNode","Node","addPersistRootNode","params","env","ver","channel","udid","pver","pchannel","presver","self","xhr","complete","fnRequest","console","log","string","sendRequest","ret","GlobalRouterUpdate","GlobalRouter","host","port","connectGameServer","director","setTimeout","fn","abort","connectGameServer2","ip","onConnectOK","onConnectFailed","connect","sendRegist","setInterval","isPinging","sendHeartBeat","bind","AddCustomEvent","MyNode","event","data","getUserData","temppassword","password","sendLogin","setPlayerDetailModel","t","Request","HeartBeat","Alive","info","JSON","stringify","view","getView","Command","send","Login","Regist","d","u","v","c","e","Guest","p","tv","wn","wurl","response","room","Response","OK","isDevData","i","length","rooms","j","modelId","playGameId","playGameMsg","nickname","uid","parseInt","coin","gold","gender","word","coolnum","level","matches","win","checkCode","propDress","score","verfile","vertips","mailUnread","coupon","age","contact","contacts","wechat","lottery","checkinUndo","task1Unaward","task2Unaward","chargeRate","propItems","rewardList","wechatImg","title","isDev","loadScene"],"mappings":"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","file":"AppStart.js","sourceRoot":"../../../../../assets/Script/gameNetwork","sourcesContent":["var config = require(\"config\");\r\nvar ByteArray = require(\"ByteArray\");\r\nvar Protocol = require(\"Protocol\");\r\nvar EventHelper = require(\"EventHelper\");\r\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\r\n\r\nfunction initMgr(){\r\n    cc.vv = {};\r\n    cc.vv.http = require(\"HTTP\");\r\n    cc.vv.net = require(\"GameNet\");\r\n    // cc.vv.net = require(\"Net\");\r\n}\r\n   \r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        labLoading : {\r\n            default : null,\r\n            type : cc.Label\r\n        },\r\n    },\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        initMgr();\r\n        this.getServerInfo();\r\n\r\n        //设置常驻节点\r\n        var myNode = new cc.Node(\"myNode\");\r\n        EventHelper.addPersistRootNode(myNode);\r\n    },\r\n    getServerInfo:function(){\r\n        var params = {};\r\n        params.env = \"prod\";\r\n        params.ver = \"1.0.0\";\r\n        params.channel = \"weichatgame\";\r\n        params.udid = \"udid\";\r\n        params.pver = \"1.0.0\";\r\n        params.pchannel = \"weichatgame\";\r\n        params.presver = \"1.0.0\";\r\n        \r\n        var self = this;\r\n        var xhr = null;\r\n        var complete = false;\r\n        var fnRequest = function(){\r\n            console.log(\"正在连接服务器...\");\r\n            self.labLoading.string = \"正在连接服务器...\";\r\n            xhr = cc.vv.http.sendRequest(\"\",params,function(ret){\r\n                console.log(\"连接成功\");\r\n                self.labLoading.string = \"连接成功...\";\r\n                xhr = null;\r\n                complete = true;\r\n                config.GlobalRouterUpdate(ret);\r\n                console.log(\"host:\"+config.GlobalRouter.host+\":\"+config.GlobalRouter.port)\r\n\r\n                self.connectGameServer();\r\n                // self.connectGameServer2();\r\n\r\n            },config.GlobalRouter.director);\r\n            setTimeout(fn,5000);            \r\n        };\r\n        \r\n        var fn = function(){\r\n            if(!complete){\r\n                if(xhr){\r\n                    xhr.abort();\r\n                    console.log(\"连接失败，即将重试...\");\r\n                    self.labLoading.string = \"连接失败，即将重试...\";\r\n                    setTimeout(function(){\r\n                        fnRequest();\r\n                    },5000);\r\n                }\r\n                else{\r\n                    fnRequest();\r\n                }\r\n            }\r\n        };\r\n        fn();\r\n    },\r\n    connectGameServer2(){\r\n\r\n        console.log(\">>>>>>>>>>>>connectGameServer\")\r\n        // this.dissoveData = null;\r\n        cc.vv.net.ip = config.GlobalRouter.host + \":\" + config.GlobalRouter.port;\r\n        console.log(cc.vv.net.ip);\r\n        var self = this;\r\n\r\n        var onConnectOK = function(){\r\n            console.log(\"onConnectOK\");\r\n            // var sd = {\r\n            //     token:data.token,\r\n            //     roomid:data.roomid,\r\n            //     time:data.time,\r\n            //     sign:data.sign,\r\n            // };\r\n            // cc.vv.net.send(\"login\",sd);\r\n        };\r\n        \r\n        var onConnectFailed = function(){\r\n            console.log(\"failed.\");\r\n            // cc.vv.wc.hide();\r\n        };\r\n        // cc.vv.wc.show(\"正在进入房间\");\r\n        cc.vv.net.connect(onConnectOK,onConnectFailed);\r\n    },\r\n    \r\n    connectGameServer(){\r\n        \r\n        var self = this;\r\n        \r\n        cc.vv.net.connect(config.GlobalRouter.host,config.GlobalRouter.port,function(ret){\r\n            //WebSocket连接成功\r\n            self.sendRegist();\r\n        });\r\n\r\n        setInterval(function(){\r\n            if( cc.vv.net.isPinging)\r\n                self.sendHeartBeat();\r\n        }.bind(this),10000);\r\n\r\n        EventHelper.AddCustomEvent(config.MyNode,\"Regist\",function(event){\r\n            console.log(\"Regist---\");\r\n            // console.log(event.getUserData());\r\n\r\n            var data = event.getUserData();\r\n            config.temppassword = data.data.data.password;\r\n            self.sendLogin();\r\n        });\r\n\r\n        EventHelper.AddCustomEvent(config.MyNode,\"HeartBeat\",function(event){\r\n            // console.log(\"HeartBeat---\");\r\n            // console.log(event.getUserData());\r\n        });\r\n\r\n        EventHelper.AddCustomEvent(config.MyNode,\"LoginOK\",function(event){\r\n            console.log(\"LoginOK---\");\r\n            console.log(event.getUserData());\r\n            var data = event.getUserData();\r\n            self.setPlayerDetailModel(data);\r\n        });\r\n\r\n\r\n    },\r\n    sendHeartBeat(){\r\n        //发送心跳\r\n        // var info = '{\"t\":0}';\r\n        var params = {};\r\n        params.t = Protocol.Request.HeartBeat.Alive;\r\n        var info = JSON.stringify(params);\r\n        var view = ByteArray.getView(info,Protocol.Command.HeartBeat);\r\n        cc.vv.net.send(\"HeartBeat\",view);\r\n    },\r\n    sendRegist(){\r\n        //注册请求\r\n        // var info = '{\"t\":6,\"type\":\"guest\",\"u\":\"50ee8041a7fd8baa6348252ea114432bb3be23bd\",\"d\":\"23c686a260c586ee03ea5fb2b8252770\",\"v\":\"2.1.1\",\"c\":\"weichatgame\",\"e\":\"defaults\"}';\r\n        var params = {};\r\n        params.t = Protocol.Request.Login.Regist;\r\n        params.d = \"23c686a260c586ee03ea5fb2b8252770\";\r\n        params.u = \"50ee8041a7fd8baa6348252ea114432bb3be23bd\";\r\n        params.v = \"2.1.1\";\r\n        params.c = \"sjweichat\";\r\n        params.e = \"defaults\";\r\n        params.type = \"guest\";\r\n        var info = JSON.stringify(params);\r\n        var view = ByteArray.getView(info,Protocol.Command.Login);\r\n        cc.vv.net.send(\"Regist\",view);  \r\n    },\r\n    sendLogin(){\r\n        var params = {};\r\n        params.t = Protocol.Request.Login.Guest;\r\n        params.d = \"23c686a260c586ee03ea5fb2b8252770\";\r\n        params.p = config.temppassword;\r\n        params.c = \"sjweichat\";\r\n        params.v = \"2.1.1\";\r\n        params.tv = 1;\r\n        params.e = \"defaults\";\r\n        params.wn = \"\";\r\n        params.wurl = \"\";\r\n\r\n        var info = JSON.stringify(params);\r\n        var view = ByteArray.getView(info,Protocol.Command.Login);\r\n        cc.vv.net.send(\"Login\",view);  \r\n    },\r\n    setPlayerDetailModel(response){\r\n        var room = response.data.room\r\n        console.log(room);\r\n\r\n        if(response[\"code\"] == Protocol.Response.Login.OK){\r\n            var isDevData = response[\"data\"][\"isDev\"];\r\n            if (isDevData && typeof(isDevData) == \"number\"){\r\n            }else{\r\n                isDevData = 0\r\n            }\r\n            for(var i=0;i<room.length;i++){\r\n                if(room[i].rooms){\r\n                    for(var j=0;j<room[i].rooms.length;j++){\r\n                        room[i].rooms[j].modelId = room[i].modelId;\r\n                    }\r\n                }\r\n            }\r\n            config.playGameId = response[\"data\"].playGameId;\r\n            config.playGameMsg = response[\"data\"].playGameMsg;\r\n\r\n    \r\n            PlayerDetailModel.nickname = response[\"data\"][\"nick\"];\r\n            PlayerDetailModel.uid = parseInt(response[\"data\"][\"uid\"]);\r\n            PlayerDetailModel.coin = parseInt(response[\"data\"][\"coins\"]);\r\n            PlayerDetailModel.gold = parseInt(response[\"data\"][\"gold\"]);\r\n            PlayerDetailModel.gender = parseInt(response[\"data\"][\"sex\"]);\r\n            PlayerDetailModel.word = response[\"data\"][\"word\"];\r\n            PlayerDetailModel.coolnum = response[\"data\"][\"cool_num\"];\r\n            PlayerDetailModel.level = parseInt(response[\"data\"][\"level\"]);\r\n            PlayerDetailModel.matches = parseInt(response[\"data\"][\"gameData\"][\"matches\"]);\r\n            PlayerDetailModel.win = parseInt(response[\"data\"][\"gameData\"][\"win\"]);\r\n            PlayerDetailModel.checkCode = response[\"data\"][\"check_code\"];\r\n            PlayerDetailModel.propDress = response[\"data\"][\"propDress\"];\r\n            PlayerDetailModel.score = parseInt(response[\"data\"][\"score\"]);\r\n\r\n            PlayerDetailModel.verfile = parseInt(response[\"data\"][\"verfile\"]);\r\n            PlayerDetailModel.vertips = parseInt(response[\"data\"][\"vertips\"]);\r\n            PlayerDetailModel.mailUnread = parseInt(response[\"data\"][\"mail_unread\"]);\r\n            PlayerDetailModel.coupon = parseInt(response[\"data\"][\"coupon\"]);\r\n            PlayerDetailModel.age = parseInt(response[\"data\"][\"age\"]);\r\n            PlayerDetailModel.room = room;\r\n            PlayerDetailModel.contact = response[\"data\"][\"contact\"];\r\n            PlayerDetailModel.contacts = response[\"data\"][\"contacts\"];\r\n            PlayerDetailModel.wechat = response[\"data\"][\"wechat\"];\r\n\r\n            PlayerDetailModel.lottery = parseInt(response[\"data\"][\"lottery\"]);\r\n            PlayerDetailModel.checkinUndo = parseInt(response[\"data\"][\"checkin_undo\"]);\r\n            PlayerDetailModel.task1Unaward = parseInt(response[\"data\"][\"task1_unaward\"]);\r\n            PlayerDetailModel.task2Unaward = parseInt(response[\"data\"][\"task2_unaward\"]);\r\n            PlayerDetailModel.chargeRate = parseInt(response[\"data\"][\"charge_rate\"]);\r\n            PlayerDetailModel.propItems = response[\"data\"][\"propItems\"];\r\n\r\n            PlayerDetailModel.rewardList = response[\"data\"][\"n_reward_list\"];\r\n\r\n            PlayerDetailModel.wechatImg = response[\"data\"][\"img\"];\r\n            PlayerDetailModel.title = response[\"data\"][\"title\"];\r\n            PlayerDetailModel.isDev = isDevData;\r\n\r\n\r\n            this.labLoading.string = \"进入游戏大厅...\";\r\n\r\n            cc.director.loadScene(\"HallScene\");\r\n\r\n            // EventHelper.DispatchCustomEvent(config.MyNode,\"EnterHallOK\",{});\r\n            // console.log(PlayerDetailModel);\r\n        }else{\r\n            console.log(\"登陆游戏失败！\");\r\n\r\n            this.labLoading.string = \"登陆游戏失败！\";\r\n        }\r\n\r\n    }\r\n});\r\n"]}