{"version":3,"sources":["AppStart.js"],"names":["config","require","ByteArray","Protocol","EventHelper","PlayerDetailModel","dialogManager","MD5","initMgr","cc","vv","http","net","Class","extends","Component","properties","labLoading","default","type","Label","onLoad","shareUid","wx","getServerInfo","weixinLogin","myNode","Node","addPersistRootNode","isShow","console","log","showShareMenu","withShareTicket","loader","loadRes","err","data","onShareAppMessage","res","title","imageUrl","url","query","uid","success","fail","self","login","ress","code","_url","params","game_id","version","sign","_sign","getSign","toUpperCase","xhr","complete","fnRequest","sendRequest","ret","JSON","stringify","sdkuid","user_id","setTimeout","fn","abort","errMsg","endData","hex_md5","env","ver","channel","udid","pver","pchannel","presver","string","GlobalRouterUpdate","GlobalRouter","host","port","connectGameServer","director","connect","sendRegist","getWxUserInfo","ConnectionClosedShow","loadScene","setInterval","isPinging","sendHeartBeat","bind","AddCustomEvent","MyNode","onRegist","onHeartBeat","onLoginOK","launch","getLaunchOptionsSync","key","getUserInfo","userInfo","UpdateWxInfo","event","getUserData","temppassword","password","sendLogin","setPlayerDetailModel","t","Request","HeartBeat","Alive","send","Command","Login","Regist","d","u","v","c","e","OpenUDIDEncryptToken","_d","sdkid","Guest","p","tv","wn","wxInfo","nickName","wurl","avatarUrl","f","invite","response","room","Response","OK","isDevData","i","length","rooms","j","modelId","playGameId","playGameMsg","nickname","parseInt","coin","gold","gender","word","coolnum","level","matches","win","checkCode","propDress","score","verfile","vertips","mailUnread","coupon","age","contact","contacts","wechat","lottery","checkinUndo","task1Unaward","task2Unaward","chargeRate","propItems","rewardList","wechatImg","isDev","preloadNextScene","showCommonDialog","preloadScene"],"mappings":"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","file":"AppStart.js","sourceRoot":"../../../../../assets/Script/gameNetwork","sourcesContent":["var config = require(\"config\");\nvar ByteArray = require(\"ByteArray\");\nvar Protocol = require(\"Protocol\");\nvar EventHelper = require(\"EventHelper\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\nvar dialogManager = require(\"dialogManager\");\nvar MD5 = require(\"md5\");\n\nfunction initMgr(){\n    cc.vv = {};\n    cc.vv.http = require(\"HTTP\");\n    cc.vv.net = require(\"GameNet\");\n}\n   \ncc.Class({\n    extends: cc.Component,\n    properties: {\n        labLoading : {\n            default : null,\n            type : cc.Label\n        },\n    },\n    // use this for initialization\n    onLoad: function () {\n        initMgr();\n        this.shareUid = 0;\n        if(typeof(wx)==\"undefined\"){\n            this.getServerInfo();\n        }else{\n            this.weixinLogin();\n        }\n        //设置常驻节点\n        var myNode = new cc.Node(\"myNode\");\n        EventHelper.addPersistRootNode(myNode);\n        this.isShow = false;\n\n        console.log(\"typeof(wx):\"+typeof(wx));\n        if(typeof(wx)==\"undefined\"){return;}\n\n        wx.showShareMenu({\n            withShareTicket: true\n        });\n        cc.loader.loadRes(\"shareImg\",function(err,data){\n            wx.onShareAppMessage(function(res){\n                return {\n                    title: \"小伙伴们帮帮忙，小手一点助我拿豆！\",\n                    imageUrl: data.url,\n                    query :  \"key=\"+PlayerDetailModel.uid,\n                    success(res){\n                        console.log(\"转发成功!!!\")\n                        console.log(res);\n                    },\n                    fail(res){\n                        console.log(\"转发失败!!!\")\n                    } \n                }\n            })\n        });\n    },\n    weixinLogin(){\n        var self = this;\n        wx.login({\n            success: function(ress) {\n                if (ress.code) {\n                    var _url = \"https://sdk.youjoy.tv/Api/ThirdParty/WxSmallProgram/Login\";\n                    var params = {};\n                    params.game_id = 1034;\n                    params.version = \"1.0.0\";\n                    params.code = ress.code;\n                    var sign = \"code=\" + ress.code + \"&\" + \"game_id=\" + \"1034\" + \"&\" + \"version=\"+ \"1.0.0\"\n                    console.log(\"sign:\"+sign);\n                    var _sign = self.getSign(sign);\n                    params._sign = _sign.toUpperCase();\n\n                    var xhr = null;\n                    var complete = false;\n                    var fnRequest = function(){\n                        console.log(\"sdk.youjoy.tv 正在连接服务器...\");\n                        xhr = cc.vv.http.sendRequest(\"\",params,function(ret){\n                            xhr = null;\n                            complete = true;\n                            console.log(\"connectSdkServer = \" + JSON.stringify(ret));\n                            self.sdkuid = ret.data.user_id;\n                            self.getServerInfo();\n                        },_url);\n                        setTimeout(fn,5000);            \n                    };\n                    \n                    var fn = function(){\n                        if(!complete){\n                            if(xhr){\n                                xhr.abort();\n                                console.log(\"sdk.youjoy.tv 连接失败，即将重试...\");\n                                setTimeout(function(){\n                                    fnRequest();\n                                },5000);\n                            }\n                            else{\n                                fnRequest();\n                            }\n                        }\n                    };\n                    fn();\n                } else {\n                  console.log('登录失败！' + res.errMsg)\n                }\n            }\n        });\n    },\n    getSign(sign){\n        var endData = MD5.hex_md5(sign+\"79fad6f7510d86aabe01a7006153ddd0\");\n        return endData;\n    },\n    getServerInfo:function(){\n        var params = {};\n        params.env = \"prod\";\n        params.ver = \"2.0.0\";\n        params.channel = \"weichatgame\";\n        params.udid = \"udid\";\n        params.pver = \"2.0.0\";\n        params.pchannel = \"weichatgame\";\n        params.presver = \"2.0.0\";\n        \n        var self = this;\n        var xhr = null;\n        var complete = false;\n        var fnRequest = function(){\n            console.log(\"正在连接服务器...\");\n            self.labLoading.string = \"正在连接服务器...\";\n            xhr = cc.vv.http.sendRequest(\"\",params,function(ret){\n                console.log(\"连接成功\");\n                self.labLoading.string = \"连接成功...\";\n                xhr = null;\n                complete = true;\n                config.GlobalRouterUpdate(ret);\n                console.log(\"host:\"+config.GlobalRouter.host+\":\"+config.GlobalRouter.port);\n                self.connectGameServer();\n            },config.GlobalRouter.director);\n            setTimeout(fn,5000);            \n        };\n        \n        var fn = function(){\n            if(!complete){\n                if(xhr){\n                    xhr.abort();\n                    console.log(\"连接失败，即将重试...\");\n                    self.labLoading.string = \"连接失败，即将重试...\";\n                    setTimeout(function(){\n                        fnRequest();\n                    },5000);\n                }\n                else{\n                    fnRequest();\n                }\n            }\n        };\n        fn();\n    },\n    connectGameServer(){\n        var self = this;\n        cc.vv.net.connect(config.GlobalRouter.host,config.GlobalRouter.port,function(ret){\n            //WebSocket连接成功\n            if(typeof(wx)==\"undefined\"){\n                self.sendRegist();\n            }else{\n                self.getWxUserInfo();\n            }\n        });\n\n        var ConnectionClosedShow = function(){\n            self.isShow = true;\n            // dialogManager.showCommonDialog(\"提示\",\"与服务器断开连接！\",function(){\n            //     self.isShow = false;\n            //     cc.director.loadScene(\"LoadingScene\");\n            // });\n            cc.director.loadScene(\"LoadingScene\");\n        }\n\n        setInterval(function(){\n            if(cc.vv.net.isPinging){\n                self.sendHeartBeat();\n            }else{\n                if(!self.isShow)\n                    ConnectionClosedShow();\n            }     \n        }.bind(this),10000);\n\n        EventHelper.AddCustomEvent(config.MyNode,\"Regist\",self.onRegist,self);\n        EventHelper.AddCustomEvent(config.MyNode,\"HeartBeat\",self.onHeartBeat,self);\n        EventHelper.AddCustomEvent(config.MyNode,\"LoginOK\",self.onLoginOK,self); \n    },\n    getWxUserInfo(){\n        var self = this;\n        var launch = wx.getLaunchOptionsSync();\n        console.log(\"launch =  \" + JSON.stringify(launch));\n        self.shareUid =  launch.query.key;\n        console.log(\"shareUid =  \" + self.shareUid);\n\n        wx.getUserInfo({\n            success: function (res) {\n               console.log(\"res.userInfo = \" + JSON.stringify(res.userInfo));\n               config.UpdateWxInfo(res.userInfo);\n               self.sendRegist();\n             },\n        });\n    },\n    onRegist(event){\n        var self = this;\n        console.log(\"Regist---\");\n        var data = event.getUserData();\n        config.temppassword = data.data.data.password;\n        self.sendLogin();\n    },\n    onHeartBeat(event){\n        // console.log(\"HeartBeat---\");\n    },\n    onLoginOK(event){\n        var self = this;\n        console.log(\"LoginOK---\");\n        console.log(event.getUserData());\n        var data = event.getUserData();\n        self.setPlayerDetailModel(data);\n    },\n    sendHeartBeat(){\n        //发送心跳\n        var params = {};\n        params.t = Protocol.Request.HeartBeat.Alive;\n        cc.vv.net.send(\"HeartBeat\",Protocol.Command.HeartBeat,params);\n    },\n    sendRegist(){\n        //注册请求\n        if(typeof(wx)==\"undefined\"){\n            var params = {};\n            params.t = Protocol.Request.Login.Regist;\n            params.d = MD5.hex_md5(\"yepat123\");\n            params.u = \"50ee8041a7fd8baa6348252ea114432bb3be23bd\";\n            params.v = \"2.0.0\";\n            params.c = \"weichatgame\";\n            params.e = \"defaults\";\n            params.type = \"guest\";\n            // params.sdkid = self.sdkuid;\n            cc.vv.net.send(\"Regist\",Protocol.Command.Login,params);\n            return;\n        }\n        var self = this;\n        var code = self.sdkuid+config.OpenUDIDEncryptToken;\n        var _d = MD5.hex_md5(code);\n        var params = {};\n        params.t = Protocol.Request.Login.Regist;\n        params.d = _d;\n        params.u = \"50ee8041a7fd8baa6348252ea114432bb3be23bd\";\n        params.v = \"2.0.0\";\n        params.c = \"weichatgame\";\n        params.e = \"defaults\";\n        params.type = \"third\";\n        params.sdkid = self.sdkuid;\n        cc.vv.net.send(\"Regist\",Protocol.Command.Login,params);  \n    },\n    sendLogin(){\n        if(typeof(wx)==\"undefined\"){\n            var params = {};\n            params.t = Protocol.Request.Login.Guest;\n            params.d = MD5.hex_md5(\"yepat123\");\n            params.p = config.temppassword;\n            params.c = \"weichatgame\";\n            params.v = \"2.0.0\";\n            params.tv = 1;\n            params.e = \"defaults\";\n            params.wn = config.wxInfo.nickName;\n            params.wurl = config.wxInfo.avatarUrl;\n            cc.vv.net.send(\"Login\",Protocol.Command.Login,params); \n            return;\n        }\n        var self = this;\n        var params = {};\n        params.t = Protocol.Request.Login.Guest;\n        params.d = self.sdkuid;\n        params.p = config.temppassword;\n        params.c = \"weichatgame\";\n        params.v = \"2.0.0\";\n        params.tv = 1;\n        params.e = \"defaults\";\n        params.f = self.sdkuid;\n        params.wn = config.wxInfo.nickName;\n        params.wurl = config.wxInfo.avatarUrl;\n        params.invite = self.shareUid;\n        cc.vv.net.send(\"Login\",Protocol.Command.Login,params);  \n    },\n    setPlayerDetailModel(response){\n        var room = response.data.room\n        console.log(room);\n        if(response[\"code\"] == Protocol.Response.Login.OK){\n            var isDevData = response[\"data\"][\"isDev\"];\n            if (isDevData && typeof(isDevData) == \"number\"){\n            }else{\n                isDevData = 0\n            }\n            for(var i=0;i<room.length;i++){\n                if(room[i].rooms){\n                    for(var j=0;j<room[i].rooms.length;j++){\n                        room[i].rooms[j].modelId = room[i].modelId;\n                    }\n                }\n            }\n            config.playGameId = response[\"data\"].playGameId;\n            config.playGameMsg = response[\"data\"].playGameMsg;\n\n    \n            PlayerDetailModel.nickname = response[\"data\"][\"nick\"];\n            PlayerDetailModel.uid = parseInt(response[\"data\"][\"uid\"]);\n            PlayerDetailModel.coin = parseInt(response[\"data\"][\"coins\"]);\n            PlayerDetailModel.gold = parseInt(response[\"data\"][\"gold\"]);\n            PlayerDetailModel.gender = parseInt(response[\"data\"][\"sex\"]);\n            PlayerDetailModel.word = response[\"data\"][\"word\"];\n            PlayerDetailModel.coolnum = response[\"data\"][\"cool_num\"];\n            PlayerDetailModel.level = parseInt(response[\"data\"][\"level\"]);\n            PlayerDetailModel.matches = parseInt(response[\"data\"][\"gameData\"][\"matches\"]);\n            PlayerDetailModel.win = parseInt(response[\"data\"][\"gameData\"][\"win\"]);\n            PlayerDetailModel.checkCode = response[\"data\"][\"check_code\"];\n            PlayerDetailModel.propDress = response[\"data\"][\"propDress\"];\n            PlayerDetailModel.score = parseInt(response[\"data\"][\"score\"]);\n\n            PlayerDetailModel.verfile = parseInt(response[\"data\"][\"verfile\"]);\n            PlayerDetailModel.vertips = parseInt(response[\"data\"][\"vertips\"]);\n            PlayerDetailModel.mailUnread = parseInt(response[\"data\"][\"mail_unread\"]);\n            PlayerDetailModel.coupon = parseInt(response[\"data\"][\"coupon\"]);\n            PlayerDetailModel.age = parseInt(response[\"data\"][\"age\"]);\n            PlayerDetailModel.room = room;\n            PlayerDetailModel.contact = response[\"data\"][\"contact\"];\n            PlayerDetailModel.contacts = response[\"data\"][\"contacts\"];\n            PlayerDetailModel.wechat = response[\"data\"][\"wechat\"];\n\n            PlayerDetailModel.lottery = parseInt(response[\"data\"][\"lottery\"]);\n            PlayerDetailModel.checkinUndo = parseInt(response[\"data\"][\"checkin_undo\"]);\n            PlayerDetailModel.task1Unaward = parseInt(response[\"data\"][\"task1_unaward\"]);\n            PlayerDetailModel.task2Unaward = parseInt(response[\"data\"][\"task2_unaward\"]);\n            PlayerDetailModel.chargeRate = parseInt(response[\"data\"][\"charge_rate\"]);\n            PlayerDetailModel.propItems = response[\"data\"][\"propItems\"];\n\n            PlayerDetailModel.rewardList = response[\"data\"][\"n_reward_list\"];\n\n            PlayerDetailModel.wechatImg = response[\"data\"][\"img\"];\n            PlayerDetailModel.title = response[\"data\"][\"title\"];\n            PlayerDetailModel.isDev = isDevData;\n\n            console.log(\"进入游戏大厅...uid:\"+parseInt(response[\"data\"][\"uid\"]));\n            this.labLoading.string = \"进入游戏大厅...\";\n            this.preloadNextScene();\n        }else{\n            console.log(\"登陆游戏失败！\");\n            this.labLoading.string = \"登陆游戏失败！\";\n            dialogManager.showCommonDialog(\"提示\",\"登陆游戏失败！\",function(){\n                cc.director.loadScene(\"LoadingScene\");\n            });\n            \n        }\n    },\n     //\n     preloadNextScene(){\n        cc.director.preloadScene(\"HallScene\", function () {\n            cc.log(\"Next scene preloaded\");\n            cc.director.loadScene(\"HallScene\");\n        });\n    }\n});\n"]}