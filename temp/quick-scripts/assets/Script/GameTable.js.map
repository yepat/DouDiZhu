{"version":3,"sources":["GameTable.js"],"names":["PokerData","require","PokerControl","config","CardUtil","PopCardUtil","opratOutCardControl","dialogManager","PlayerDetailModel","Player","EventHelper","GameNetMgr","Events","cc","Class","extends","Component","properties","pokerCard","default","type","Prefab","pokerLayerLeft","Node","pokerLayerRight","pokerLayerMy","chupaiBtn","buchuBtn","canvas","opratOutCard","leftPlayer","rightPlayer","onLoad","start","self","sceneWidth","director","getWinSize","width","scene","getScene","mySeatId","preSendCards","preSeatId","loadSeatId","nicknames","touchBeganX","leftX","rightX","upY","downY","isTouchbegan","wechatImgUrl","detailModel","params","uid","getUid","nickname","getNickName","gender","toString","getGender","coin","getCoin","gold","getGold","lequan","getCoupon","propDress","getPropDress","wechatImg","title","getTitle","emoticon","emoticonItems","myOpratShow","CancelDelegate","myPokerData","myPokerNode","dispatchCard","player","playerme_","initMyPlayerNode","initBaseInfo","leftDispatchCard","leftPokerData","leftPokerNode","left_player","initLeftPlayerNode","rightDispatchCard","rightPokerData","rightPokerNode","right_player","initRightPlayerNode","registerEvent","active","sendRequest","addEventListener","initTable3Card","table3Card","i","path","card","find","push","node_tableTimes","getComponent","Label","setTable3Card","severCards","poker","showPoker","convertCardToClient","node_name","node_LeDou","node_LeQuan","node_Landlord","Sprite","node_hint","node_wechatImg","nodes","node_cardsNum","node_delegate","node_clockDwonTime","node_alarm","enabled","initNodes","clearTable","clear","clearTableCard","length","node","removeFromParent","console","log","close","on","EventType","TOUCH_START","event","p","getLocation","x","setSelectCardByTouch","y","x1","getPositionX","x2","py","getPositionY","psize","getContentSize","pwidth","pheight","height","disBetween","moveAllCardDown","TOUCH_END","moveCard","TOUCH_MOVE","Math","abs","unregisterEvent","targetOff","istouchbegan","touchStart","touchEnd","selected","pokerNode","posY","size","posX","seatPos","center","right","left","buttom","up","setChoosed","cardMove","cardMoveDown","onShow","onMyOutCard","onHide","topcards","getMyTopCards","mycards","showTxt","autocards","getCardsFromTopCards","AutoChooseLiftUpCard","buchuFunc","tishiNum","tishiFunc","cards","pokerdata","serverCardsToClient","sort","gradeUp","cardstype","get_topCard_type","myCards","cardValue","StringToNumber","tishicards","get_cards_larger","callFunc","delay","delayTime","runAction","sequence","chupaiFunc","topCards","topCardData","isTopped","cardType","showType","pokerDataItem","popCardsType","args","clientCardsToServer","getCardCount","showCallLord","SendCardTimeout","opratType","mustOutCard","opOutCard","instantiate","parent","opOutCardControl","show","mySendCards","cardData","getSendCard","playCard","neatenPoker","getLandlord","setCardDiZhu","setCardCount","leftSendCards","isShowCard","playCardLeft","neatenLeftPoker","darkCardSend","rightSendCards","playCardRight","neatenRightPoker","btnBackClick","loadScene","btnDelegateClick","click","setDelegated","loader","loadRes","err","prefab","newNode","addChild","prefabControl","btnSetClick","showSetDialog","btnJiPaiQiClick","btnChatClick","watingStart","AddCustomEvent","MyNode","response","getUserData","initPlayerInfo","times","string","data","myCard","initMyCards","time","showOpratShowCard","seatNum","getPlayerSeatNum","callId","btn1Func","btn2Func","CallLordTimeout","callLoad","hideHint","showClock","seatId","status","showHint","hintType","callLoadNo","hideClock","grabLoad","grabLoadNo","lordId","setLandlord","candouble","can_double","showOpratDouble","giveup","getDelegated","outCardsNum","cardNum","dont","showGameResult","GrabLordTimeout","CheckCardTimeout","AddRatioTime","newGame","setMySeatId","setMySeatNum","peers","k","v","curSeatId","setRoomId","setTableId","setSignature","setBuff","parm","parseInt","myseat","roomid","tableid","signature","buff","initInfo","infos","click1","click2","url","setCoin","coins","rate","rateMax","baseCoins","socre","total","infoItem","isdizhu","difen","beishu","ledou"],"mappings":"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","file":"GameTable.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\nvar PokerData = require(\"PokerData\");\nvar PokerControl = require(\"PokerControl\");\nvar config = require(\"config\");\nvar CardUtil = require(\"CardUtil\")\nvar PopCardUtil = require(\"PopCardUtil\")\n\nvar opratOutCardControl = require(\"opratOutCardControl\");\nvar dialogManager = require(\"dialogManager\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\nvar Player = require(\"Player\");\n\nvar EventHelper = require(\"EventHelper\");\nvar GameNetMgr = require(\"GameNetMgr\");\nvar Events = require(\"Events\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        pokerCard : {\n            default : null,\n            type : cc.Prefab\n        },\n\n        pokerLayerLeft:{\n            default : null,\n            type : cc.Node,\n        },\n        pokerLayerRight:{\n            default : null,\n            type : cc.Node,\n        },\n        pokerLayerMy:{\n            default : null,\n            type : cc.Node,\n        },\n\n        chupaiBtn : {\n            default : null,\n            type : cc.Node,\n        },\n\n        buchuBtn : {\n            default : null,\n            type : cc.Node\n        },\n        canvas:cc.Node, \n        opratOutCard:{\n            default : null,\n            type : cc.Prefab\n        },\n        leftPlayer:{\n            default : null,\n            type : cc.Node,\n        },\n        rightPlayer:{\n            default : null,\n            type : cc.Node,\n        },\n    },\n    // LIFE-CYCLE CALLBACKS:\n    onLoad () {\n        \n    },\n    start () {\n        var self = this;\n        var sceneWidth = cc.director.getWinSize().width;\n        var scene = cc.director.getScene();\n\n        this.sceneWidth = sceneWidth;\n        this.scene = scene;\n        this.mySeatId = 0;\n\n        this.preSendCards = [];//上架出牌\n        this.preSeatId = -1;//上架出牌id\n\n\n        this.loadSeatId = 0; //地主的id\n        this.nicknames = []; //所有玩家昵称\n    \n        self.touchBeganX = 0;\n        self.leftX = 0;\n        self.rightX = 0;\n        self.upY = 0;\n        self.downY = 0;\n        self.isTouchbegan = false;\n\n        var wechatImgUrl=\"http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLSO7sOWsNicYdNM3MbNGGo58zticxgqoO2aqS7zOCVClXl7WExa4KNQ48uSTSszicsyspzsDQ51M4EQ/132\";\n        //--创建自己的形象\n        var detailModel = PlayerDetailModel;\n        var params = {};\n        params.uid = detailModel.getUid();\n        params.nickname = detailModel.getNickName();\n        params.gender = toString(detailModel.getGender());\n        params.coin = detailModel.getCoin();\n        params.gold = detailModel.getGold();\n        params.lequan = detailModel.getCoupon();\n        params.propDress = detailModel.getPropDress();\n        params.wechatImg = wechatImgUrl;//detailModel.getWechatImg();\n        params.title = detailModel.getTitle();\n        params.emoticon = {};\n        params.emoticonItems = {};\n\n        this.myOpratShow = null; //我自己的弹出操作洁面\n        this.CancelDelegate = null;\n\n\n        this.myPokerData = [];\n        this.myPokerNode = [];\n        this.dispatchCard = [];\n        var player = new Player(params);\n        self.playerme_ = player;\n        self.initMyPlayerNode();\n        self.playerme_.initBaseInfo();\n\n\n        // var cards = [\"13\",\"25\",\"35\",\"45\",\"15\",\"26\",\"36\",\"46\",\"16\",\"29\",\"39\",\"49\",\"1a\",\"2a\",\"3a\",\"1b\",\"2b\",\"3b\",\"3c\",\"4d\"];\n        // this.myPokerData = CardUtil.serverCardsToClient(cards);\n        // self.playerme_.initMyCards(this.myPokerData,this.myPokerNode,this.scene,this.sceneWidth);\n       \n        //左边玩家形象\n        this.leftDispatchCard = [];\n        this.leftPokerData = [];\n        this.leftPokerNode = [];\n        this.left_player = new Player();\n        this.initLeftPlayerNode();\n        // self.left_player.initBaseInfo();\n        // this.left_player.playerLeftShowCard(this.leftPokerData,this.leftPokerNode,this.pokerLayerLeft,this.sceneWidth);\n\n        //右边玩家形象\n        this.rightDispatchCard = [];\n        this.rightPokerData = [];\n        this.rightPokerNode = [];\n        this.right_player = new Player();\n        this.initRightPlayerNode();\n        // self.right_player.initBaseInfo();\n        // this.right_player.playerRightShowCard(this.rightPokerData,this.rightPokerNode,this.pokerLayerRight,this.sceneWidth);\n        \n        //注册触摸事件\n        this.registerEvent();\n\n        this.leftPlayer.active = false;\n        this.rightPlayer.active = false;\n\n\n        GameNetMgr.sendRequest(\"Game\", \"startGame\");\n        this.addEventListener();\n\n        this.initTable3Card();\n    },\n    //初始化桌面3张底牌\n    initTable3Card(){\n        this.table3Card = [];\n        for(var i=0;i<3;i++){\n            var path = \"Canvas/top_bar1/dipaibg/poker\"+i;\n            var card = cc.find(path);\n            this.table3Card.push(card);\n            card.active = false;\n        }  \n        \n        this.node_tableTimes = cc.find(\"Canvas/bottom_bar3/beishu/lab_bei\").getComponent(cc.Label);\n    },\n    setTable3Card(severCards){\n        for(var i=0;i<3;i++){\n            this.table3Card[i].active = true;\n            var poker = this.table3Card[i].getComponent(PokerControl);\n            poker.showPoker(CardUtil.convertCardToClient(severCards[i]));\n        } \n    },\n    initMyPlayerNode(){\n        var self = this;\n        var node_name =  cc.find(\"Canvas/my_player/head1/name\").getComponent(cc.Label);\n        var node_LeDou =  cc.find(\"Canvas/my_player/ledou/lab_ledou\").getComponent(cc.Label);\n        var node_LeQuan =  cc.find(\"Canvas/my_player/lequan/lab_lequan\").getComponent(cc.Label);\n        var node_Landlord =  cc.find(\"Canvas/my_player/head1/p_dz_icon\").getComponent(cc.Sprite);\n        var node_hint =  cc.find(\"Canvas/my_player/my_tip/p_tip_jiaodizhu\").getComponent(cc.Sprite);\n        var node_wechatImg =  cc.find(\"Canvas/my_player/head1/p_head/p_head_1\").getComponent(cc.Sprite);\n\n        var nodes = {};\n        nodes.node_name = node_name;//昵称\n        nodes.node_LeDou = node_LeDou;//乐斗\n        nodes.node_LeQuan = node_LeQuan;//乐券\n        nodes.node_cardsNum = null;//剩余牌数 \n        nodes.node_Landlord = node_Landlord;//地主标志\n        nodes.node_delegate = null;//托管标志\n        nodes.node_hint = node_hint;//操作显示语 “要不起”\n        nodes.node_clockDwonTime = null;//闹钟倒计时\n        nodes.node_wechatImg = node_wechatImg;//微信头像\n        nodes.pokerCard = this.pokerCard;//预设扑克牌\n        nodes.node_alarm = null;//警报装置\n\n        node_Landlord.enabled = false;\n        nodes.node_hint.enabled = false;\n\n        self.playerme_.initNodes(nodes);\n    },\n    initLeftPlayerNode(){\n        var self = this;\n        var node_name =  cc.find(\"Canvas/left_player/head/name\").getComponent(cc.Label);\n        var node_LeDou =  cc.find(\"Canvas/left_player/ledou/lab_ledou\").getComponent(cc.Label);\n        var node_cardsNum = cc.find(\"Canvas/left_player/p_card_1/cardNum\").getComponent(cc.Label);\n        var node_Landlord =  cc.find(\"Canvas/left_player/head/p_dz_icon\").getComponent(cc.Sprite);\n        var node_delegate =  cc.find(\"Canvas/left_player/head/p_delegate\").getComponent(cc.Sprite);\n        var node_hint =  cc.find(\"Canvas/left_player/left_tip/p_tip_yaobuqi\").getComponent(cc.Sprite);\n        var node_clockDwonTime = cc.find(\"Canvas/left_player/left_clock/clockDown\");//.getComponent(cc.Node);\n        var node_wechatImg =  cc.find(\"Canvas/left_player/head/p_head/p_head_1\").getComponent(cc.Sprite);\n        var node_alarm =  cc.find(\"Canvas/left_player/alarm\");\n\n        var nodes = {};\n        nodes.node_name = node_name;//昵称\n        nodes.node_LeDou = node_LeDou;//乐斗\n        nodes.node_LeQuan = null;//乐券\n        nodes.node_cardsNum = node_cardsNum;//剩余牌数 \n        nodes.node_Landlord = node_Landlord;//地主标志\n        nodes.node_delegate = node_delegate;//托管标志\n        nodes.node_hint = node_hint;//操作显示语 “要不起”\n        nodes.node_clockDwonTime = node_clockDwonTime;//闹钟倒计时\n        nodes.node_wechatImg = node_wechatImg;//微信头像\n        nodes.pokerCard = this.pokerCard;//预设扑克牌\n        nodes.node_alarm = node_alarm;//警报装置\n\n        node_Landlord.enabled = false;\n        node_delegate.enabled = false;\n        node_hint.enabled = false;\n        node_clockDwonTime.active = false;\n        node_alarm.active = false;\n\n        self.left_player.initNodes(nodes);\n    },\n    initRightPlayerNode(){\n        var self = this;\n        var node_name =  cc.find(\"Canvas/right_player/head/name\").getComponent(cc.Label);\n        var node_LeDou =  cc.find(\"Canvas/right_player/ledou/lab_ledou\").getComponent(cc.Label);\n        var node_cardsNum = cc.find(\"Canvas/right_player/p_card_1/cardNum\").getComponent(cc.Label);\n        var node_Landlord =  cc.find(\"Canvas/right_player/head/p_dz_icon\").getComponent(cc.Sprite);\n        var node_delegate =  cc.find(\"Canvas/right_player/head/p_delegate\").getComponent(cc.Sprite);\n        var node_hint =  cc.find(\"Canvas/right_player/right_tip/p_tip_qiangdizhu\").getComponent(cc.Sprite);\n        var node_clockDwonTime = cc.find(\"Canvas/right_player/right_clock/clockDown\");//.getComponent(cc.Node);\n        var node_wechatImg =  cc.find(\"Canvas/right_player/head/p_head/p_head_1\").getComponent(cc.Sprite);\n        var node_alarm =  cc.find(\"Canvas/right_player/alarm\");\n\n        var nodes = {};\n        nodes.node_name = node_name;//昵称\n        nodes.node_LeDou = node_LeDou;//乐斗\n        nodes.node_LeQuan = null;//乐券\n        nodes.node_cardsNum = node_cardsNum;//剩余牌数 \n        nodes.node_Landlord = node_Landlord;//地主标志\n        nodes.node_delegate = node_delegate;//托管标志\n        nodes.node_hint = node_hint;//操作显示语 “要不起”\n        nodes.node_clockDwonTime = node_clockDwonTime;//闹钟倒计时\n        nodes.node_wechatImg = node_wechatImg;//微信头像\n        nodes.pokerCard = this.pokerCard;//预设扑克牌\n        nodes.node_alarm = node_alarm;//警报装置\n\n        node_Landlord.enabled = false;\n        node_delegate.enabled = false;\n        node_hint.enabled = false;\n        node_clockDwonTime.active = false;\n        node_alarm.active = false;\n\n        self.right_player.initNodes(nodes);\n    },\n    clearTable(){//清理拍桌\n        this.playerme_.clear();\n        this.left_player.clear();\n        this.right_player.clear();\n\n        this.playerme_.clearTableCard(this.dispatchCard);\n        this.left_player.clearTableCard(this.leftDispatchCard);\n        this.right_player.clearTableCard(this.rightDispatchCard);\n\n        if(this.myPokerNode.length > 0){ //先清理桌上的牌\n            for(var i = 0; i < this.myPokerNode.length; i++){\n                this.myPokerNode[i].getComponent(PokerControl).node.removeFromParent();\n            }\n            this.myPokerNode = [];\n        }\n        this.myPokerData = [];\n\n        this.leftPlayer.active = false;\n        this.rightPlayer.active = false;\n\n        this.preSendCards = [];//上架出牌\n        this.preSeatId = -1;//上架出牌id\n\n        console.log(\"//清理拍桌\");\n\n        // for(this.table3Card)\n        for(var i=0;i<this.table3Card.length;i++){\n            this.table3Card[i].active = false;\n        }\n\n        if(this.CancelDelegate){\n            console.log(\"//清理拍桌 11111\");\n            this.CancelDelegate.close();\n            this.CancelDelegate = null;\n        }\n    },\n    //注册触摸事件\n    registerEvent(){\n        var self = this;\n        // var myPokerNode = this.myPokerNode;\n\n        this.canvas.on(cc.Node.EventType.TOUCH_START, function(event){\n            // console.log(\"touchStart\");\n            if(self.myPokerNode.length < 1)\n            return false;\n            var p = event.getLocation();\n            // console.log(\">>x:\"+p.x+\">>y:\"+p.y);\n            self.touchBeganX = p.x;\n            self.leftX = 0;\n            self.rightX = 10000;\n            self.upY = 10000;\n            self.downY = 0;\n            self.isTouchbegan = true;\n            self.setSelectCardByTouch(self.myPokerNode,p.x,p.y,self.isTouchbegan);\n\n            if (self.isTouchbegan){\n                var x1 = self.myPokerNode[0].getPositionX();\n                var x2 = self.myPokerNode[self.myPokerNode.length-1].getPositionX();\n                var py = self.myPokerNode[0].getPositionY();\n                var psize = self.myPokerNode[0].getContentSize();\n                var pwidth = psize.width;\n                var pheight = psize.height;\n\n                var disBetween = 10;\n    \n                self.leftX = x1-pwidth/2-disBetween;\n                self.rightX = x2+pwidth/2+disBetween;\n                self.upY = py+pheight/2+40;\n                self.downY = py-pheight/2;\n\n                console.log(\"self.leftX:\"+self.leftX+\"  self.rightX:\"+self.rightX+\" self.downY:\"+self.downY+\"  self.upY:\"+ self.upY);\n                if (self.isTouchbegan && (p.y > self.upY || p.y < self.downY || p.x < self.leftX || p.x > self.rightX)){\n                    self.moveAllCardDown(self.myPokerNode);\n                }\n            }\n        }, this.node);\n        this.canvas.on(cc.Node.EventType.TOUCH_END,function(event){\n            // console.log(\"touchEnd\");\n            if(self.myPokerNode.length < 1)\n            return;\n            var p = event.getLocation();\n            self.moveCard(self.myPokerNode);\n        }, this.node);\n        this.canvas.on(cc.Node.EventType.TOUCH_MOVE,function(event){\n            if(self.myPokerNode.length < 1)\n            return;\n            var p = event.getLocation();\n            if (Math.abs(self.touchBeganX - p.x) > 40){\n                self.isTouchbegan = false;\n                self.setSelectCardByTouch(self.myPokerNode,p.x,p.y,self.isTouchbegan);\n            }\n        }, this.node);\n    },\n    //移除触摸事件\n    unregisterEvent(){\n        this.canvas.targetOff(this.node);\n        console.log(\"off\");\n    },\n    setSelectCardByTouch(myPokerNode,x,y,istouchbegan){\n        var touchStart = this.touchBeganX;\n        var touchEnd = x;\n        this.isTouchbegan = istouchbegan;\n\n        if (this.touchBeganX > x){\n            touchStart = x;\n            touchEnd = this.touchBeganX; \n        }\n        //如果起点跟终点距离小于5 则处理成起点等于终点\n        if (touchEnd - touchStart<5){\n            touchEnd = touchStart;\n        }\n\n        var selected = false; //选中状态\n        \n        for(var i = 0;i < myPokerNode.length;i++){\n            var pokerNode = myPokerNode[i];\n            var posY = pokerNode.getPositionY();\n            var size = pokerNode.getContentSize();\n            var posX = pokerNode.getPositionX(); //+ size.width/2;\n\n            var width = size.width;\n            var height = size.height;\n\n            var disBetween = config.seatPos.center.disBetween;\n\n            var right = posX - width/2+disBetween;\n            var left =  posX - width/2;\n            var buttom = posY - height/2;\n            var up = posY + height/2;\n            //最后一张整张牌都可以点击\n            if(i == myPokerNode.length-1){\n                right = posX+width/2; \n            }\n            if ( y >= buttom && y <= up &&\n                ((left>= touchStart && left <= touchEnd) || (right>= touchStart && right <= touchEnd) ||\n                (touchStart>= left && touchStart <= right) || (touchEnd>= left && touchEnd <= right))){\n                    pokerNode.getComponent(PokerControl).setChoosed(true);\n                }else{\n            }\n        }   \n    },\n    moveCard(myPokerNode){\n        for(var i = 0;i < myPokerNode.length;i++){\n            var pokerNode = myPokerNode[i];\n            pokerNode.getComponent(PokerControl).cardMove();\n        }\n    },\n    moveAllCardDown(myPokerNode){\n        console.log(\"moveAllCardDown\");\n        for(var i = 0;i < myPokerNode.length;i++){\n            var pokerNode = myPokerNode[i];\n            pokerNode.getComponent(PokerControl).cardMoveDown();\n        }\n    },\n    onShow(){\n        console.log(\"onShow\");\n        this.onMyOutCard();\n\n        // this.left_player.hideClock();\n        // this.right_player.showClock(15);\n    },\n    onHide(){\n        console.log(\"onHide\");\n        //智能提牌测试\n        var myPokerNode = this.myPokerNode;\n        var myPokerData = this.myPokerData;\n        var topcards = CardUtil.getMyTopCards(myPokerNode,PokerControl);\n        \n        var mycards = [];\n        for(var i = myPokerData.length - 1; i > -1;i--){\n            mycards.push(myPokerData[i].showTxt);\n            console.log(\"xx\"+myPokerData[i].showTxt);\n        } \n        \n        var autocards = CardUtil.getCardsFromTopCards(mycards,topcards);\n        if(autocards.length < 1){\n        }else{\n            this.moveAllCardDown(myPokerNode);//先放下在提起\n            CardUtil.AutoChooseLiftUpCard(myPokerNode,PokerControl,autocards);\n        } \n    },\n    //轮到自己出牌\n    onMyOutCard(){\n        var self = this;\n        var dispatchCard = this.dispatchCard;\n        var sceneWidth = this.sceneWidth;\n        var scene = cc.director.getScene();\n\n        var myPokerNode = this.myPokerNode;\n        var myPokerData = this.myPokerData;\n\n        var buchuFunc = function(){\n            self.moveAllCardDown(myPokerNode);\n            // GameNetMgr.sendGiveupSendCard();\n            GameNetMgr.sendRequest(\"Game\",\"giveupSendCard\");\n\n            if(self.myOpratShow){\n                self.myOpratShow = null;\n            }\n        }\n        var tishiNum = 0;\n        var tishiFunc = function(){\n            var cards = [];//\"3\",\"3\",\"3\",\"3\"\n\n            if(self.preSendCards&&self.preSendCards.length>0){\n                var pokerdata = CardUtil.serverCardsToClient(self.preSendCards);\n                pokerdata.sort(CardUtil.gradeUp);\n                for(var i =0;i<pokerdata.length;i++){\n                    cards.push(pokerdata.showTxt);\n                }\n            }\n            \n\n            // self.preSendCards;\n\n            var cardstype = CardUtil.get_topCard_type(cards);\n            var myCards = [];\n            console.log(cardstype);\n            for(var i = myPokerData.length - 1; i > -1;i--){\n                var cardValue = CardUtil.StringToNumber(myPokerData[i].showTxt);\n                myCards.push(cardValue); \n            }\n\n            var tishicards = CardUtil.get_cards_larger(cardstype,myCards);\n            if(tishicards.length == 0){\n                console.log(\"没有符合的牌型可供提示\");\n                return;\n            }\n            cards = tishicards[tishiNum];\n            if(tishiNum<tishicards.length-1){\n                tishiNum++;\n            }else{\n                tishiNum = 0;\n            }\n\n            // this.node.stopAllActions();\n            var callFunc = cc.callFunc(function(){\n                CardUtil.AutoChooseLiftUpCard(myPokerNode,PokerControl,cards);\n            });\n            var delay = cc.delayTime(0.25);\n            this.node.runAction(cc.sequence(delay,callFunc));\n            self.moveAllCardDown(myPokerNode);\n        }\n        var chupaiFunc = function(){\n            console.log(\"点击了出牌\");\n            if(self.myOpratShow){\n                self.myOpratShow = null;\n            }\n            //牌桌上已经有了出牌，清除掉\n            // var self = this;\n            if(self.dispatchCard&&self.dispatchCard.length > 0){\n                console.log(\"dispatchCard.length:\"+self.dispatchCard.length);\n                for(var i = 0; i < self.dispatchCard.length; i++){\n                    self.dispatchCard[i].getComponent(PokerControl).node.removeFromParent();\n                }\n                self.dispatchCard = [];\n            }\n            var topCards = [];\n            var topCardData = [];\n            //获取提起的牌直\n            for(var i = myPokerData.length - 1; i > -1;i--){\n                if(myPokerData[i].isTopped){\n                    var cardValue = CardUtil.StringToNumber(myPokerData[i].showTxt);\n                    topCards.push(cardValue);\n                    var cardType = myPokerData[i].showType;\n                    var pokerDataItem = {\n                        showTxt : cardValue,\n                        showType : cardType\n                    }\n                    topCardData.push(pokerDataItem);\n                }\n            }\n\n            if(topCards.length>=1){\n                var popCardsType = CardUtil.get_topCard_type(topCards);\n                console.log(popCardsType);\n                if(popCardsType.type == 0){\n                    console.log(\"提起的牌不合法\");\n                    return -1;\n                }    \n            }else{\n                console.log(\"没有牌提起\");\n                return 0;\n            }\n\n            var args = CardUtil.clientCardsToServer(topCardData);\n            // GameNetMgr.sendSendCard(args);\n            GameNetMgr.sendRequest(\"Game\",\"sendCard\",args);\n\n            // self.mySendCards(args);\n\n            // for(var i = myPokerData.length - 1; i > -1;i--){\n            //         if(myPokerData[i].isTopped){ //myPokerData[i].isChoosed\n            //         var isChoosedPoker = myPokerNode[i];\n            //         dispatchCard.unshift(isChoosedPoker);\n            //         myPokerData.splice(i,1);\n            //         myPokerNode.splice(i,1);\n            //     }\n            // }\n            // self.dispatchCard = dispatchCard;\n            // //出牌\n            // self.playerme_.playCard(dispatchCard);\n            // self.playerme_.neatenPoker(myPokerNode,config.seatPos.center,sceneWidth);\n            // //最后一张牌设置为地主牌\n            // if(self.playerme_.getLandlord()&&myPokerNode.length>0){\n            //     myPokerNode[myPokerNode.length-1].getComponent(PokerControl).setCardDiZhu(true);\n            // }\n            // self.playerme_.setCardCount(myPokerNode.length);\n\n            // self.leftSendCards(topCards,topCardData,false);\n            // // self.rightSendCards(topCards,topCardData,false)\n            // var cards = [\"25\",\"35\",\"45\",\"15\"];\n            // self.rightSendCards(args,null,false);\n        }\n        \n        // self.preSendCards = response[\"data\"][\"sendCards\"];//上架出牌\n        // self.preSeatId = seatId;//上架出牌id\n\n        \n\n\n\n        if(self.playerme_.getCardCount()==20 || self.mySeatId == self.preSeatId){\n            self.showCallLord(config.SendCardTimeout,null,chupaiFunc,config.opratType.mustOutCard);\n        }else{\n            var opOutCard = cc.instantiate(this.opratOutCard);\n            opOutCard.parent = scene;\n            var opOutCardControl = opOutCard.getComponent(opratOutCardControl);\n            opOutCardControl.show(config.SendCardTimeout,buchuFunc,tishiFunc,chupaiFunc);\n\n\n            self.myOpratShow = opOutCardControl;\n        }\n    },\n    mySendCards(severCards){//自己出牌\n        var self = this;\n\n        if(severCards){//(根据服务器返回的牌出牌)\n            var cardData = CardUtil.serverCardsToClient(severCards);\n            cardData.sort(CardUtil.gradeUp);//这边生序拍下\n            self.dispatchCard = self.playerme_.getSendCard(self.dispatchCard,cardData,self.myPokerNode,self.myPokerData);\n        }else{\n            // for(var i = self.myPokerData.length - 1; i > -1;i--){//( 根据提出的牌出牌)\n            //         if(self.myPokerData[i].isTopped){ \n            //         var isChoosedPoker = self.myPokerNode[i];\n            //         self.dispatchCard.unshift(isChoosedPoker);\n            //         self.myPokerData.splice(i,1);\n            //         self.myPokerNode.splice(i,1);\n            //     }\n            // }\n        }\n\n        //出牌\n        self.playerme_.playCard(self.dispatchCard);\n        self.playerme_.neatenPoker(self.myPokerNode,config.seatPos.center,self.sceneWidth);\n        //最后一张牌设置为地主牌\n        if(self.playerme_.getLandlord()&&self.myPokerNode.length>0){\n            self.myPokerNode[self.myPokerNode.length-1].getComponent(PokerControl).setCardDiZhu(true);\n        }\n        self.playerme_.setCardCount(self.myPokerNode.length);\n    },\n\n\n    leftSendCards(severCards,cardData,isShowCard){\n        var self = this;\n        var sceneWidth = this.sceneWidth;\n\n        if(!severCards){\n            return;\n        }\n\n        if(cardData){\n        }else{\n            cardData = CardUtil.serverCardsToClient(severCards);\n            cardData.sort(CardUtil.gradeUp);//这边生序拍下\n        }\n\n        //左边明牌出牌\n        if(isShowCard){\n            self.leftDispatchCard = self.left_player.getSendCard(self.leftDispatchCard,cardData,self.leftPokerNode,self.leftPokerData);\n            self.left_player.playCardLeft(self.leftDispatchCard,320,650);\n            self.left_player.neatenLeftPoker(self.leftPokerNode,config.seatPos.left,sceneWidth/2, 230);\n        }else{\n            //左边暗牌出牌\n            self.leftDispatchCard = self.left_player.darkCardSend(self.leftDispatchCard,cardData,self.pokerLayerLeft,2,sceneWidth);\n            self.left_player.playCardLeft(self.leftDispatchCard,320,650);\n        }  \n    },\n    rightSendCards(severCards,cardData,isShowCard){\n        var self = this;\n        var sceneWidth = this.sceneWidth;\n\n        if(!severCards){\n            return;\n        }\n\n        if(cardData){\n        }else{\n            if(severCards){\n                cardData = CardUtil.serverCardsToClient(severCards);\n                cardData.sort(CardUtil.gradeUp);//这边生序拍下\n            } \n        }\n\n        if(isShowCard){\n            //右边明牌出牌\n            self.rightDispatchCard = self.right_player.getSendCard(self.rightDispatchCard,cardData,self.rightPokerNode,self.rightPokerData);\n            self.right_player.playCardRight(self.rightDispatchCard,620,650);\n            self.right_player.neatenRightPoker(self.rightPokerNode,config.seatPos.right,sceneWidth/2, sceneWidth/2 + 140);\n        }else{\n            //右边暗牌出牌\n            self.rightDispatchCard = self.right_player.darkCardSend(self.rightDispatchCard,cardData,self.pokerLayerRight,0,sceneWidth);\n            self.right_player.playCardRight(self.rightDispatchCard,620,650);\n        }  \n    },\n\n    //返回按钮点击事件\n    btnBackClick(){\n        console.log(\"btnBackClick\");\n        cc.director.loadScene(\"HallScene\");\n    },\n    btnDelegateClick(){\n        console.log(\"btnDelegateClick\");\n        // dialogManager.showJpqNode();\n        // dialogManager.showCancelDelegate();\n        var self = this;\n        var click = function(){\n            GameNetMgr.sendRequest(\"Game\",\"cancelDelegate\");\n            self.CancelDelegate = null;\n            self.playerme_.setDelegated(false);\n        }\n\n        // \n\n        if(self.CancelDelegate){\n\n        }else{\n            cc.loader.loadRes(\"prefab/CancelDelegate\", function (err, prefab) {\n                //匹配计数动画\n                if (err) {\n                    console.log(err);\n                    return;\n                }\n                var newNode = cc.instantiate(prefab);\n                cc.director.getScene().addChild(newNode);\n                var prefabControl= newNode.getComponent(require(\"CancelDelegateController\"));\n                prefabControl.show(click);\n                self.CancelDelegate = prefabControl; \n            });\n        }\n    },\n    btnSetClick(){\n        console.log(\"btnSetClick\");\n        dialogManager.showSetDialog();\n    },\n    btnJiPaiQiClick(){\n        console.log(\"btnJiPaiQiClick\");\n    },\n    btnChatClick(){\n        console.log(\"btnChatClick\");\n    },\n    //监听协议\n    addEventListener(){\n        var self = this;\n        self.watingStart = null;\n        EventHelper.AddCustomEvent(config.MyNode,\"Queued\",function(event){\n            console.log(\"进入队列---\");\n            cc.loader.loadRes(\"animatiom/watingStartGame\", function (err, prefab) {\n                //匹配计数动画\n                if (err) {\n                    console.log(err);\n                    return;\n                }\n                var newNode = cc.instantiate(prefab);\n                cc.director.getScene().addChild(newNode);\n                self.watingStart = newNode.getComponent(require(\"watingStarControl\"));\n            });\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"GameReady\",function(event){\n            console.log(\"游戏准备好了---\");\n            self.watingStart.close();\n            var response = event.getUserData();\n            self.initPlayerInfo(response);\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"TableTimesUpdate\",function(event){\n            console.log(\"桌子的倍数发生改变---\");\n            var response = event.getUserData();\n            var times = response[\"data\"][\"rate\"];\n            self.node_tableTimes.string = \"\" + times;\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"SendCard\",function(event){\n            console.log(\"发牌, 包括各用户的牌信息---\");\n\n            if(self.myPokerNode.length > 0){ //先清理桌上的牌\n                for(var i = 0; i < self.myPokerNode.length; i++){\n                    self.myPokerNode[i].getComponent(PokerControl).node.removeFromParent();\n                }\n                self.myPokerNode = [];\n            }\n            self.myPokerData = [];\n\n            var response = event.getUserData();\n            self.myPokerData = CardUtil.serverCardsToClient(response.data.myCard);\n            self.playerme_.initMyCards(self.myPokerData,self.myPokerNode,self.scene,self.sceneWidth);\n            //明牌按钮现实\n            var click = function(time){\n                GameNetMgr.sendRequest(\"Game\",\"showCard\",time);\n            }\n            dialogManager.showOpratShowCard(click);\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"RefreshPlayerData\",function(event){\n            console.log(\"刷新用户金币---\");\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"TurnCallLord\",function(event){\n            console.log(\"轮到谁叫地主---\");\n            var response = event.getUserData();\n            var seatNum = config.getPlayerSeatNum(self.mySeatId,response.data.callId);\n            if(seatNum == 1){//自己\n                var btn1Func = function(){\n                    // GameNetMgr.sendCallLord(1);\n                    GameNetMgr.sendRequest(\"Game\",\"callLord\",1);\n                    if(self.myOpratShow){\n                        self.myOpratShow = null;\n                    }\n                }\n                var btn2Func = function(){\n                    // GameNetMgr.sendCallLord(2);\n                    GameNetMgr.sendRequest(\"Game\",\"callLord\",2);\n                    if(self.myOpratShow){\n                        self.myOpratShow = null;\n                    }\n                }\n                self.showCallLord(config.CallLordTimeout,btn1Func,btn2Func,config.opratType.callLoad);\n                self.playerme_.hideHint();\n            }else if(seatNum == 0){//右边\n                self.right_player.showClock(config.CallLordTimeout);\n                self.right_player.hideHint();\n            }else if(seatNum == 2){//左边\n                self.left_player.showClock(config.CallLordTimeout);\n                self.left_player.hideHint();\n            }\n\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"CallLord\",function(event){\n            console.log(\"玩家叫地主---\");\n            var response = event.getUserData();\n            var seatId = response[\"data\"][\"beLordId\"];\n            var status = response[\"data\"][\"beLordInfo\"];  // 1叫 2不叫\n            var seatNum = config.getPlayerSeatNum(self.mySeatId,seatId);\n            if(seatNum == 1){//自己\n                if(status == 1){\n                    self.playerme_.showHint(config.hintType.callLoad);\n                }else{\n                    self.playerme_.showHint(config.hintType.callLoadNo);\n                } \n            }else if(seatNum == 0){//右边\n                self.right_player.hideClock();\n                if(status == 1){\n                    self.right_player.showHint(config.hintType.callLoad);\n                }else{\n                    self.right_player.showHint(config.hintType.callLoadNo);\n                }\n            }else if(seatNum == 2){//左边\n                self.left_player.hideClock();\n                if(status == 1){\n                    self.left_player.showHint(config.hintType.callLoad);\n                }else{\n                    self.left_player.showHint(config.hintType.callLoadNo);\n                }\n            }\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"TurnGrabLord\",function(event){\n            console.log(\"轮到谁抢地主---\");\n            var response = event.getUserData();\n            var callId = response[\"data\"][\"callId\"]\n            var seatNum = config.getPlayerSeatNum(self.mySeatId,callId);\n            if(seatNum == 1){//自己\n                var btn1Func = function(){\n                    // GameNetMgr.sendGrabLord(1);\n                    GameNetMgr.sendRequest(\"Game\",\"grabLord\",1);\n                }\n                var btn2Func = function(){\n                    // GameNetMgr.sendGrabLord(2);\n                    GameNetMgr.sendRequest(\"Game\",\"grabLord\",2);\n                }\n                self.showCallLord(config.CallLordTimeout,btn1Func,btn2Func,config.opratType.grabLoad);\n                self.playerme_.hideHint();\n            }else if(seatNum == 0){//右边\n                self.right_player.showClock(config.CallLordTimeout);\n                self.right_player.hideHint();\n            }else if(seatNum == 2){//左边\n                self.left_player.showClock(config.CallLordTimeout);\n                self.left_player.hideHint();\n            }\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"GrabLord\",function(event){\n            console.log(\"玩家抢地主---\");\n            var response = event.getUserData();\n            var seatId = response[\"data\"][\"grabLordId\"]\n            var status = response[\"data\"][\"grabLordInfo\"]\n            var seatNum = config.getPlayerSeatNum(self.mySeatId,seatId);\n            if(seatNum == 1){//自己\n                if(status == 1){\n                    self.playerme_.showHint(config.hintType.grabLoad);\n                }else{\n                    self.playerme_.showHint(config.hintType.grabLoadNo);\n                }\n            }else if(seatNum == 0){//右边\n                self.right_player.hideClock();\n                if(status == 1){\n                    self.right_player.showHint(config.hintType.grabLoad);\n                }else{\n                    self.right_player.showHint(config.hintType.grabLoadNo);\n                }\n            }else if(seatNum == 2){//左边\n                self.left_player.hideClock();\n                if(status == 1){\n                    self.left_player.showHint(config.hintType.grabLoad);\n                }else{\n                    self.left_player.showHint(config.hintType.grabLoadNo);\n                }\n            }\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"CallLordOver\",function(event){\n            console.log(\"叫地主结束---\");\n            self.playerme_.hideHint();\n            self.left_player.hideHint();\n            self.right_player.hideHint();\n        \n            var response = event.getUserData();\n            var lordId = response[\"data\"][\"lordId\"];\n            var cards = response[\"data\"][\"lordCard\"];\n            var times = response[\"data\"][\"lordBonus\"];\n            self.setTable3Card(cards);\n\n            self.loadSeatId = lordId; //地主的id\n\n            var seatNum = config.getPlayerSeatNum(self.mySeatId,lordId);\n            if(seatNum == 1){//自己\n                if(response.data.myCard&&response.data.myCard.length == 20){ //插3张牌\n                    if(self.myPokerNode.length > 0){ //先清理桌上的牌\n                        for(var i = 0; i < self.myPokerNode.length; i++){\n                            self.myPokerNode[i].getComponent(PokerControl).node.removeFromParent();\n                        }\n                        self.myPokerNode = [];\n                    }\n                    self.myPokerData = [];\n                \n                    self.myPokerData = CardUtil.serverCardsToClient(response.data.myCard);\n                    self.myPokerNode = self.playerme_.initMyCards(self.myPokerData,self.myPokerNode,self.scene,self.sceneWidth);\n                    self.playerme_.setCardCount(20);\n                    self.playerme_.setLandlord(true);\n                }\n            }else if(seatNum == 0){//右边\n                self.right_player.setCardCount(20);\n                self.right_player.setLandlord(true);\n            }else if(seatNum == 2){//左边\n                self.left_player.setCardCount(20);\n                self.left_player.setLandlord(true);\n            }\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"CanDoubleResult\",function(event){\n            console.log(\"通知是否可以加倍---\");\n            var response = event.getUserData();\n            var candouble = response.data.can_double;\n\n            if(candouble&&candouble == 1){\n                var btn1Func = function(){\n                    GameNetMgr.sendRequest(\"Game\",\"addRatio\");\n                }\n                dialogManager.showOpratDouble(btn1Func);\n            }\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"TurnSendCard\",function(event){\n            console.log(\"轮到谁出牌---\");\n            \n            var response = event.getUserData();\n            var seatId = response[\"data\"][\"callId\"];\n            var seatNum = config.getPlayerSeatNum(self.mySeatId,seatId);\n\n            if(seatNum == 1){//自己\n                self.onMyOutCard();\n                self.playerme_.hideHint();\n                self.playerme_.clearTableCard(self.dispatchCard);\n                //lipai\n                self.playerme_.neatenPoker(self.myPokerNode,config.seatPos.center,self.sceneWidth);\n            }else if(seatNum == 0){//右边\n                self.right_player.showClock(config.SendCardTimeout);\n                self.right_player.hideHint();\n                self.right_player.clearTableCard(self.rightDispatchCard);\n            }else if(seatNum == 2){//左边\n                self.left_player.showClock(config.SendCardTimeout);\n                self.left_player.hideHint();\n                self.left_player.clearTableCard(self.leftDispatchCard);\n            }\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"PlayerDelegated\",function(event){\n            console.log(\"用户托管---\");\n            var response = event.getUserData();\n            var seatId = response[\"data\"][\"trustId\"];\n            var giveup = response[\"data\"][\"giveup\"]; //是否断线  0在线 1在线\n            var seatNum = config.getPlayerSeatNum(self.mySeatId,seatId);\n\n            // local response = event.payload\n            // local seatId = response[\"data\"][\"trustId\"]\n            // local mySeatId = self.playerme_:getMySeatId()\n            // local giveup = response[\"data\"][\"giveup\"] --是否断线  0在线 1在线\n\n            if(seatNum == 1){//自己\n                if(!self.playerme_.getDelegated()){\n                    self.btnDelegateClick();\n                    self.playerme_.setDelegated(true);\n                }\n            }else if(seatNum == 0){//右边\n                \n            }else if(seatNum == 2){//左边\n                \n            }\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"PlayerSendCard\",function(event){\n            console.log(\"用户出牌---\");\n            var response = event.getUserData();\n            var seatId = response[\"data\"][\"callId\"];\n            var seatNum = config.getPlayerSeatNum(self.mySeatId,seatId);\n            if(seatNum == 1){//自己\n                self.mySendCards(response[\"data\"][\"sendCards\"]);\n                if(self.myOpratShow){\n                    self.myOpratShow.close()\n                    self.myOpratShow = null;\n                }\n            }else if(seatNum == 0){//右边\n                self.rightSendCards(response[\"data\"][\"sendCards\"],null,false);\n                var outCardsNum = response[\"data\"][\"sendCards\"].length;\n                var cardNum =  self.right_player.getCardCount();\n                self.right_player.setCardCount(cardNum-outCardsNum);\n                self.right_player.hideClock();\n            }else if(seatNum == 2){//左边\n                self.leftSendCards(response[\"data\"][\"sendCards\"],null,false);\n                var outCardsNum = response[\"data\"][\"sendCards\"].length;\n                var cardNum =  self.left_player.getCardCount();\n                self.left_player.setCardCount(cardNum-outCardsNum);\n                self.left_player.hideClock();\n            }\n\n            self.preSendCards = response[\"data\"][\"sendCards\"];//上架出牌\n            self.preSeatId = seatId;//上架出牌id\n\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"PlayerNotSend\",function(event){\n            console.log(\"用户不出牌---\");\n            var response = event.getUserData();\n            var seatId = response[\"data\"][\"callId\"];\n            var seatNum = config.getPlayerSeatNum(self.mySeatId,seatId);\n            if(seatNum == 1){//自己\n                // self.mySendCards(response[\"data\"][\"sendCards\"]);\n                self.playerme_.showHint(config.hintType.dont);\n                if(self.myOpratShow){\n                    self.myOpratShow.close()\n                    self.myOpratShow = null;\n                }\n            }else if(seatNum == 0){//右边\n                // self.rightSendCards(null,null,false);\n                self.right_player.showHint(config.hintType.dont);\n                self.right_player.hideClock();\n            }else if(seatNum == 2){//左边\n                // self.leftSendCards(null,null,false);\n                self.left_player.showHint(config.hintType.dont);\n                self.left_player.hideClock();\n            }\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"PlayerShowCard\",function(event){\n            console.log(\"用户明牌---\");\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"GameComplete\",function(event){\n            console.log(\"本局结束---\");\n            var response = event.getUserData();\n            self.showGameResult(response);\n        });\n        EventHelper.AddCustomEvent(config.MyNode,\"TableUserExit\",function(event){\n            console.log(\"有用户退出 通知桌上的玩家重新进入队列---\");\n            self.clearTable();\n        });\n    },\n    //初始化玩家信息\n    initPlayerInfo(response){\n        var self = this;\n        if(response.data[\"time\"]){\n            //出牌等待时间\n            config.CallLordTimeout = response.data[\"time\"][\"lord\"];\n            //抢地主超时时间\n            config.GrabLordTimeout = response.data[\"time\"][\"lord\"];\n            //出牌倒计时时间\n            config.SendCardTimeout = response.data[\"time\"][\"send\"];\n            //过牌时间--要不起\n            config.CheckCardTimeout = response.data[\"time\"][\"giveup\"];\n            //加倍时间\n            config.AddRatioTime = response.data[\"time\"][\"double\"]; \n        }else{\n            config.CallLordTimeout = 15;\n            //抢地主超时时间\n            config.GrabLordTimeout = 15;\n            //出牌倒计时时间\n            config.SendCardTimeout = 30;\n            //过牌时间--要不起\n            config.CheckCardTimeout = 10;\n            //加倍时间\n            config.AddRatioTime = 5;\n        }\n        var newGame = response[\"data\"][\"isNewGame\"];\n        this.nicknames = [];\n        if(newGame){\n            var mySeatId = response[\"data\"][\"seatId\"];\n            self.mySeatId = mySeatId;\n            self.playerme_.setMySeatId(mySeatId);\n            self.playerme_.setMySeatNum(1);\n            var peers = {0:response[\"data\"][\"0\"], 1:response[\"data\"][\"1\"], 2:response[\"data\"][\"2\"]};\n            for(var k in peers){\n                var v = peers[k];\n                var curSeatId = v[\"seatId\"];\n\n                this.nicknames.push(v[\"nick\"]);\n\n                if(curSeatId == mySeatId){\n                    self.playerme_.setMySeatId(v[\"seatId\"]);\n                    self.playerme_.setRoomId(v[\"roomId\"]);\n                    self.playerme_.setTableId(v[\"tableId\"]);\n                    self.playerme_.setSignature(v[\"word\"]);\n                    self.playerme_.setBuff(v[\"buff\"]);\n                }else{\n                    var seatNum = 1;\n                    if(mySeatId == 0){\n                        if(curSeatId == 1){\n                            seatNum = 2\n                        }else if(curSeatId == 2){\n                            seatNum = 0\n                        }\n                    }else if(mySeatId == 1){ \n                        if(curSeatId == 0){\n                            seatNum = 0\n                        }else if(curSeatId == 2){\n                            seatNum = 2\n                        }\n                    }else if(mySeatId == 2){\n                        if(curSeatId == 0){\n                            seatNum = 2\n                        }else if(curSeatId == 1){\n                            seatNum = 0\n                        }\n                    }\n\n                    var parm = {};\n                    parm.uid = parseInt(v[\"uid\"]);\n                    parm.nickname = v[\"nick\"];\n                    parm.gender = v[\"sex\"];\n                    parm.coin = parseInt(v[\"coin\"]);\n                    parm.gold = parseInt(v[\"gold\"]);\n                    parm.propDress = v[\"propDress\"];\n                    parm.myseat = v[\"seatId\"];\n                    parm.roomid = v[\"roomId\"];\n                    parm.tableid = v[\"tableId\"];\n                    parm.signature = v[\"word\"];\n                    parm.buff = v[\"buff\"];\n                    parm.wechatImg = v[\"img\"];\n                    parm.title = v[\"title\"];\n                    parm.emoticon = {};\n                    parm.emoticonItems = {};\n\n                    if(seatNum == 2){//左边玩家\n                        self.left_player.initInfo(parm);\n                        self.left_player.initBaseInfo();\n                        self.left_player.setMySeatNum(seatNum);\n                        self.leftPlayer.active = true;   \n                    }else if(seatNum == 0){//右边玩家\n                        self.right_player.initInfo(parm);\n                        self.right_player.initBaseInfo();\n                        self.right_player.setMySeatNum(seatNum);\n                        self.rightPlayer.active = true;\n                    }\n                }\n            }\n        }else{\n\n        }\n    },\n    //叫地主，抢地主弹出框\n    showCallLord(time,btn1Func,btn2Func,type){\n        var self = this;\n        cc.loader.loadRes(\"prefab/opratCallLord\", function (err, prefab) {\n            //匹配计数动画\n            if (err) {\n                console.log(err);\n                return;\n            }\n            var newNode = cc.instantiate(prefab);\n            cc.director.getScene().addChild(newNode);\n            var prefabControl= newNode.getComponent(require(\"opratCallLordControl\"));\n            prefabControl.show(time,btn1Func,btn2Func,type);\n\n            self.myOpratShow = prefabControl; \n        });\n    },\n    //结算洁面\n    showGameResult(response){\n        var self = this;\n        var infos = [];\n        // var infoItem = {};\n\n        var data = response.data;\n\n        var click1 = function(){//名牌\n            GameNetMgr.sendRequest(\"Game\", \"startGame\",true);\n        }\n        var click2 = function(){\n            GameNetMgr.sendRequest(\"Game\", \"startGame\",false);\n        }\n        var url = \"prefab/gameResultWin\";\n\n        // self.mySeatId\n\n        if(response[\"data\"][\"isWinner\"][\"\"+self.mySeatId] == 1){\n        }else{\n            url = \"prefab/gameResultLose\";\n        }\n\n        self.playerme_.setCoin(data.coins[self.mySeatId]);\n        // self.playerme_.setLeQuan();\n\n        // {isdizhu : false,nickname : \"新手123\",difen : 60,beishu : 1000,ledou : \"- 60000\"},\n\n        var rate = data.rate;\n        var rateMax = data.rateMax;\n        // var modelId = data.modelId;\n        var baseCoins = data.baseCoins;\n\n         // this.loadSeatId = 0; //地主的id\n        // this.nicknames = []; //所有玩家昵称\n\n        for (var i=0;i<3;i++){\n            var socre = data.total[\"\"+i];\n            if(socre>0){\n                socre = \"+\"+socre;\n            }else{\n                socre = \"- \"+Math.abs(socre);\n            }\n            var infoItem = {\n                isdizhu : self.loadSeatId==i,nickname : self.nicknames[i],difen : baseCoins,beishu : rate,ledou : socre\n            }\n            infos.push(infoItem);\n        }\n\n\n        cc.loader.loadRes(url, function (err, prefab) {\n            //匹配计数动画\n            if (err) {\n                console.log(err);\n                return;\n            }\n            var newNode = cc.instantiate(prefab);\n            cc.director.getScene().addChild(newNode);\n            var prefabControl= newNode.getComponent(require(\"gameResultControl\"));\n            prefabControl.show(infos,click1,click2,self.mySeatId);\n        });\n    },\n\n});\n"]}