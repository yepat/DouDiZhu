{"version":3,"sources":["opratCallLordControl.js"],"names":["config","require","cc","Class","extends","Component","properties","timeTxt","default","type","Label","btnNode1","Node","btnNode2","btnSp1","Sprite","btnSp2","clock","tishi","timeCount","onLoad","enabled","start","clockX","getPositionX","clockY","getPositionY","schedule","shakeClock","pre","node","destroy","t","Math","ceil","string","show","time","btn1Func","btn2Func","self","opratType","callLoad","grabLoad","loader","loadRes","SpriteFrame","err","spriteFrame","getComponent","mustOutCard","x","active","close","btn1Click","console","log","vv","audioMgr","playSFX","btn2Click","typenum","showTips","mt1","moveTo","mt2","mt3","mt4","mt5","mt6","mt7","runAction","sequence","chupaiClick","num","chupaiFunc","imgUrl","stopAllActions","delay","delayTime","callFunc"],"mappings":"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","file":"opratCallLordControl.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\nvar config = require(\"config\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        timeTxt : {\n            default : null,\n            type : cc.Label\n        },\n        btnNode1 : {\n            default : null,\n            type : cc.Node\n        },\n        btnNode2 : {\n            default : null,\n            type : cc.Node\n        },\n        btnSp1 : {\n            default : null,\n            type : cc.Sprite\n        },\n        btnSp2 : {\n            default : null,\n            type : cc.Sprite\n        },\n        clock : {\n            default : null,\n            type : cc.Node,\n        },\n        tishi : {\n            default : null,\n            type : cc.Sprite\n        },\n        timeCount:30,\n    },\n    onLoad () {\n        this.tishi.enabled = false;\n    },\n    start () {\n        this.clockX = this.clock.getPositionX();\n        this.clockY = this.clock.getPositionY();\n\n        this.schedule(function() {\n            if(this.timeCount > 0){\n                this.timeCount -= 1;\n                if(this.timeCount <= 5 && this.timeCount >=1){\n                    // cc.vv.audioMgr.playSFX(\"timeup_alarm.mp3\");\n                    this.shakeClock();\n                }\n                var pre = \"\";\n                if(this.timeCount <= 0){\n                    this.timeCount = 0;\n                    this.node.destroy();\n                }\n                var t = Math.ceil(this.timeCount);\n                if(t < 10){\n                    pre = \"\";\n                }\n                this.timeTxt.string = pre + t; \n            }   \n        }, 1);\n\n        //xx_test\n        // this.show(10,null,null,2);\n    },\n    show(time,btn1Func,btn2Func,type){\n        this.timeCount = time;\n        this.btn1Func = btn1Func;\n        this.btn2Func = btn2Func;\n\n        var self = this;\n\n        this.type = type;\n\n        var pre = \"\";\n        if(time < 10){\n            pre = \"\";\n        }\n        this.timeTxt.string = pre + time;\n\n        // this.btnSp1\n        if(type == config.opratType.callLoad){\n            // this.btnTxt1.string = \"叫地主\";\n            // this.btnTxt2.string = \"不叫\";\n        }else if(type == config.opratType.grabLoad){\n            // this.btnTxt1.string = \"抢地主\";\n            // this.btnTxt2.string = \"不抢\";\n            cc.loader.loadRes(\"operation_btn/p_qiangyes\",cc.SpriteFrame,function(err,spriteFrame){\n                self.btnSp1.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n            cc.loader.loadRes(\"operation_btn/p_qiangno\",cc.SpriteFrame,function(err,spriteFrame){\n                self.btnSp2.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n        }else if(type == config.opratType.mustOutCard){\n            this.btnNode1.x = 0;\n            this.btnNode1.active = false;\n            this.btnNode2.x = 67;\n            this.clock.x = -163;\n            this.timeTxt.node.x = -161;\n            // this.btnTxt2.string = \"出牌\";\n            cc.loader.loadRes(\"operation_btn/p_cardout\",cc.SpriteFrame,function(err,spriteFrame){\n                self.btnSp2.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n            });\n        }\n    },\n    close(){\n        if(this.node){\n            this.node.destroy();\n        }\n    },\n    btn1Click() {\n        console.log(\"btn1Click\");\n        if(this.btn1Func){\n            this.btn1Func();\n        }\n        this.node.destroy();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btn2Click() {\n        console.log(\"btn2Click\");\n        if(this.btn2Func){\n            this.btn2Func();\n        }\n        if(this.type == config.opratType.mustOutCard){\n            // this.node.destroy();\n            if(this.btn2Func){\n                var typenum = this.btn2Func();\n                if(typenum == 0){\n                    // this.showTips(\"没有选择要出的牌！\");\n                    this.showTips(\"showTips/p_tips_noSeletcedCrad\");\n                }else if(typenum == -1){\n                    // this.showTips(\"您选择的牌无法出出去哦！\");  \n                    this.showTips(\"showTips/p_tips_seletcedCardTypeError\");\n                }else{\n                    this.tishi.enabled = false;\n                }\n            }\n        }else{\n            this.node.destroy();\n        }\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    shakeClock(){\n        var mt1 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt2 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt3 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt4 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt5 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt6 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt7 = cc.moveTo(0.05,this.clockX,this.clockY);\n        this.clock.runAction(cc.sequence(mt1,mt2,mt3,mt4,mt5,mt6,mt7));\n        cc.vv.audioMgr.playSFX(\"Special_Remind\");\n    },\n    chupaiClick(num) {\n        console.log(\"出牌\");\n        var typenum = 0;\n        if(this.chupaiFunc)\n            typenum = this.chupaiFunc();\n        this.tishi.enabled = false;\n\n        if(num){\n            typenum = num;\n        }\n\n        if(typenum == 0){\n            // this.showTips(\"没有选择要出的牌！\");\n            this.showTips(\"showTips/p_tips_noSeletcedCrad\");\n        }else if(typenum == -1){\n            // this.showTips(\"您选择的牌无法出出去哦！\");  \n            this.showTips(\"showTips/p_tips_seletcedCardTypeError\");\n        }else if(typenum == -2){\n            // this.showTips(\"showTips/p_tips_noCard\");\n            // this.node.destroy();\n        }\n        \n    },\n    showTips(imgUrl){\n        this.tishi.node.stopAllActions();\n\n        var self = this;\n        this.tishi.enabled = true;\n        // this.tishi.string = content;\n        cc.loader.loadRes(imgUrl,cc.SpriteFrame,function(err,spriteFrame){\n            self.tishi.getComponent(cc.Sprite).spriteFrame = spriteFrame;\n        })\n\n        var delay = cc.delayTime(2);\n        var callFunc = cc.callFunc(function(){\n            self.tishi.enabled = false;\n        });\n        this.tishi.node.runAction(cc.sequence(delay,callFunc));\n    }\n});\n"]}