{"version":3,"sources":["HallLayerControl.js"],"names":["dialogManager","require","PlayerDetailModel","EventHelper","config","GameNetMgr","Events","cc","Class","extends","Component","properties","taskTip","default","type","Sprite","mailTip","shareTip","btn_videoAd","ad_time","Label","start","self","enabled","string","timeCount","adCanTouch","getTaskUnReward","getMailUnread","getShareUnReward","AddCustomEvent","MyNode","onRefreshDataResult","onWatchAdvertisementResult","continueRoomId","callFunc","arg","roomId","sendRequest","delay","delayTime","node","runAction","sequence","Network","LoginRoomResult","onLoginRoomResult","firstLogin","showShareDialog","showAd","initWxVideoAd","onEnable","console","log","adCdTime","color","Color","onDisable","wx","rewardedVideoAd","schedule","showTimes","createRewardedVideoAd","adUnitId","onLoad","onError","onClose","res","isEnded","undefined","rewardedVideoType","videoEndFuc","time","times","fen","Math","floor","miao","strfen","strmiao","onDestroy","RemoveCustomEvent","event","data","getUserData","handleLoginRoomResult","preloadNextScene","director","preloadScene","loadScene","payload","mail_unread","weichatgame_task_unaward","weichatgame_invite_unaward","btnSetClick","showSetDialog","vv","audioMgr","playSFX","btnTaskClick","showTaskDialog","btnEmailClick","showEmailDialog","btnBagClick","showBagDialog","btnShopClick","btnShareClick","btnVideoAdClick","show","then","btnKefuClick","openCustomerServiceConversation","success","fail","complete","args","parseInt","m_sended","m_totalTimes","m_curTimes","sended","totalTimes","curTimes","tableInfo","IsContinueGaming","response","award","list","coins","arg1","arg2","push","coupon","noteCards","length","showAnimGetProp","watch_advertisement_cd"],"mappings":"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","file":"HallLayerControl.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\nvar dialogManager = require(\"dialogManager\");\nvar PlayerDetailModel = require(\"PlayerDetailModel\");\nvar EventHelper = require(\"EventHelper\");\nvar config = require(\"config\");\nvar GameNetMgr = require(\"GameNetMgr\");\nvar Events = require(\"Events\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        taskTip : {\n            default : null,\n            type : cc.Sprite\n        },\n        mailTip : {\n            default : null,\n            type : cc.Sprite\n        },\n        shareTip : {\n            default : null,\n            type : cc.Sprite\n        },\n        btn_videoAd : {\n            default : null,\n            type : cc.Sprite\n        },\n        ad_time : {\n            default : null,\n            type : cc.Label\n        },\n    },\n    // onLoad () {},\n    start () {\n        var self = this;\n        this.taskTip.enabled = false;\n        this.mailTip.enabled = false;\n        this.shareTip.enabled = false;\n        this.ad_time.string = \"\";\n        this.timeCount = 0;\n        this.adCanTouch = true;\n        this.btn_videoAd.enabled = false;\n\n        if(PlayerDetailModel.getTaskUnReward()>0){\n            this.taskTip.enabled = true;\n        }\n        if(PlayerDetailModel.getMailUnread()>0){\n            this.mailTip.enabled = true;\n        }\n        if(PlayerDetailModel.getShareUnReward()>0){\n            this.shareTip.enabled = true;\n        }\n\n        EventHelper.AddCustomEvent(config.MyNode,\"RefreshDataResult\",self.onRefreshDataResult,self);\n        EventHelper.AddCustomEvent(config.MyNode,\"WatchAdvertisementResult\",self.onWatchAdvertisementResult,self);\n\n        if(PlayerDetailModel.continueRoomId != 0){\n            var callFunc = cc.callFunc(function(){\n                var arg = {};\n                arg.roomId = PlayerDetailModel.continueRoomId;\n                GameNetMgr.sendRequest(\"Game\", \"loginRoom\", arg);\n                // self.preloadNextScene();\n             });\n             var delay = cc.delayTime(0.5);\n             this.node.runAction(cc.sequence(delay,callFunc));\n             EventHelper.AddCustomEvent(config.MyNode,Events.Network.LoginRoomResult,self.onLoginRoomResult,self);\n        }\n\n        //第一次登陆弹出分享窗口\n        if(config.firstLogin){\n            config.firstLogin = false;\n            dialogManager.showShareDialog();\n        }\n\n        //微信视频广告\n        if(config.showAd == 1){\n            this.btn_videoAd.enabled = true;\n        }\n        this.initWxVideoAd();\n    },\n    onEnable(){\n        console.log(\" HallLayer onEnable\");\n        if(config.adCdTime>1){\n            this.btn_videoAd.node.color = new cc.Color(218, 218, 218);\n            this.adCanTouch = false;\n        }\n    },\n    onDisable(){\n        console.log(\" HallLayer onDisable\");\n    },\n    initWxVideoAd(){\n        var self = this;\n        if(typeof(wx)==\"undefined\"){\n            return;\n        }\n        var rewardedVideoAd = null;\n\n        if(config.adCdTime>1){\n            this.btn_videoAd.node.color = new cc.Color(218, 218, 218);\n            this.adCanTouch = false;\n        }\n\n        //计时器\n        this.timeCount = config.adCdTime;\n        this.schedule(function() {\n            if(this.timeCount > 0){\n                this.timeCount -= 1;\n                this.ad_time.string = this.showTimes(this.timeCount); \n                if(this.timeCount == 0){\n                    this.ad_time.string = \"\";\n                    this.btn_videoAd.node.color = new cc.Color(255, 255, 255);\n                    this.adCanTouch = true;\n                }\n            }\n        }, 1);\n\n        if(!config.rewardedVideoAd){\n            rewardedVideoAd = wx.createRewardedVideoAd({ adUnitId: 'adunit-5e51a762e521fda5' })\n        }else{\n            return;\n        }\n        rewardedVideoAd.onLoad(() => {\n            // console.log('激励视频 广告加载成功')\n        })\n        rewardedVideoAd.onError(err => {\n            // console.log(\"激励视频 拉取失败\"+err)\n        })\n        rewardedVideoAd.onClose(res => {\n            if (res && res.isEnded || res === undefined) {\n                // console.log(\"正常播放结束，可以下发游戏奖励\")\n                GameNetMgr.sendRequest(\"System\", \"WatchAdvertisement\",config.rewardedVideoType);\n                // console.log(\">>>>>rewardedVideoType:\",config.rewardedVideoType);\n                if(config.rewardedVideoType == 1){\n                    if(config.videoEndFuc)\n                        config.videoEndFuc();\n                }\n            }\n            else {\n                // console.log(\"播放中途退出，不下发游戏奖励\")\n            }\n            // cc.vv.audioMgr.playBGM(\"MusicEx_Welcome\");\n        })\n\n        config.rewardedVideoAd = rewardedVideoAd;\n    },\n    showTimes(time){\n        //秒转换分钟格式 2:00 == 120\n        var times = \"00:00\";\n        var fen = Math.floor(time/60);\n        var miao = time - fen*60; \n        var strfen = \"00\";\n        var strmiao = \"00\";\n        if(fen == 0){\n            strfen = \"00\";\n        }else if(fen < 10){\n            strfen = \"0\"+fen;\n        }else{\n            strfen = \"\"+fen;\n        }\n        if(miao == 0){\n            strmiao = \"00\";\n        }else if(miao < 10){\n            strmiao = \"0\"+miao;\n        }else{\n            strmiao = \"\"+miao;\n        }\n        times = strfen+\":\"+strmiao;\n        return times;\n    },\n    onDestroy(){\n        console.log(\" HallLayer Destroy\");\n        var self = this;\n        EventHelper.RemoveCustomEvent(config.MyNode,\"RefreshDataResult\",self.onRefreshDataResult,self);\n        EventHelper.RemoveCustomEvent(config.MyNode,\"WatchAdvertisementResult\",self.onWatchAdvertisementResult,self);\n    },\n    onLoginRoomResult(event){\n        var self = this;\n        console.log(\"登陆房间回掉---\");\n        var data = event.getUserData();\n        // console.log(data);\n        self.handleLoginRoomResult(data); \n    },\n    preloadNextScene(){\n        var self = this;\n        EventHelper.RemoveCustomEvent(config.MyNode,Events.Network.LoginRoomResult,self.onLoginRoomResult,self);\n        cc.director.preloadScene(\"GameScene\", function () {\n            // cc.log(\"Next scene preloaded\");\n            cc.director.loadScene(\"GameScene\");\n        });\n    },\n    onRefreshDataResult(event){\n        var payload = event.getUserData();\n        console.log(\"onRefreshDataResult  33333\")\n        //未读邮件数\n        if (payload.data){\n            if(payload.data.mail_unread>0){\n                this.mailTip.enabled = true;\n            }else{\n                this.mailTip.enabled = false;\n            }\n        }\n        //未领取任务数\n        if (payload.data){\n            if(payload.data.weichatgame_task_unaward>0){\n                this.taskTip.enabled = true;\n            }else{\n                this.taskTip.enabled = false;\n            }\n        }\n        //未领取分享数\n        if (payload.data){\n            if(payload.data.weichatgame_invite_unaward>0){\n                this.shareTip.enabled = true;\n            }else{\n                this.shareTip.enabled = false;\n            }\n        }\n    },\n    btnSetClick(){\n        // console.log(\"btnSetClick\");\n        dialogManager.showSetDialog();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnTaskClick(){\n        // console.log(\"btnTaskClick\");\n        dialogManager.showTaskDialog();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnEmailClick(){\n        // console.log(\"btnEmailClick\");\n        dialogManager.showEmailDialog();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnBagClick(){\n        // console.log(\"btnBagClick\");\n        dialogManager.showBagDialog();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnShopClick(){\n        // console.log(\"btnShopClick\");\n        // dialogManager.showShopDialog();\n    },\n    btnShareClick(){\n        // console.log(\"btnShareClick\");\n        dialogManager.showShareDialog();\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnVideoAdClick(){\n        // console.log(\"btnVideoAdClick\");\n        if(!this.adCanTouch){\n            // console.log(\"cd中。。。。。。。。\")\n            return;\n        }\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n        if(typeof(wx)==\"undefined\"){\n            return;\n        }\n        config.rewardedVideoType = 1;\n        if(config.rewardedVideoAd){\n            var self = this;\n            var videoEndFuc  = function(){\n                self.btn_videoAd.node.color = new cc.Color(218, 218, 218);\n                self.adCanTouch = false;\n            }\n            config.videoEndFuc = videoEndFuc;\n            config.rewardedVideoAd.show().then();//() => cc.vv.audioMgr.stopMusic()\n        }\n           \n\n        \n    },\n    btnKefuClick(){\n        // console.log(\"btnKefuClick\");\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n        \n        if(typeof(wx)==\"undefined\"){\n            return;\n        }\n        wx.openCustomerServiceConversation({\n            success:function(res) {\n                // console.log(\"吊起会话成功>>>>>>>\");\n            },\n            fail:function(res){\n                // console.log(\"吊起会失败>>>>>>>\");\n            },\n            complete:function(res){\n                // console.log(\"会话完成>>>>>>>>\");\n            }\n        })\n    },\n    handleLoginRoomResult(event){\n        console.log(\"--进入上局未完的普通牌桌>>>\");\n        var payload = event.payload;\n        var args = {};\n        args[\"baseCoins\"] = payload[\"data\"][\"baseCoins\"];\n        args[\"rate\"] = payload[\"data\"][\"rate\"];\n        args[\"limitCoins\"] = payload[\"data\"][\"limitCoins\"];\n        args[\"rake\"] = payload[\"data\"][\"rake\"];\n        args[\"roomId\"] = payload[\"data\"][\"roomId\"];\n        args[\"rateMax\"] = payload[\"data\"][\"rateMax\"];\n        args[\"enterLimit\"] = payload[\"data\"][\"enterLimit\"];\n        args[\"emoticon\"] = payload[\"data\"][\"emoticon\"];\n        args[\"emoticon_items\"] = payload[\"data\"][\"emoticon_items\"];\n        args[\"advert\"] = payload[\"data\"][\"advert\"]; //记牌器数据\n\n        if(payload[\"data\"][\"modelId\"]){\n            args[\"modelId\"] = payload[\"data\"][\"modelId\"];\n        }\n        args[\"buys\"] = payload[\"data\"][\"buys\"];\n        args[\"givecoins\"] = null;\n\n        if(payload[\"data\"][\"isContinue\"] && parseInt(payload[\"data\"][\"isContinue\"]) == 1){\n            args[\"isContinueGaming\"] = true\n        } \n        var m_sended = payload[\"data\"][\"sendCoins\"];\n        var m_totalTimes = payload[\"data\"][\"sendCoinsTimes\"];\n        var m_curTimes = payload[\"data\"][\"sendCoinsTimesToday\"];\n\n        if(m_sended && m_sended > 0){\n            args[\"givecoins\"] = {\n                sended : m_sended,\n                totalTimes : m_totalTimes,\n                curTimes : m_curTimes,\n            };\n            //刷新用户乐豆乐券\n            // console.log(\"刷新用户乐豆乐券\");\n        }\n        config.tableInfo = args;\n\n        console.log(config.tableInfo);\n\n        config.IsContinueGaming = 1;\n        this.preloadNextScene();\n    },\n    onWatchAdvertisementResult(event){\n        // console.log(\"-----看完广告领奖\");\n        var response = event.getUserData();\n        var award = response.data;\n        var list = [];\n        if(award.coins){\n            var args = {\n                arg1:\"ledou\",\n                arg2:award.coins,\n            }\n            list.push(args);\n        } \n        if(award.coupon){\n            var args = {\n                arg1:\"lequan\",\n                arg2:award.coupon,\n            }\n            list.push(args);\n        } \n        if(award.noteCards){\n            var args = {\n                arg1:\"jipaiqi\",\n                arg2:award.noteCards,\n            }\n            list.push(args);\n        } \n        if(list.length>0){\n            dialogManager.showAnimGetProp(list);\n        }\n        config.adCdTime = award.watch_advertisement_cd;\n        this.timeCount = config.adCdTime;\n    }\n});\n"]}