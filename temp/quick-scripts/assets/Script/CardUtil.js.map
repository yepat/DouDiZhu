{"version":3,"sources":["CardUtil.js"],"names":["config","require","PopCardUtil","CardUtil","cardGrade","J","Q","K","A","g","G","StringToNumber","str","num","parseInt","NumberToString","gradeDown","card1","card2","showTxt","gradeUp","getMyTopCards","myPokerNode","PokerControl","topcards","i","length","pokerControl","getComponent","cardData","isTopped","push","cardValue","AutoChooseLiftUpCard","cards","console","log","maxLenght","pktxt","cardvalue","setChoosed","cardMove","is_rank_consective_inc","count","extend","table1","table2","get_topCard_type","topCards","sameValues","getSameCards","setSameVulueCardCount","topLength","blt","cardtype","type","rank","repeatCount","single","getSingle","CardType","Single","pair","getPair","Pair","DoubleKing","three","getThree","ThreeOfKind","four","getFour","Bomb","ThreeOfKindPlusOne","singleNum","pairNum","threeNum","fourNum","singleCards","SingleCards","pairCards","PairCards","threeCards","ThreeCards","fourCards","FourCards","singleSetConsective","pairSetConsective","threeSetConsective","consectiveEnd","FourPlusOne","FourPlusTwo","ThreeOfKindPlusPair","StraightThree","StraightDouble","Straight","allThree","StraightThreePlusSingle","StraightThreePlusPair","isConsective","sort","arrayUp","allThreeLength","getCardsFromTopCards","myCards","myCardsLength","topCardsLength","classificationCards","autoCards","key","kCount","temp","tempCount","j","classificationTopCards","topKeys","k","k1","k2","kk","d","get_cards_larger","last_cards_type","all_result","prop","cardsType","find_single_card","find_pair_card","find_three_card","find_bomb_card","find_three_with_one_card","find_three_with_two_card","find_four_with_two_single_card","find_four_with_two_pair_card","find_straight","find_pair_straight","find_three_straight","find_three_straight_with_single_card","find_three_straight_with_pair_card","all_bomb","find_bomb_all","v","allcards","slice","values","allOne","onecard","n","tempPair","temps","tempCards","len","temparr","arraySub","allpair","tempNum","arraySub2","arraySub3","module","exports"],"mappings":"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","file":"CardUtil.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\r\nvar config = require(\"config\");\r\nvar PopCardUtil = require(\"PopCardUtil\");\r\n\r\nvar CardUtil = {};\r\n\r\nCardUtil.cardGrade = {\r\n    3 : 3,\r\n    4 : 4,\r\n    5 : 5,\r\n    6 : 6,\r\n    7 : 7,\r\n    8 : 8,\r\n    9 : 9,\r\n    10: 10,\r\n    J : 11,\r\n    Q : 12,\r\n    K : 13,\r\n    A : 14,\r\n    2 : 15,\r\n    g : 16,\r\n    G : 17,\r\n};\r\n\r\n//牌直转换（文本转数值）\r\nCardUtil.StringToNumber = function(str){\r\n    var num = 0;\r\n    if(str == \"J\"){\r\n        num = 11;\r\n    }else if(str == \"Q\"){\r\n        num = 12;\r\n    }else if(str == \"K\"){\r\n        num = 13;\r\n    }else if(str == \"A\"){\r\n        num = 14;\r\n    }else if(str == \"2\"){\r\n        num = 15;\r\n    }else if(str == \"g\"){\r\n        num = 16;\r\n    }else if(str == \"G\"){\r\n        num = 17;\r\n    }else{\r\n        if(typeof(str)==\"string\"){\r\n            num = parseInt(str);\r\n        }else{\r\n            num = str;\r\n        }  \r\n    }\r\n    return num;\r\n}\r\n\r\nCardUtil.NumberToString = function(num){\r\n    var str = \"\";\r\n    if(num == 11){\r\n        str = \"J\";\r\n    }else if(num == 12){\r\n        str = \"Q\";\r\n    }else if(num == 13){\r\n        str = \"K\";\r\n    }else if(num == 14){\r\n        str = \"A\";\r\n    }else if(num == 15){\r\n        str = \"2\";\r\n    }else if(num == 16){\r\n        str = \"g\";\r\n    }else if(num == 17){\r\n        str = \"G\";\r\n    }else{\r\n        str = str+num;  \r\n    }\r\n    return str;\r\n}\r\n\r\n//降序排列\r\nCardUtil.gradeDown = function(card1,card2){\r\n    return CardUtil.cardGrade[card2.showTxt] - CardUtil.cardGrade[card1.showTxt]\r\n}\r\n\r\n//升序排列\r\nCardUtil.gradeUp = function(card1,card2){\r\n    return CardUtil.cardGrade[card1.showTxt] - CardUtil.cardGrade[card2.showTxt]\r\n}\r\n\r\n//获取提起的牌值\r\nCardUtil.getMyTopCards = function(myPokerNode,PokerControl){\r\n    var topcards = [];\r\n    for(var i = myPokerNode.length-1;i > 0;i--){\r\n        var pokerControl = myPokerNode[i].getComponent(PokerControl);\r\n        if(pokerControl.cardData.isTopped){\r\n            topcards.push(pokerControl.cardValue);\r\n        }\r\n    }\r\n    return topcards;\r\n}\r\n\r\n//提起手牌\r\nCardUtil.AutoChooseLiftUpCard = function(myPokerNode,PokerControl,cards){\r\n    console.log(\"tishiFunc!!\");\r\n    // var cards = [\"3\",\"3\",\"5\",\"6\",\"7\"];\r\n    var maxLenght = 0;\r\n    var num = 0;\r\n\r\n    console.log(typeof(cards));\r\n    if(!cards){\r\n        console.log(\"没有符合牌型！\");\r\n        return;\r\n    }\r\n\r\n    if(typeof(cards) == \"number\"){\r\n        console.log(\"这是个数字\");\r\n        maxLenght = 1;\r\n    }else{ //if(typeof(cards) == \"string\")\r\n        // console.log(\"这是个字符\");\r\n        maxLenght = cards.length;\r\n    }\r\n\r\n    console.log(\"maxLenght:\"+maxLenght);\r\n\r\n    // myPokerData.sort(CardUtil.gradeDown);\r\n\r\n    for(var i = myPokerNode.length-1;i >= 0;i--){\r\n        var pokerControl = myPokerNode[i].getComponent(PokerControl);\r\n        // var pktxt = pokerControl.cardData.showTxt;\r\n        var pktxt = parseInt(pokerControl.cardValue);\r\n        var cardvalue = parseInt(cards[num]);\r\n        if(maxLenght == 1){\r\n            cardvalue = cards;\r\n        }else{\r\n            // cardvalue = parseInt(cards[num]);\r\n        }\r\n        console.log(\"cardvalue:\"+cardvalue+\" pktxt:\"+pktxt);//+\" cards[num]:\"+cards[num]\r\n        if(num<maxLenght&&cardvalue==pktxt)\r\n        {\r\n            console.log(\"num:\"+num);\r\n            num++;\r\n            pokerControl.setChoosed(true);\r\n        }\r\n    }\r\n    if(num<cards.length){\r\n        for(var i = myPokerNode.length-1;i >= 0;i--){\r\n            var pokerControl = myPokerNode[i].getComponent(PokerControl);\r\n            pokerControl.setChoosed(false);\r\n        }\r\n    }else{\r\n        for(var i = myPokerNode.length-1;i >= 0;i--){\r\n            var pokerControl = myPokerNode[i].getComponent(PokerControl);\r\n            // if(!pokerControl.cardData.isTopped&&pokerControl.cardData.isChoosed){\r\n                pokerControl.cardMove();\r\n            // }\r\n        }\r\n    } \r\n}\r\n//判断是否连续\r\nCardUtil.is_rank_consective_inc = function(cards){\r\n    var count = 0;\r\n    count = cards.length;\r\n    if(count<2){\r\n        return true;\r\n    }\r\n\r\n    //这里是降?\r\n    for(var i=0;i<count-1;i++){\r\n        if((cards[i][0]+1) != cards[i + 1][0]){\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n//3个头和4个头放在一起\r\nCardUtil.extend = function(table1, table2){\r\n    if(!table1 || !table2){\r\n        console.log(\"table can not be nil\");\r\n        return false;\r\n    }\r\n\r\n    for(var i =0;i<table2.length;i++){\r\n        if(table2[i]){\r\n            table1.push(table2[i]);\r\n        }\r\n    }\r\n}\r\n\r\n//判断提起的牌是否合法\r\nCardUtil.get_topCard_type = function(topCards){\r\n\r\n    if(typeof(topCards) == \"number\"){\r\n        console.log(\"这是个数字\");\r\n        topCards = [topCards];\r\n    }else{\r\n    }\r\n\r\n    //相同值归类并统计\r\n    var sameValues = PopCardUtil.getSameCards(topCards);\r\n    PopCardUtil.setSameVulueCardCount(sameValues);\r\n\r\n    var topLength = topCards.length;\r\n    var blt = false;\r\n\r\n    var cardtype = [];\r\n    cardtype.type = 0;\r\n    cardtype.rank = 0;\r\n    cardtype.repeatCount = 0;\r\n\r\n    if(topLength == 1){\r\n        //单只\r\n        var single = PopCardUtil.getSingle();\r\n        cardtype.type = config.CardType.Single;\r\n        cardtype.rank = topCards[0];\r\n        cardtype.repeatCount = 1;\r\n        console.log(\"单只\");\r\n        return cardtype;\r\n    }else if(topLength == 2){\r\n        //对子 王炸\r\n        var pair = PopCardUtil.getPair();\r\n        if(pair.count==1){\r\n            cardtype.type = config.CardType.Pair;\r\n            cardtype.rank = topCards[0];\r\n            cardtype.repeatCount = 1;\r\n            console.log(\"对子\");\r\n            return cardtype;\r\n        }else if(topCards[0]==16&&topCards[1]==17){\r\n            cardtype.type = config.CardType.DoubleKing;\r\n            cardtype.rank = topCards[0];\r\n            cardtype.repeatCount = 1;\r\n            console.log(\"王炸\");\r\n            return cardtype;\r\n        }\r\n    }else if(topLength == 3){\r\n        //三不带\r\n        var three = PopCardUtil.getThree();\r\n        if(three.count>0){\r\n            cardtype.type = config.CardType.ThreeOfKind;\r\n            cardtype.rank = three.cards[0][0];\r\n            cardtype.repeatCount = 1;\r\n            console.log(\"三不带\");\r\n            return cardtype;\r\n        } \r\n    }else if(topLength == 4){\r\n        //三带一 炸弹\r\n        var three = PopCardUtil.getThree();\r\n        var four = PopCardUtil.getFour();\r\n        if(four.count>0){\r\n            cardtype.type = config.CardType.Bomb;\r\n            cardtype.rank = four.cards[0][0];\r\n            cardtype.repeatCount = 1;\r\n            console.log(\"炸弹\");\r\n            return cardtype;\r\n        }else if(three.count>0){\r\n            cardtype.type = config.CardType.ThreeOfKindPlusOne;\r\n            cardtype.rank = three.cards[0][0];\r\n            cardtype.repeatCount = 1;\r\n            console.log(\"三带一\");\r\n            return cardtype;\r\n        }\r\n    }else{\r\n        //三带一对 四带一 顺子\r\n        var single = PopCardUtil.getSingle();\r\n        var pair = PopCardUtil.getPair();\r\n        var three = PopCardUtil.getThree();\r\n        var four = PopCardUtil.getFour();\r\n\r\n        var singleNum = single.count;\r\n        var pairNum = pair.count;\r\n        var threeNum = three.count;\r\n        var fourNum = four.count;\r\n\r\n        var singleCards = PopCardUtil.SingleCards;\r\n        var pairCards = PopCardUtil.PairCards;\r\n        var threeCards = PopCardUtil.ThreeCards;\r\n        var fourCards = PopCardUtil.FourCards; \r\n\r\n        var singleSetConsective = CardUtil.is_rank_consective_inc(singleCards);\r\n        var pairSetConsective = CardUtil.is_rank_consective_inc(pairCards);\r\n        var threeSetConsective = CardUtil.is_rank_consective_inc(threeCards);\r\n\r\n        var consectiveEnd = CardUtil.cardGrade[\"2\"];\r\n\r\n        // for(var i=0;i<threeCards.length;i++){\r\n        //     console.log(\"three:\"+threeCards[i]);\r\n        // }\r\n\r\n        //四带\r\n        if(fourNum == 1 && threeNum == 0){\r\n            if(singleNum == 2 && pairNum == 0){\r\n                cardtype.type = config.CardType.FourPlusOne;\r\n                cardtype.rank = fourCards[0][0];\r\n                cardtype.repeatCount = 1;\r\n                console.log(\"四带二单\");\r\n                return cardtype;\r\n            }else if(singleNum == 0 && pairNum == 1){\r\n                cardtype.type = config.CardType.FourPlusOne;\r\n                cardtype.rank = fourCards[0][0];\r\n                cardtype.repeatCount = 1;\r\n                console.log(\"四带一对\");\r\n                return cardtype;\r\n            }else if(singleNum == 0 && pairNum == 2){\r\n                cardtype.type = config.CardType.FourPlusTwo;\r\n                cardtype.rank = fourCards[0][0];\r\n                cardtype.repeatCount = 1;\r\n                console.log(\"四带两对\");\r\n                return cardtype;\r\n            }\r\n        }\r\n        //三带一对\r\n        if(threeNum==1&&singleNum==0&&pairNum==1&&fourNum==0){\r\n            cardtype.type = config.CardType.ThreeOfKindPlusPair;\r\n            cardtype.rank = threeCards[0][0];\r\n            cardtype.repeatCount = 1;\r\n            console.log(\"三带一对\");\r\n            return cardtype;\r\n        }\r\n        //飞机不带\r\n        if(threeNum>1&&singleNum==0&&pairNum==0&&fourNum==0){\r\n            if(threeSetConsective&&threeCards[threeNum-1][0]<consectiveEnd){\r\n                cardtype.type = config.CardType.StraightThree;\r\n                cardtype.rank = threeCards[0][0];\r\n                cardtype.repeatCount = threeNum;\r\n                console.log(\"飞机不带\");\r\n                return cardtype;\r\n            }\r\n        }\r\n        //连队\r\n        if (pairNum > 2 && singleNum == 0 && threeNum == 0 && fourNum == 0){\r\n            if(pairSetConsective&&pairCards[pairNum-1][0]<consectiveEnd){\r\n                cardtype.type = config.CardType.StraightDouble;\r\n                cardtype.rank = pairCards[0][0];\r\n                cardtype.repeatCount = pairNum;\r\n                console.log(\"连对\");\r\n                return cardtype;\r\n            }\r\n        }\r\n        //顺子\r\n        if (singleNum > 4 && pairNum == 0 && threeNum == 0 && fourNum == 0){\r\n            if(singleSetConsective&&singleCards[singleNum-1][0]<consectiveEnd){\r\n                cardtype.type = config.CardType.Straight;\r\n                cardtype.rank = singleCards[0][0];\r\n                cardtype.repeatCount = singleNum;\r\n                console.log(\"顺子\");\r\n                return cardtype;\r\n            }\r\n        }\r\n\r\n        var allThree = [];\r\n\r\n        if(threeNum>0){\r\n            if(singleNum==threeNum && pairNum==0 && fourNum==0){\r\n                //飞机带单\r\n                if(threeSetConsective&&threeCards[threeNum-1][0]<consectiveEnd){\r\n                    cardtype.type = config.CardType.StraightThreePlusSingle;\r\n                    cardtype.rank = threeCards[0][0];\r\n                    cardtype.repeatCount = threeNum;\r\n                    console.log(\"飞机带单\");\r\n                    return cardtype;\r\n                }  \r\n            }else if(singleNum==0 && pairNum==threeNum && fourNum==0){\r\n                if(threeSetConsective&&threeCards[threeNum-1][0]<consectiveEnd){\r\n                    cardtype.type  = config.CardType.StraightThreePlusPair;\r\n                    cardtype.rank = threeCards[0][0];\r\n                    cardtype.repeatCount = threeNum;\r\n                    console.log(\"飞机带双\");\r\n                    return cardtype;\r\n                }\r\n            }else if((singleNum+pairNum*2)==threeNum && fourNum==0){\r\n                if(threeSetConsective&&threeCards[threeNum-1][0]<consectiveEnd){\r\n                    cardtype.type = config.CardType.StraightThreePlusSingle;\r\n                    cardtype.rank = threeCards[0][0];\r\n                    cardtype.repeatCount = threeNum;\r\n                    console.log(\"飞机带单\");\r\n                    return cardtype;\r\n                } \r\n            }else if((threeNum+fourNum) == (pairNum*2 + singleNum + fourNum)){\r\n                //带炸弹的飞机（4=3+1）\r\n                console.log(\"带炸弹的飞机（4=3+1）\");\r\n                var isConsective = threeSetConsective;\r\n                if(fourNum > 0){\r\n                    CardUtil.extend(allThree, threeCards);\r\n                    CardUtil.extend(allThree, fourCards);\r\n                    allThree.sort(config.arrayUp);\r\n                    isConsective = CardUtil.is_rank_consective_inc(allThree)\r\n                }else{\r\n                    allThree = threeCards;\r\n                }\r\n                var allThreeLength = allThree.length;\r\n                if(isConsective&&allThree[allThreeLength-1][0]<consectiveEnd){\r\n                    cardtype.type = config.CardType.StraightThreePlusSingle;\r\n                    cardtype.rank = threeCards[0][0];\r\n                    cardtype.repeatCount = allThreeLength;\r\n                    console.log(\"飞机带单2\");\r\n                    return cardtype;\r\n                }\r\n\r\n            }else{\r\n                if((pairNum + fourNum*2) == threeNum && singleNum==0){ //炸弹拆开当对子\r\n                    if(threeSetConsective&&threeCards[threeNum-1][0]<consectiveEnd){\r\n                        cardtype.type = config.CardType.StraightThreePlusPair;\r\n                        cardtype.rank = threeCards[0][0];\r\n                        cardtype.repeatCount = threeNum;\r\n                        console.log(\"飞机带双2\");\r\n                        return cardtype;\r\n                    }\r\n                }\r\n\r\n                if(threeNum>3){//三飞以上给服务器判断\r\n                    cardtype.type = -1;\r\n                    console.log(\"特殊牌型\");\r\n                    return cardtype;\r\n                }\r\n\r\n                \r\n                // cardtype.type = -1;\r\n                return cardtype; //一些特殊情况交给服务器了 比如：3个拆开当单只， \r\n            } \r\n        }\r\n\r\n\r\n    }\r\n    return cardtype;\r\n}\r\n\r\n//根据提起的牌智能提牌\r\nCardUtil.getCardsFromTopCards = function(myCards,topCards){\r\n    var myCards = myCards;\r\n    var topCards = topCards;\r\n    topCards.sort(config.arrayUp);\r\n    var myCardsLength = myCards.length;\r\n    var topCardsLength = topCards.length;\r\n\r\n    //值相同的牌放在一起\r\n    var classificationCards = {};\r\n    //相同值归类并统计\r\n    classificationCards = PopCardUtil.getSameCards(myCards);\r\n    // PopCardUtil.setSameVulueCardCount(classificationCards);\r\n\r\n    var autoCards = [];\r\n    if(topCardsLength == 2){\r\n        if(topCards[0] == topCards[1]){\r\n            var key = topCards[0];\r\n            //提起的牌值在牌面上能组成炸弹\r\n            var kCount = classificationCards[key].length;\r\n            console.log(\"key:\"+key+\" kCount:\"+kCount);\r\n            if (kCount == 4){\r\n                console.log(\"炸弹----------\");\r\n                autoCards = classificationCards[key];\r\n                return autoCards;\r\n            }\r\n\r\n            if(kCount == 3 && key != \"2\"){\r\n                console.log(\"可能有飞机\")\r\n                var temp = [];\r\n                var tempCount = 0;\r\n                temp[tempCount] = classificationCards[key];\r\n                //提起的牌值(++)\r\n                for(var i = 1;i<myCardsLength;i++){\r\n                    if(classificationCards[key+i]&&classificationCards[key+i].length == 3&& key+i != \"2\"){\r\n                        tempCount++;\r\n                        temp[tempCount] = classificationCards[key+i];\r\n                        console.log(\"key+i:\"+(key+i));\r\n                    }else{\r\n                        break;\r\n                    }\r\n                }\r\n                //提起的牌值(--)\r\n                for(var i = 1;i<myCardsLength;i++){\r\n                    if(classificationCards[key-i]&&classificationCards[key-i].length == 3&& key+i != \"2\"){\r\n                        tempCount++;\r\n                        temp[tempCount] = classificationCards[key-i];\r\n                        console.log(\"key+i:\"+(key-i));\r\n                    }else{\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                //检查牌组是否是飞机\r\n                if(temp.length>1){\r\n                    for(var i = 0;i<temp.length;i++){\r\n                        for(var j=0;j<temp[i].length;j++){\r\n                            console.log(\"temp:\"+temp[i][j]);\r\n                            autoCards.push(temp[i][j]);\r\n                        }\r\n                    }\r\n                }\r\n                autoCards.sort(config.arrayUp);\r\n                return autoCards;\r\n            }\r\n                \r\n        }else if(topCards[0] + 1 == topCards[1]){\r\n            if(topCards[1]>=CardUtil.cardGrade[\"2\"]){\r\n                autoCards = topCards;\r\n                return autoCards;\r\n            }\r\n\r\n            var key = topCards[1]\r\n            autoCards = topCards\r\n            for(var i =1;i<=3;i++){\r\n                if (classificationCards[key+i] && key+i < CardUtil.cardGrade[\"2\"]){\r\n                    //满足组成顺子的牌\r\n                    autoCards.push(classificationCards[key+i][0]);\r\n                }\r\n            }\r\n            if(autoCards.length<5){\r\n                autoCards = [];\r\n            }\r\n            return autoCards;\r\n\r\n        }else{\r\n            autoCards = [];\r\n            return autoCards;\r\n        }\r\n    }else if(topCardsLength == 3){\r\n        //连队判定\r\n        console.log(\"连队判定\");\r\n        var classificationTopCards = {};\r\n        classificationTopCards = PopCardUtil.getSameCards(topCards);\r\n        // classificationTopCards.sort();\r\n        if(classificationTopCards.length > 2){\r\n            var topKeys = [];\r\n            for(var k in classificationTopCards){\r\n                topKeys.push(k);\r\n            }\r\n            var k1 = parseInt(topKeys[0]);\r\n            var k2 = parseInt(topKeys[1]);\r\n            var kk = k1 + 1;\r\n            // console.log(\"k1:\"+k1+\" k2:\"+k2+\" kk:\"+kk);\r\n            if(kk==k2&&k2<CardUtil.cardGrade[\"2\"]){\r\n                var key=k1;\r\n                for(var k in classificationCards){\r\n                    if(k == key){\r\n                        var d = classificationCards[k];\r\n                        console.log(\"d:\"+d.length+\"  k:\"+k);\r\n                        if(d.length>=2){\r\n                            for(var i=0;i<2;i++){\r\n                                autoCards.push(d[i]);\r\n                            }\r\n                            key++;\r\n                        }else{\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if(autoCards.length<6){\r\n                    autoCards =[];\r\n                }\r\n                return autoCards;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    return autoCards;\r\n}\r\n\r\n\r\n//提示----------------------------------------\r\n\r\n// config.CardType = {\r\n// \tSingle : 1,                         //单张\r\n// \tPair : 2,                           //对子\r\n// \tThreeOfKind : 3,                    //三不带\r\n// \tThreeOfKindPlusOne : 4,             //三带一\r\n// \tThreeOfKindPlusPair : 5,            //三带二\r\n// \tStraight : 6,                       //顺子\r\n// \tStraightDouble : 7,\t\t\t\t\t//双顺  33 44 55\r\n// \tStraightThree : 8,\t\t\t\t\t//三顺  333 444    飞机  [333 444 555 a b c/ aa bb cc]\r\n// \tStraightThreePlusSingle : 9,\t\t//三顺+散牌 飞机带翅膀  333 444 5 6 / +一对\r\n// \tStraightThreePlusPair : 10,\t\t\t//三顺+对   飞机带翅膀  333 444 66 77\r\n// \tSoftBomb : 87,\t\t\t\t\t\t//软炸弹\r\n// \tBomb : 88,\t\t\t\t\t\t\t//炸弹\r\n// \tLazarilloBomb : 89,\t\t\t\t\t//纯癞子炸弹\r\n// \tDoubleKing : 99,\t\t\t\t\t//双王\r\n// \tFourPlusOne : 11,\t\t\t\t\t//四带1, 四只带两只单牌\r\n// \tFourPlusTwo : 12,\t\t\t\t\t//四带2, 四只带两对\r\n// }\r\n\r\n//获取比上家大的牌\r\nCardUtil.get_cards_larger = function(last_cards_type,myCards){\r\n    var all_result = [];\r\n    \r\n    var prop = PopCardUtil.getSameCards(myCards);\r\n    // PopCardUtil.setSameVulueCardCount(classificationCards);\r\n\r\n    var cardsType =  last_cards_type.type;\r\n    if(cardsType == config.CardType.Single){\r\n        all_result = CardUtil.find_single_card(last_cards_type,prop,myCards);\r\n    }else if(cardsType == config.CardType.Pair){\r\n        all_result = CardUtil.find_pair_card(last_cards_type,prop,myCards);\r\n    }else if(cardsType == config.CardType.ThreeOfKind){\r\n        all_result = CardUtil.find_three_card(last_cards_type,prop,myCards);\r\n    }else if(cardsType == config.CardType.Bomb){\r\n        all_result = CardUtil.find_bomb_card(last_cards_type,prop,myCards);\r\n    }else if(cardsType == config.CardType.ThreeOfKindPlusOne){\r\n        all_result = CardUtil.find_three_with_one_card(last_cards_type,prop,myCards);\r\n    }else if(cardsType == config.CardType.ThreeOfKindPlusPair){\r\n        all_result = CardUtil.find_three_with_two_card(last_cards_type,prop,myCards);\r\n    }else if(cardsType == config.CardType.FourPlusOne){\r\n        all_result = CardUtil.find_four_with_two_single_card(last_cards_type,prop,myCards);\r\n    }else if(cardsType == config.CardType.FourPlusTwo){\r\n        all_result = CardUtil.find_four_with_two_pair_card(last_cards_type,prop,myCards);\r\n    }else if(cardsType == config.CardType.Straight){\r\n        all_result = CardUtil.find_straight(last_cards_type,prop,myCards);\r\n    }else if(cardsType == config.CardType.StraightDouble){\r\n        all_result = CardUtil.find_pair_straight(last_cards_type,prop,myCards);\r\n    }else if(cardsType == config.CardType.StraightThree){\r\n        all_result = CardUtil.find_three_straight(last_cards_type,prop,myCards);\r\n    }else if(cardsType == config.CardType.StraightThreePlusSingle){\r\n        all_result = CardUtil.find_three_straight_with_single_card(last_cards_type,prop,myCards);\r\n    }else if(cardsType == config.CardType.StraightThreePlusPair){\r\n        all_result = CardUtil.find_three_straight_with_pair_card(last_cards_type,prop,myCards);\r\n    }\r\n\r\n    if(cardsType != config.CardType.Bomb && cardsType != config.CardType.DoubleKing){\r\n        var all_bomb = CardUtil.find_bomb_all(prop);\r\n        for(var i=0;i<all_bomb.length;i++){\r\n            all_result.push(all_bomb[i]);\r\n        }\r\n    }\r\n\r\n    return all_result;\r\n}\r\n//符合条件的单张牌\r\nCardUtil.find_single_card = function(last_cards_type,prop,myCards){\r\n    var all_result = [];\r\n    PopCardUtil.setSameVulueCardCount(prop);\r\n    var single = PopCardUtil.getSingle();\r\n    var rank = parseInt(last_cards_type.rank);\r\n    // console.log(\"符合条件的单张牌\");\r\n    if(single.count>0){\r\n        for(var k in single.cards){\r\n            var v = single.cards[k];\r\n            // console.log(\"v:\"+v+\"  k:\"+k);\r\n            if (rank < v){\r\n                all_result.push(v);\r\n            }\r\n        }\r\n        return all_result;\r\n    }\r\n\r\n    //没有适合单张 就拆分牌\r\n    var allcards = [];//所有牌值\r\n    for(var k in prop){\r\n        var v = prop[k];\r\n        // console.log(\"v:\"+v[0]+\"  k:\"+k);\r\n        allcards.push(k);\r\n    }\r\n\r\n    // console.log(\"length::\"+all_result.length);\r\n    if(all_result.length <= 0){\r\n        for(var k in allcards){\r\n            var v = parseInt(allcards[k]);\r\n            // console.log(\"v:\"+v+\"  k:\"+k);\r\n            if (rank < v){\r\n                all_result.push(v);\r\n            }\r\n        }\r\n    }\r\n\r\n    return all_result;\r\n}\r\n\r\n//找合适的对子出牌\r\nCardUtil.find_pair_card = function(last_cards_type, prop, myCards){\r\n    var all_result = [];\r\n    PopCardUtil.setSameVulueCardCount(prop);\r\n    var pair = PopCardUtil.getPair();\r\n    // console.log(\"符合条件的对子牌\");\r\n    var rank = parseInt(last_cards_type.rank);\r\n    if(pair.count>0){\r\n        for(var k in pair.cards){\r\n            var v = pair.cards[k];\r\n            // console.log(\"v:\"+v[0]+\"  k:\"+k);\r\n            if (rank < v[0]){\r\n                all_result.push(v);\r\n            }\r\n        }\r\n        return all_result;\r\n    }\r\n    //没有适合对子 就拆分牌\r\n    var allcards = [];//所有牌值\r\n    if(all_result.length <= 0){\r\n        var three = PopCardUtil.getThree();\r\n        var four = PopCardUtil.getFour();\r\n        if(three.count>0){\r\n            for(var k in three.cards){\r\n                var d = three.cards[k];\r\n                if(rank<d[0])\r\n                {\r\n                    var temp =d.slice(0,2);\r\n                    allcards.push(temp);\r\n                }\r\n            }\r\n        }\r\n        if(four.count>0){\r\n            for(var k in four.cards){\r\n                var d = four.cards[k];\r\n                if(rank<d[0])\r\n                {\r\n                    var temp =d.slice(0,2);\r\n                    allcards.push(temp);\r\n                }\r\n            }\r\n        }\r\n        return allcards;\r\n    }\r\n\r\n    return all_result;\r\n}\r\n\r\n//寻找合适的三个出牌\r\nCardUtil.find_three_card = function(last_cards_type, prop, myCards){\r\n    var all_result = [];\r\n    PopCardUtil.setSameVulueCardCount(prop);\r\n    var three = PopCardUtil.getThree();\r\n    var rank = parseInt(last_cards_type.rank);\r\n    if(three.count>0){\r\n        for(var k in three.cards){\r\n            var v = three.cards[k];\r\n            // console.log(\"v:\"+v[0]+\"  k:\"+k);\r\n            if (rank < v[0]){\r\n                all_result.push(v);\r\n            }\r\n        }\r\n        // return all_result;\r\n    }\r\n    return all_result;\r\n}\r\n\r\n//所有的炸弹牌\r\nCardUtil.find_bomb_all = function(prop){\r\n    var all_result = [];\r\n    PopCardUtil.setSameVulueCardCount(prop);\r\n    var four = PopCardUtil.getFour();\r\n    for(var k in four.cards){\r\n        var v = four.cards[k];\r\n        // console.log(\"v:\"+v[0]+\"  k:\"+k);\r\n        all_result.push(v);\r\n    }\r\n    \r\n    if(prop[16]&&prop[17]){\r\n        console.log(\"有王炸\");\r\n        var values =[16,17]; \r\n        all_result.push(values);\r\n    }else{\r\n        console.log(\"没有王炸\");\r\n    }\r\n\r\n    return all_result;\r\n}\r\n\r\n//找合适的炸弹牌\r\nCardUtil.find_bomb_card = function(last_cards_type, prop, myCards){\r\n    var all_result = [];\r\n    PopCardUtil.setSameVulueCardCount(prop);\r\n    var four = PopCardUtil.getFour();\r\n    var rank = parseInt(last_cards_type.rank);\r\n    if(four.count>0){\r\n        for(var k in four.cards){\r\n            var v = four.cards[k];\r\n            // console.log(\"v:\"+v[0]+\"  k:\"+k);\r\n            if (rank < v[0]){\r\n                all_result.push(v);\r\n            }\r\n        }\r\n    }\r\n    if(prop[16]&&prop[17]){\r\n        console.log(\"有王炸\");\r\n        var values =[16,17]; \r\n        all_result.push(values);\r\n    }else{\r\n        console.log(\"没有王炸\");\r\n    }\r\n\r\n    return all_result;\r\n}\r\n\r\n//找合适的三带一\r\nCardUtil.find_three_with_one_card = function(last_cards_type, prop, myCards){\r\n    var all_result = [];\r\n    PopCardUtil.setSameVulueCardCount(prop);\r\n    var three = PopCardUtil.getThree();\r\n    var rank = parseInt(last_cards_type.rank);\r\n    if(three.count>0){\r\n        for(var k in three.cards){\r\n            var v = three.cards[k];\r\n            // console.log(\"v:\"+v[0]+\"  k:\"+k);\r\n            if (rank < v[0]){\r\n                all_result.push(v);\r\n            }\r\n        }\r\n        // return all_result;\r\n    }\r\n\r\n    var single = PopCardUtil.getSingle();\r\n    var pair = PopCardUtil.getPair();\r\n    // var three = PopCardUtil.getThree();\r\n    var allOne = [];//所有三张的牌值 单张组\r\n\r\n    var onecard = 0;\r\n    if(single.count>0){\r\n        onecard = parseInt(single.cards[0]);\r\n        console.log(\"onecard1:\"+onecard);\r\n    }else if(pair.count>0){\r\n        onecard = parseInt(pair.cards[0][0]);\r\n        console.log(\"onecard2:\"+onecard);\r\n    }else{\r\n        //拆分3张\r\n        for(var k in three.cards){\r\n            var v = three.cards[k];\r\n            allOne.push(v[0]);\r\n        }\r\n\r\n    }\r\n\r\n    for(var k in all_result){\r\n        var v = all_result[k];\r\n        console.log(\"v:\"+v+\"  k:\"+k+\" allone:\"+allOne[k]);\r\n\r\n        if(onecard == 0){\r\n            if(k<allOne.length-1){\r\n                if(v[0]!=allOne[k]){\r\n                    onecard = allOne[k];\r\n                }else{\r\n                    var n = parseInt(k)+1;\r\n                    onecard = allOne[n];\r\n                }\r\n            }else{\r\n                onecard = allOne[0];\r\n            }\r\n        }\r\n        v[v.length] = onecard;//onecard\r\n        v.sort(config.arrayUp);\r\n    }\r\n \r\n    return all_result;\r\n}\r\n//三带一对\r\nCardUtil.find_three_with_two_card = function(last_cards_type, prop, myCards){\r\n    var all_result = [];\r\n    PopCardUtil.setSameVulueCardCount(prop);\r\n    var three = PopCardUtil.getThree();\r\n    var rank = parseInt(last_cards_type.rank);\r\n    if(three.count>0){\r\n        for(var k in three.cards){\r\n            var v = three.cards[k];\r\n            // console.log(\"v:\"+v[0]+\"  k:\"+k);\r\n            if (rank < v[0]){\r\n                all_result.push(v);\r\n            }\r\n        }\r\n        // return all_result;\r\n    }\r\n\r\n    var allOne = [];//所有三张的牌值 对子组\r\n    \r\n    var pair = PopCardUtil.getPair();\r\n    var tempPair = [];\r\n    if(pair.count>0){\r\n        tempPair = pair.cards[0];\r\n    }else{\r\n        //拆分3张\r\n        for(var k in three.cards){\r\n            var v = three.cards[k];\r\n            allOne.push(v[0]);\r\n        }\r\n    }\r\n\r\n    // console.log(\"tempPair:\"+tempPair+\" allOne:\"+allOne.length);\r\n\r\n    var onecard = tempPair.length;\r\n\r\n    for(var k in all_result){\r\n        var v = all_result[k];\r\n        // console.log(\"v:\"+v+\"  k:\"+k);\r\n\r\n        if(onecard == 0){\r\n            if(k<allOne.length-1){\r\n                if(v[0]!=allOne[k]){\r\n                    onecard = allOne[k];\r\n                }else{\r\n                    var n = parseInt(k)+1;\r\n                    onecard = allOne[n];\r\n                }\r\n            }else{\r\n                onecard = allOne[0];\r\n            }\r\n            for(var i=0;i<2;i++){\r\n                v.push(parseInt(onecard));\r\n            }\r\n            onecard = 0;\r\n        }else{\r\n            for(var i=0;i<tempPair.length;i++){\r\n                v.push(parseInt(tempPair[i]));\r\n            }\r\n        }\r\n\r\n        // v.concat(tempPair[0],tempPair[1]);\r\n        console.log(\"v2:\"+v);\r\n        v.sort(config.arrayUp);\r\n    }\r\n\r\n    return all_result;\r\n}\r\n//四带二\r\nCardUtil.find_four_with_two_single_card = function(last_cards_type, prop, myCards){\r\n    var all_result = [];\r\n    PopCardUtil.setSameVulueCardCount(prop);\r\n    var four = PopCardUtil.getFour();\r\n    var rank = parseInt(last_cards_type.rank);\r\n\r\n    if(four.count>0){\r\n        for(var k in four.cards){\r\n            var v = four.cards[k];\r\n            // console.log(\"v:\"+v[0]+\"  k:\"+k);\r\n            if (rank < v[0]){\r\n                all_result.push(v);\r\n            }\r\n        }\r\n        // return all_result;\r\n    }\r\n\r\n    var temps = [];\r\n\r\n    var single = PopCardUtil.getSingle();\r\n    var pair = PopCardUtil.getPair();\r\n    var three = PopCardUtil.getThree();\r\n\r\n    if(single.count>1){\r\n        for(var i=0;i<2;i++){\r\n            temps.push(parseInt(single.cards[i]));\r\n        }\r\n    }else if(pair.count>0){\r\n        for(var i=0;i<2;i++){\r\n            temps.push(parseInt(pair.cards[0]));\r\n        }\r\n    }else if(three.count>0){\r\n        for(var i=0;i<2;i++){\r\n            temps.push(parseInt(three.cards[0]));\r\n        }\r\n    }\r\n\r\n    for(var k in all_result){\r\n        var v = all_result[k];\r\n\r\n        for(var i=0;i<temps.length;i++){\r\n            v.push(parseInt(temps[i]));\r\n        }\r\n        console.log(\"v2:\"+v);\r\n        v.sort(config.arrayUp);\r\n    }\r\n\r\n    return all_result;\r\n}\r\n\r\n//四带两队\r\nCardUtil.find_four_with_two_pair_card = function(last_cards_type, prop, myCards){\r\n    var all_result = [];\r\n    PopCardUtil.setSameVulueCardCount(prop);\r\n    var four = PopCardUtil.getFour();\r\n    var rank = parseInt(last_cards_type.rank);\r\n\r\n    if(four.count>0){\r\n        for(var k in four.cards){\r\n            var v = four.cards[k];\r\n            // console.log(\"v:\"+v[0]+\"  k:\"+k);\r\n            if (rank < v[0]){\r\n                all_result.push(v);\r\n            }\r\n        }\r\n        // return all_result;\r\n    }\r\n\r\n    var temps = [];\r\n    var pair = PopCardUtil.getPair();\r\n    var three = PopCardUtil.getThree();\r\n\r\n    if(pair.count>1){\r\n        for(var i=0;i<2;i++){\r\n            for(var j=0;j<2;j++){\r\n                temps.push(parseInt(pair.cards[i]));\r\n            }\r\n        } \r\n    }else if(pair.count == 1 && three.count>0){\r\n        for(var i=0;i<2;i++){\r\n            temps.push(parseInt(pair.cards[0]));\r\n        }\r\n        for(var i=0;i<2;i++){\r\n            temps.push(parseInt(three.cards[0]));\r\n        }\r\n    }else if(three.count>1){\r\n        for(var i=0;i<2;i++){\r\n            for(var j=0;j<2;j++){\r\n                temps.push(parseInt(three.cards[i]));\r\n            }\r\n        } \r\n    }\r\n\r\n    for(var k in all_result){\r\n        var v = all_result[k];\r\n\r\n        for(var i=0;i<temps.length;i++){\r\n            v.push(parseInt(temps[i]));\r\n        }\r\n        console.log(\"v2:\"+v);\r\n        v.sort(config.arrayUp);\r\n    }\r\n\r\n    return all_result;\r\n}\r\n\r\n//符合的顺子牌\r\nCardUtil.find_straight = function(last_cards_type, prop, myCards){\r\n\r\n    var all_result = [];\r\n    PopCardUtil.setSameVulueCardCount(prop);\r\n    var rank = parseInt(last_cards_type.rank);\r\n    var repeatCount = last_cards_type.repeatCount;\r\n    var single = PopCardUtil.getSingle();\r\n\r\n    console.log(\"rank:\"+rank+\" repeatCount:\"+repeatCount);\r\n\r\n    //所有牌可以组成的顺子\r\n    var autoCards = [];\r\n    var tempCards = [];\r\n    var key = rank;\r\n    for(var i =1;i<20;i++){\r\n        if (prop[key+i] && key+i < CardUtil.cardGrade[\"2\"]){\r\n            //满足组成顺子的牌\r\n            autoCards.push(prop[key+i][0]);\r\n        }else{\r\n            if(autoCards.length>=repeatCount){\r\n                tempCards.push(autoCards);\r\n            }\r\n            autoCards = [];\r\n            continue;\r\n        }\r\n    }\r\n\r\n\r\n    console.log(tempCards);\r\n    if(tempCards.length == 0)\r\n        return all_result;\r\n    console.log(\"length:\"+tempCards[0].length);\r\n\r\n    if(tempCards[0].length > repeatCount){\r\n        var len = tempCards[0].length - repeatCount;\r\n        var temparr = [];\r\n        for(var i=0;i<=len;i++){\r\n            if(tempCards[0].length >= repeatCount+i){\r\n                temparr = config.arraySub(i,repeatCount+i,tempCards[0]);\r\n                all_result.push(temparr);\r\n            }\r\n        }\r\n    }else{\r\n        all_result = tempCards;\r\n    }\r\n\r\n    console.log(all_result);\r\n\r\n    return all_result;\r\n}\r\n\r\n//符合的连对\r\nCardUtil.find_pair_straight = function(last_cards_type, prop, myCards){\r\n    var all_result = [];\r\n    PopCardUtil.setSameVulueCardCount(prop);\r\n    var rank = parseInt(last_cards_type.rank);\r\n    var repeatCount = last_cards_type.repeatCount;\r\n    \r\n    console.log(\"rank:\"+rank+\" repeatCount:\"+repeatCount);\r\n    \r\n    var pair = PopCardUtil.getPair();\r\n    var three = PopCardUtil.getThree();\r\n    var four = PopCardUtil.getFour();\r\n    var allpair = [];\r\n\r\n    for(var i=0;i<pair.count;i++){\r\n        allpair.push(pair.cards[i][0]);\r\n    }\r\n    for(var i=0;i<three.count;i++){\r\n        allpair.push(three.cards[i][0]);\r\n    }\r\n    for(var i=0;i<four.count;i++){\r\n        allpair.push(four.cards[i][0]);\r\n    }\r\n\r\n    allpair.sort(config.arrayUp);\r\n\r\n    var autoCards = [];\r\n    var tempCards = [];\r\n    var tempNum = 0;\r\n    for(var i = 0;i<allpair.length;i++){\r\n\r\n        if(allpair[i]<CardUtil.cardGrade[\"2\"]&&allpair[i]>rank){\r\n            console.log(\"i:\"+i);\r\n            if(allpair[i]+1==allpair[i+1]){\r\n                console.log(\"i2:\"+i);\r\n                if(tempNum+1 == allpair[i+1]){\r\n                    autoCards.push(tempNum);\r\n                }\r\n                if(i==0){\r\n                    autoCards.push(allpair[i]);\r\n                }\r\n                autoCards.push(allpair[i+1]);\r\n            }else{  \r\n                tempNum = allpair[i+1];\r\n                if(autoCards.length>=repeatCount){\r\n                    tempCards.push(autoCards);\r\n                }\r\n                autoCards = [];\r\n                continue;\r\n            }\r\n        }\r\n    }\r\n\r\n    for(var i = 0;i<tempCards.length;i++){\r\n        if(tempCards[i].length >= repeatCount){\r\n            var len = tempCards[i].length - repeatCount;\r\n            var temparr = [];\r\n            for(var j=0;j<=len;j++){\r\n                if(tempCards[i].length >= repeatCount+j){\r\n                    temparr = config.arraySub2(j,repeatCount+j,tempCards[i]);\r\n                    all_result.push(temparr);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    console.log(all_result);\r\n    return all_result;\r\n}\r\n\r\n//符合的飞机不带\r\nCardUtil.find_three_straight = function(last_cards_type, prop, myCards){\r\n    var all_result = [];\r\n    PopCardUtil.setSameVulueCardCount(prop);\r\n    var rank = parseInt(last_cards_type.rank);\r\n    var repeatCount = last_cards_type.repeatCount;\r\n    \r\n    console.log(\"rank:\"+rank+\" repeatCount:\"+repeatCount);\r\n\r\n    var three = PopCardUtil.getThree();\r\n    var four = PopCardUtil.getFour();\r\n    var allpair = [];\r\n\r\n    for(var i=0;i<three.count;i++){\r\n        allpair.push(three.cards[i][0]);\r\n    }\r\n    for(var i=0;i<four.count;i++){\r\n        allpair.push(four.cards[i][0]);\r\n    }\r\n\r\n    allpair.sort(config.arrayUp);\r\n\r\n    console.log(allpair);\r\n\r\n    var autoCards = [];\r\n    var tempCards = [];\r\n    var tempNum = 0;\r\n    for(var i = 0;i<allpair.length;i++){\r\n\r\n        if(allpair[i]<CardUtil.cardGrade[\"2\"]&&allpair[i]>rank){\r\n            console.log(\"i:\"+i);\r\n            if(allpair[i]+1==allpair[i+1]){\r\n                console.log(\"i2:\"+i);\r\n                if(tempNum+1 == allpair[i+1]){\r\n                    autoCards.push(tempNum);\r\n                }\r\n                if(i==0){\r\n                    autoCards.push(allpair[i]);\r\n                }\r\n                autoCards.push(allpair[i+1]);\r\n            }else{  \r\n                tempNum = allpair[i+1];\r\n                if(autoCards.length>=repeatCount){\r\n                    tempCards.push(autoCards);\r\n                }\r\n                autoCards = [];\r\n                continue;\r\n            }\r\n        }\r\n    }\r\n\r\n    console.log(tempCards);\r\n\r\n    for(var i = 0;i<tempCards.length;i++){\r\n        if(tempCards[i].length >= repeatCount){\r\n            var len = tempCards[i].length - repeatCount;\r\n            var temparr = [];\r\n            for(var j=0;j<=len;j++){\r\n                if(tempCards[i].length >= repeatCount+j){\r\n                    temparr = config.arraySub3(j,repeatCount+j,tempCards[i]);\r\n                    all_result.push(temparr);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    console.log(all_result);\r\n    return all_result;\r\n}\r\n\r\n//符合的飞机带单\r\nCardUtil.find_three_straight_with_single_card = function(last_cards_type, prop, myCards){\r\n    var all_result = [];\r\n    PopCardUtil.setSameVulueCardCount(prop);\r\n    var rank = parseInt(last_cards_type.rank);\r\n    var repeatCount = last_cards_type.repeatCount;\r\n    \r\n    console.log(\"rank:\"+rank+\" repeatCount:\"+repeatCount);\r\n\r\n    var three = PopCardUtil.getThree();\r\n    var four = PopCardUtil.getFour();\r\n    var allpair = [];\r\n\r\n    for(var i=0;i<three.count;i++){\r\n        allpair.push(three.cards[i][0]);\r\n    }\r\n    for(var i=0;i<four.count;i++){\r\n        allpair.push(four.cards[i][0]);\r\n    }\r\n\r\n    allpair.sort(config.arrayUp);\r\n\r\n    console.log(allpair);\r\n\r\n    var autoCards = [];\r\n    var tempCards = [];\r\n    var tempNum = 0;\r\n    for(var i = 0;i<allpair.length;i++){\r\n\r\n        if(allpair[i]<CardUtil.cardGrade[\"2\"]&&allpair[i]>rank){\r\n            console.log(\"i:\"+i);\r\n            if(allpair[i]+1==allpair[i+1]){\r\n                console.log(\"i2:\"+i);\r\n                if(tempNum+1 == allpair[i+1]){\r\n                    autoCards.push(tempNum);\r\n                }\r\n                if(i==0){\r\n                    autoCards.push(allpair[i]);\r\n                }\r\n                autoCards.push(allpair[i+1]);\r\n            }else{  \r\n                tempNum = allpair[i+1];\r\n                if(autoCards.length>=repeatCount){\r\n                    tempCards.push(autoCards);\r\n                }\r\n                autoCards = [];\r\n                continue;\r\n            }\r\n        }\r\n    }\r\n\r\n    console.log(tempCards);\r\n\r\n    for(var i = 0;i<tempCards.length;i++){\r\n        if(tempCards[i].length >= repeatCount){\r\n            var len = tempCards[i].length - repeatCount;\r\n            var temparr = [];\r\n            for(var j=0;j<=len;j++){\r\n                if(tempCards[i].length >= repeatCount+j){\r\n                    temparr = config.arraySub3(j,repeatCount+j,tempCards[i]);\r\n                    all_result.push(temparr);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    console.log(all_result);\r\n    return all_result;\r\n}\r\n//符合的飞机带双\r\nCardUtil.find_three_straight_with_pair_card = function(last_cards_type, prop, myCards){\r\n    var all_result = [];\r\n    PopCardUtil.setSameVulueCardCount(prop);\r\n    var rank = parseInt(last_cards_type.rank);\r\n    var repeatCount = last_cards_type.repeatCount;\r\n    \r\n    console.log(\"rank:\"+rank+\" repeatCount:\"+repeatCount);\r\n\r\n    var three = PopCardUtil.getThree();\r\n    var four = PopCardUtil.getFour();\r\n    var allpair = [];\r\n\r\n    for(var i=0;i<three.count;i++){\r\n        allpair.push(three.cards[i][0]);\r\n    }\r\n    for(var i=0;i<four.count;i++){\r\n        allpair.push(four.cards[i][0]);\r\n    }\r\n\r\n    allpair.sort(config.arrayUp);\r\n\r\n    console.log(allpair);\r\n\r\n    var autoCards = [];\r\n    var tempCards = [];\r\n    var tempNum = 0;\r\n    for(var i = 0;i<allpair.length;i++){\r\n\r\n        if(allpair[i]<CardUtil.cardGrade[\"2\"]&&allpair[i]>rank){\r\n            console.log(\"i:\"+i);\r\n            if(allpair[i]+1==allpair[i+1]){\r\n                console.log(\"i2:\"+i);\r\n                if(tempNum+1 == allpair[i+1]){\r\n                    autoCards.push(tempNum);\r\n                }\r\n                if(i==0){\r\n                    autoCards.push(allpair[i]);\r\n                }\r\n                autoCards.push(allpair[i+1]);\r\n            }else{  \r\n                tempNum = allpair[i+1];\r\n                if(autoCards.length>=repeatCount){\r\n                    tempCards.push(autoCards);\r\n                }\r\n                autoCards = [];\r\n                continue;\r\n            }\r\n        }\r\n    }\r\n\r\n    console.log(tempCards);\r\n\r\n    for(var i = 0;i<tempCards.length;i++){\r\n        if(tempCards[i].length >= repeatCount){\r\n            var len = tempCards[i].length - repeatCount;\r\n            var temparr = [];\r\n            for(var j=0;j<=len;j++){\r\n                if(tempCards[i].length >= repeatCount+j){\r\n                    temparr = config.arraySub3(j,repeatCount+j,tempCards[i]);\r\n                    all_result.push(temparr);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    console.log(all_result);\r\n    return all_result;\r\n}\r\n\r\n\r\n//提示----------------------------------------\r\nmodule.exports = CardUtil;\r\n"]}