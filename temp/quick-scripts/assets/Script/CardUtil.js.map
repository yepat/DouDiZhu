{"version":3,"sources":["CardUtil.js"],"names":["config","require","PopCardUtil","CardUtil","cardGrade","getNodeCards","mycards","tempstr","myCardValue","i","length","card","convertCardToClient","push","showTxt","sort","arrayUp","sameCards","getSameCards","subNodeCards","cards1","cards2","str","value1","parseInt","value2","value","console","log","StringToNumber","num","gradeDown","card1","card2","showType","gradeUp","joker","jokerValue","serverCardValueToClient","getAllCardsValue","clientCards","cardValues","serverCardsToClient","serverCards","pokerData","cardValue","cardType","cardItem","ghostCardType","smallG","bigG","str1","substring","str2","pokerCardType","spade","hearts","blackberry","redslice","clientCardsToServer","serverCardData","convertCardToServer","serverCardValueToServer","getMyTopCards","myPokerNode","PokerControl","topcards","pokerControl","getComponent","cardData","isTopped","AutoChooseLiftUpCard","cards","maxLenght","lzcards","tempcards","pktxt","cardvalue","setChoosed","cardMove","is_rank_consective_inc","count","extend","table1","table2","get_topCard_type","topCards","card_type","sameValues","setSameVulueCardCount","topLength","blt","cardtype","type","rank","repeatCount","single","getSingle","CardType","Single","pair","getPair","Pair","DoubleKing","three","getThree","ThreeOfKind","four","getFour","Bomb","ThreeOfKindPlusOne","singleNum","pairNum","threeNum","fourNum","singleCards","SingleCards","pairCards","PairCards","threeCards","ThreeCards","fourCards","FourCards","singleSetConsective","pairSetConsective","threeSetConsective","consectiveEnd","FourPlusOne","FourPlusTwo","ThreeOfKindPlusPair","StraightThree","StraightDouble","Straight","allThree","StraightThreePlusSingle","StraightThreePlusPair","isConsective","allThreeLength","getCardsFromTopCards","myCards","myCardsLength","topCardsLength","classificationCards","autoCards","key","kCount","temp","tempCount","j","classificationTopCards","topKeys","k","k1","k2","kk","d","get_cards_larger","last_cards_type","all_result","prop","cardsType","find_single_card","find_pair_card","find_three_card","find_bomb_card","find_three_with_one_card","find_three_with_two_card","find_four_with_two_single_card","find_four_with_two_pair_card","find_straight","find_pair_straight","find_three_straight","find_three_straight_with_single_card","find_three_straight_with_pair_card","all_bomb","find_bomb_all","v","allcards","slice","values","allOne","onecard","n","tempPair","temps","tempCards","len","temparr","arraySub","allpair","tempNum","module","exports"],"mappings":"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","file":"CardUtil.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\nvar config = require(\"config\");\nvar PopCardUtil = require(\"PopCardUtil\");\n\nvar CardUtil = {};\n\nCardUtil.cardGrade = {\n    \"3\" : 3,\n    \"4\" : 4,\n    \"5\" : 5,\n    \"6\" : 6,\n    \"7\" : 7,\n    \"8\" : 8,\n    \"9\" : 9,\n    \"a\" : 10,\n    \"b\" : 11,\n    \"c\" : 12,\n    \"d\" : 13,\n    \"1\" : 14,\n    \"2\" : 15,\n    \"g\" : 16,\n    \"G\" : 17,\n};\n\n//记牌器数据信息\nCardUtil.getNodeCards = function(mycards){\n    var tempstr = \"\";\n    var myCardValue = [];\n    for(var i = 0;i<mycards.length;i++){\n        var card = CardUtil.convertCardToClient(mycards[i]);\n        myCardValue.push(card.showTxt);\n    }\n    myCardValue.sort(config.arrayUp);\n    var sameCards = PopCardUtil.getSameCards(myCardValue);\n    for(var i=3;i<=17;i++){\n        if(sameCards[i]){\n            tempstr+=sameCards[i].length;\n        }else{\n            tempstr+=\"0\";\n        }\n    }\n    return tempstr;\n}\n//获取当前自己手牌(出牌后)\nCardUtil.subNodeCards = function(cards1,cards2){\n    var str = \"\";\n    var cards1 = CardUtil.getNodeCards(cards1);\n    var cards2 = CardUtil.getNodeCards(cards2);\n    for(var i = 0;i<cards1.length;i++){\n        var value1 = parseInt(cards1[i]);\n        var value2 = parseInt(cards2[i]);\n        var value = value1 - value2;\n        if(value<0){\n            value = 0;\n        }\n        str+=value;\n    }\n    console.log(str)\n    return str;\n}\n\n//文本转数值\nCardUtil.StringToNumber = function(str){\n    var num = 0;\n    if(typeof(str)==\"string\"){\n        num = parseInt(str);\n    }else{\n        num = str;\n    }\n    return num;\n}\n//降序排列\nCardUtil.gradeDown = function(card1,card2){\n    return (card2.showTxt*10 + card2.showType) - (card1.showTxt*10 + card1.showType);\n}\n//升序排列\n// CardUtil.gradeUp = function(card1,card2){\n//     return (card1.showTxt*10 + card1.showType) - (card2.showTxt*10 + card2.showType);\n// }\nCardUtil.gradeUp = function(card1,card2){\n    if(config.joker!=\"\"){\n        var jokerValue = CardUtil.serverCardValueToClient(config.joker);\n        if(card1.showTxt == jokerValue && card2.showTxt == jokerValue){\n            return (card1.showTxt*100 + card1.showType) - (card2.showTxt*100 + card2.showType);\n        }else if(card1.showTxt == jokerValue && card2.showTxt != jokerValue){\n            return (card1.showTxt*100 + card1.showType) - (card2.showTxt*10 + card2.showType);\n        }else if(card1.showTxt != jokerValue && card2.showTxt == jokerValue){\n            return (card1.showTxt*10 + card1.showType) - (card2.showTxt*100 + card2.showType);\n        }else{\n            return (card1.showTxt*10 + card1.showType) - (card2.showTxt*10 + card2.showType);\n        }\n    }\n    return (card1.showTxt*10 + card1.showType) - (card2.showTxt*10 + card2.showType);\n}\n\n//获取客户端所有牌的数值并升序排序\nCardUtil.getAllCardsValue = function(clientCards){\n    var cardValues = [];\n    for(var i=0;i<clientCards.length;i++){\n        cardValues.push(clientCards[i].showTxt);\n    }\n    if(cardValues.length>0){\n        cardValues.sort(config.arrayUp);\n    }\n    return cardValues;\n}\n\n//服务器牌值转化\nCardUtil.serverCardsToClient = function(serverCards){\n    var pokerData = [];\n    for(var i=0;i<serverCards.length;i++){\n        var card = serverCards[i];\n        pokerData.push(CardUtil.convertCardToClient(card));\n    }\n    // pokerData.sort(CardUtil.gradeDown);\n    return pokerData;\n}\nCardUtil.convertCardToClient = function(value){\n    var cardValue = 0;\n    var cardType = 0;\n    var cardItem = {};\n    if(value == \"00\"){\n        cardValue = 16;\n        cardType = config.ghostCardType.smallG;\n    }else if(value == \"01\"){\n        cardValue = 17;\n        cardType = config.ghostCardType.bigG;\n    }else{\n        var str1 = value.substring(0,1);\n        var str2 = value.substring(1);\n        if(str1 == \"4\"){\n            cardType = config.pokerCardType.spade;\n        }else if(str1 == \"3\"){\n            cardType = config.pokerCardType.hearts;\n        }else if(str1 == \"2\"){\n            cardType = config.pokerCardType.blackberry;\n        }else if(str1 == \"1\"){\n            cardType = config.pokerCardType.redslice;\n        }\n\n        if(str2 == \"1\"){\n            cardValue = 14;\n        }else if(str2 == \"2\"){\n            cardValue = 15;\n        }else if(str2 == \"a\"){\n            cardValue = 10;\n        }else if(str2 == \"b\"){\n            cardValue = 11;\n        }else if(str2 == \"c\"){\n            cardValue = 12;\n        }else if(str2 == \"d\"){\n            cardValue = 13;\n        }else{\n            cardValue = parseInt(str2);\n        }\n    }\n    cardItem.showTxt = cardValue;\n    cardItem.showType = cardType;\n    return cardItem;\n}\n//只适用于除去大小王的牌值\nCardUtil.serverCardValueToClient = function(str2){\n    var cardValue = -1;\n    if(str2 == \"1\"){\n        cardValue = 14;\n    }else if(str2 == \"2\"){\n        cardValue = 15;\n    }else if(str2 == \"a\"){\n        cardValue = 10;\n    }else if(str2 == \"b\"){\n        cardValue = 11;\n    }else if(str2 == \"c\"){\n        cardValue = 12;\n    }else if(str2 == \"d\"){\n        cardValue = 13;\n    }else{\n        cardValue = parseInt(str2);\n    }\n    return cardValue;\n}\n\n//客户端牌转成服务器格式\nCardUtil.clientCardsToServer = function(clientCards){\n    var serverCardData = [];\n    for(var i=0;i<clientCards.length;i++){\n        serverCardData.push(CardUtil.convertCardToServer(clientCards[i]));\n    }\n    return serverCardData;\n}\nCardUtil.convertCardToServer = function(cardItem){\n    var cardValue = cardItem.showTxt;\n    var cardType = cardItem.showType;\n    var str1 = \"\";\n    var str2 = \"\";\n    if(cardType == config.pokerCardType.spade){\n        str1 = \"4\";\n    }else if(cardType == config.pokerCardType.hearts){\n        str1 = \"3\";\n    }else if(cardType == config.pokerCardType.blackberry){\n        str1 = \"2\";\n    }else if(cardType == config.pokerCardType.redslice){\n        str1 = \"1\";\n    }\n    if(cardValue == 14){\n        str2 = \"1\";\n    }else if(cardValue == 15){\n        str2 = \"2\";\n    }else if(cardValue == 10){\n        str2 = \"a\";\n    }else if(cardValue == 11){\n        str2 = \"b\";\n    }else if(cardValue == 12){\n        str2 = \"c\";\n    }else if(cardValue == 13){\n        str2 = \"d\";\n    }else{\n        str2 = \"\" + cardValue;\n    }\n    var str = str1 + str2;\n    if(cardValue == 16){\n        str = \"00\";\n    }else if(cardValue == 17){\n        str = \"01\";\n    }\n    return str;\n}\n//只适用于除去大小王的牌值\nCardUtil.serverCardValueToServer = function(cardValue){\n    var str2 = \"\";\n    if(cardValue == 14){\n        str2 = \"1\";\n    }else if(cardValue == 15){\n        str2 = \"2\";\n    }else if(cardValue == 10){\n        str2 = \"a\";\n    }else if(cardValue == 11){\n        str2 = \"b\";\n    }else if(cardValue == 12){\n        str2 = \"c\";\n    }else if(cardValue == 13){\n        str2 = \"d\";\n    }else{\n        str2 = \"\" + cardValue;\n    }\n    return str2;\n}\n\n\n//获取提起的牌值\nCardUtil.getMyTopCards = function(myPokerNode,PokerControl){\n    var topcards = [];\n    for(var i = myPokerNode.length-1;i > 0;i--){\n        var pokerControl = myPokerNode[i].getComponent(PokerControl);\n        if(pokerControl.cardData.isTopped){\n            topcards.push(pokerControl.cardValue);\n        }\n    }\n    return topcards;\n}\n\n//提起手牌\nCardUtil.AutoChooseLiftUpCard = function(myPokerNode,PokerControl,cards){\n    console.log(\"tishiFunc!!\");\n    // var cards = [\"3\",\"3\",\"5\",\"6\",\"7\"];\n    var maxLenght = 0;\n    var num = 0;\n\n    console.log(typeof(cards));\n    if(!cards){\n        console.log(\"没有符合牌型！\");\n        return;\n    }\n\n    if(typeof(cards) == \"number\"){\n        console.log(\"这是个数字\");\n        maxLenght = 1;\n    }else{ //if(typeof(cards) == \"string\")\n        // console.log(\"这是个字符\");\n        maxLenght = cards.length;\n    }\n\n    console.log(\"maxLenght:\"+maxLenght);\n\n    if(maxLenght>1 && config.joker != \"\"){//赖子牌排序\n        var jokerValue = CardUtil.serverCardValueToClient(config.joker);\n        cards.sort(config.arrayUp);\n        var lzcards = [];\n        var tempcards = [];\n        for(var i=0;i<maxLenght;i++){\n            if(cards[i]==jokerValue){\n                lzcards.push(cards[i]);\n            }else{\n                tempcards.push(cards[i]);\n            }\n        }\n        for(var i=0;i<lzcards.length;i++){\n            tempcards.push(lzcards[i]);\n        }\n        cards = tempcards;\n        console.log(\"tempcards:\",tempcards);\n    }\n\n    for(var i = myPokerNode.length-1;i >= 0;i--){\n        var pokerControl = myPokerNode[i].getComponent(PokerControl);\n        // var pktxt = pokerControl.cardData.showTxt;\n        var pktxt = parseInt(pokerControl.cardValue);\n        var cardvalue = parseInt(cards[num]);\n        if(maxLenght == 1){\n            cardvalue = cards;\n        }else{\n            // cardvalue = parseInt(cards[num]);\n        }\n        // console.log(\"cardvalue:\"+cardvalue+\" pktxt:\"+pktxt);//+\" cards[num]:\"+cards[num]\n        if(num<maxLenght&&cardvalue==pktxt)\n        {\n            console.log(\"num:\"+num);\n            num++;\n            pokerControl.setChoosed(true);\n        }\n    }\n    if(num<cards.length){\n        for(var i = myPokerNode.length-1;i >= 0;i--){\n            var pokerControl = myPokerNode[i].getComponent(PokerControl);\n            pokerControl.setChoosed(false);\n        }\n    }else{\n        for(var i = myPokerNode.length-1;i >= 0;i--){\n            var pokerControl = myPokerNode[i].getComponent(PokerControl);\n            // if(!pokerControl.cardData.isTopped&&pokerControl.cardData.isChoosed){\n                pokerControl.cardMove();\n            // }\n        }\n    } \n}\n//判断是否连续\nCardUtil.is_rank_consective_inc = function(cards){\n    var count = 0;\n    count = cards.length;\n    if(count<2){\n        return true;\n    }\n\n    //这里是降?\n    for(var i=0;i<count-1;i++){\n        if((cards[i][0]+1) != cards[i + 1][0]){\n            return false;\n        }\n    }\n    return true;\n}\n\n//3个头和4个头放在一起\nCardUtil.extend = function(table1, table2){\n    if(!table1 || !table2){\n        console.log(\"table can not be nil\");\n        return false;\n    }\n\n    for(var i =0;i<table2.length;i++){\n        if(table2[i]){\n            table1.push(table2[i]);\n        }\n    }\n}\n\n//判断提起的牌是否合法\nCardUtil.get_topCard_type = function(topCards,card_type){\n\n    if(typeof(topCards) == \"number\"){\n        console.log(\"这是个数字\");\n        topCards = [topCards];\n    }else{\n    }\n\n    // console.log(topCards);\n\n    //相同值归类并统计\n    var sameValues = PopCardUtil.getSameCards(topCards);\n    PopCardUtil.setSameVulueCardCount(sameValues);\n\n    var topLength = topCards.length;\n    var blt = false;\n\n    var cardtype = [];\n    cardtype.type = 0;\n    cardtype.rank = 0;\n    cardtype.repeatCount = 0;\n\n    if(topLength == 1){\n        //单只\n        var single = PopCardUtil.getSingle();\n        cardtype.type = config.CardType.Single;\n        cardtype.rank = topCards[0];\n        cardtype.repeatCount = 1;\n        console.log(\"单只\");\n        return cardtype;\n    }else if(topLength == 2){\n        //对子 王炸\n        var pair = PopCardUtil.getPair();\n        if(pair.count==1){\n            cardtype.type = config.CardType.Pair;\n            cardtype.rank = topCards[0];\n            cardtype.repeatCount = 1;\n            console.log(\"对子\");\n            return cardtype;\n        }else if(topCards[0]==16&&topCards[1]==17){\n            cardtype.type = config.CardType.DoubleKing;\n            cardtype.rank = topCards[0];\n            cardtype.repeatCount = 1;\n            console.log(\"王炸\");\n            return cardtype;\n        }\n    }else if(topLength == 3){\n        //三不带\n        var three = PopCardUtil.getThree();\n        if(three.count>0){\n            cardtype.type = config.CardType.ThreeOfKind;\n            cardtype.rank = three.cards[0][0];\n            cardtype.repeatCount = 1;\n            console.log(\"三不带\");\n            return cardtype;\n        } \n    }else if(topLength == 4){\n        //三带一 炸弹\n        var three = PopCardUtil.getThree();\n        var four = PopCardUtil.getFour();\n        if(four.count>0){\n            if(card_type){\n                cardtype.type = card_type;\n            }else{\n                cardtype.type = config.CardType.Bomb;\n            }\n            cardtype.rank = four.cards[0][0];\n            cardtype.repeatCount = 1;\n            console.log(\"炸弹\");\n            return cardtype;\n        }else if(three.count>0){\n            cardtype.type = config.CardType.ThreeOfKindPlusOne;\n            cardtype.rank = three.cards[0][0];\n            cardtype.repeatCount = 1;\n            console.log(\"三带一\");\n            return cardtype;\n        }\n    }else{\n        //三带一对 四带一 顺子\n        var single = PopCardUtil.getSingle();\n        var pair = PopCardUtil.getPair();\n        var three = PopCardUtil.getThree();\n        var four = PopCardUtil.getFour();\n\n        var singleNum = single.count;\n        var pairNum = pair.count;\n        var threeNum = three.count;\n        var fourNum = four.count;\n\n        var singleCards = PopCardUtil.SingleCards;\n        var pairCards = PopCardUtil.PairCards;\n        var threeCards = PopCardUtil.ThreeCards;\n        var fourCards = PopCardUtil.FourCards; \n\n        var singleSetConsective = CardUtil.is_rank_consective_inc(singleCards);\n        var pairSetConsective = CardUtil.is_rank_consective_inc(pairCards);\n        var threeSetConsective = CardUtil.is_rank_consective_inc(threeCards);\n\n        var consectiveEnd = CardUtil.cardGrade[\"2\"];\n\n        // for(var i=0;i<threeCards.length;i++){\n        //     console.log(\"three:\"+threeCards[i]);\n        // }\n\n        //四带\n        if(fourNum == 1 && threeNum == 0){\n            if(singleNum == 2 && pairNum == 0){\n                cardtype.type = config.CardType.FourPlusOne;\n                cardtype.rank = fourCards[0][0];\n                cardtype.repeatCount = 1;\n                console.log(\"四带二单\");\n                return cardtype;\n            }else if(singleNum == 0 && pairNum == 1){\n                cardtype.type = config.CardType.FourPlusOne;\n                cardtype.rank = fourCards[0][0];\n                cardtype.repeatCount = 1;\n                console.log(\"四带一对\");\n                return cardtype;\n            }else if(singleNum == 0 && pairNum == 2){\n                cardtype.type = config.CardType.FourPlusTwo;\n                cardtype.rank = fourCards[0][0];\n                cardtype.repeatCount = 1;\n                console.log(\"四带两对\");\n                return cardtype;\n            }\n        }\n        //三带一对\n        if(threeNum==1&&singleNum==0&&pairNum==1&&fourNum==0){\n            cardtype.type = config.CardType.ThreeOfKindPlusPair;\n            cardtype.rank = threeCards[0][0];\n            cardtype.repeatCount = 1;\n            console.log(\"三带一对\");\n            return cardtype;\n        }\n        //飞机不带\n        if(threeNum>1&&singleNum==0&&pairNum==0&&fourNum==0){\n            if(threeSetConsective&&threeCards[threeNum-1][0]<consectiveEnd){\n                cardtype.type = config.CardType.StraightThree;\n                cardtype.rank = threeCards[0][0];\n                cardtype.repeatCount = threeNum;\n                console.log(\"飞机不带\");\n                return cardtype;\n            }\n        }\n        //连队\n        if (pairNum > 2 && singleNum == 0 && threeNum == 0 && fourNum == 0){\n            if(pairSetConsective&&pairCards[pairNum-1][0]<consectiveEnd){\n                cardtype.type = config.CardType.StraightDouble;\n                cardtype.rank = pairCards[0][0];\n                cardtype.repeatCount = pairNum;\n                console.log(\"连对\");\n                return cardtype;\n            }\n        }\n        //顺子\n        if (singleNum > 4 && pairNum == 0 && threeNum == 0 && fourNum == 0){\n            if(singleSetConsective&&singleCards[singleNum-1][0]<consectiveEnd){\n                cardtype.type = config.CardType.Straight;\n                cardtype.rank = singleCards[0][0];\n                cardtype.repeatCount = singleNum;\n                console.log(\"顺子\");\n                return cardtype;\n            }\n        }\n\n        var allThree = [];\n\n        if(threeNum>0){\n            if(singleNum==threeNum && pairNum==0 && fourNum==0){\n                //飞机带单\n                if(threeSetConsective&&threeCards[threeNum-1][0]<consectiveEnd){\n                    cardtype.type = config.CardType.StraightThreePlusSingle;\n                    cardtype.rank = threeCards[0][0];\n                    cardtype.repeatCount = threeNum;\n                    console.log(\"飞机带单\");\n                    return cardtype;\n                }  \n            }else if(singleNum==0 && pairNum==threeNum && fourNum==0){\n                if(threeSetConsective&&threeCards[threeNum-1][0]<consectiveEnd){\n                    cardtype.type  = config.CardType.StraightThreePlusPair;\n                    cardtype.rank = threeCards[0][0];\n                    cardtype.repeatCount = threeNum;\n                    console.log(\"飞机带双\");\n                    return cardtype;\n                }\n            }else if((singleNum+pairNum*2)==threeNum && fourNum==0){\n                if(threeSetConsective&&threeCards[threeNum-1][0]<consectiveEnd){\n                    cardtype.type = config.CardType.StraightThreePlusSingle;\n                    cardtype.rank = threeCards[0][0];\n                    cardtype.repeatCount = threeNum;\n                    console.log(\"飞机带单\");\n                    return cardtype;\n                } \n            }else if((threeNum+fourNum) == (pairNum*2 + singleNum + fourNum)){\n                //带炸弹的飞机（4=3+1）\n                console.log(\"带炸弹的飞机（4=3+1）\");\n                var isConsective = threeSetConsective;\n                if(fourNum > 0){\n                    CardUtil.extend(allThree, threeCards);\n                    CardUtil.extend(allThree, fourCards);\n                    allThree.sort(config.arrayUp);\n                    isConsective = CardUtil.is_rank_consective_inc(allThree)\n                }else{\n                    allThree = threeCards;\n                }\n                var allThreeLength = allThree.length;\n                if(isConsective&&allThree[allThreeLength-1][0]<consectiveEnd){\n                    cardtype.type = config.CardType.StraightThreePlusSingle;\n                    cardtype.rank = threeCards[0][0];\n                    cardtype.repeatCount = allThreeLength;\n                    console.log(\"飞机带单2\");\n                    return cardtype;\n                }\n\n            }else{\n                if((pairNum + fourNum*2) == threeNum && singleNum==0){ //炸弹拆开当对子\n                    if(threeSetConsective&&threeCards[threeNum-1][0]<consectiveEnd){\n                        cardtype.type = config.CardType.StraightThreePlusPair;\n                        cardtype.rank = threeCards[0][0];\n                        cardtype.repeatCount = threeNum;\n                        console.log(\"飞机带双2\");\n                        return cardtype;\n                    }\n                }\n\n                if(threeNum>3){//三飞以上给服务器判断\n                    cardtype.type = -1;\n                    console.log(\"特殊牌型\");\n                    return cardtype;\n                }\n\n                \n                // cardtype.type = -1;\n                return cardtype; //一些特殊情况交给服务器了 比如：3个拆开当单只， \n            } \n        }\n\n\n    }\n    return cardtype;\n}\n\n//根据提起的牌智能提牌\nCardUtil.getCardsFromTopCards = function(myCards,topCards){\n    var myCards = myCards;\n    var topCards = topCards;\n    topCards.sort(config.arrayUp);\n    var myCardsLength = myCards.length;\n    var topCardsLength = topCards.length;\n\n    //值相同的牌放在一起\n    var classificationCards = {};\n    //相同值归类并统计\n    classificationCards = PopCardUtil.getSameCards(myCards);\n    // PopCardUtil.setSameVulueCardCount(classificationCards);\n\n    var autoCards = [];\n    if(topCardsLength == 2){\n        if(topCards[0] == topCards[1]){\n            var key = topCards[0];\n            //提起的牌值在牌面上能组成炸弹\n            var kCount = classificationCards[key].length;\n            console.log(\"key:\"+key+\" kCount:\"+kCount);\n            if (kCount == 4){\n                console.log(\"炸弹----------\");\n                autoCards = classificationCards[key];\n                return autoCards;\n            }\n\n            if(kCount == 3 && key != \"2\"){\n                console.log(\"可能有飞机\")\n                var temp = [];\n                var tempCount = 0;\n                temp[tempCount] = classificationCards[key];\n                //提起的牌值(++)\n                for(var i = 1;i<myCardsLength;i++){\n                    if(classificationCards[key+i]&&classificationCards[key+i].length == 3&& key+i != \"2\"){\n                        tempCount++;\n                        temp[tempCount] = classificationCards[key+i];\n                        console.log(\"key+i:\"+(key+i));\n                    }else{\n                        break;\n                    }\n                }\n                //提起的牌值(--)\n                for(var i = 1;i<myCardsLength;i++){\n                    if(classificationCards[key-i]&&classificationCards[key-i].length == 3&& key+i != \"2\"){\n                        tempCount++;\n                        temp[tempCount] = classificationCards[key-i];\n                        console.log(\"key+i:\"+(key-i));\n                    }else{\n                        break;\n                    }\n                }\n\n                //检查牌组是否是飞机\n                if(temp.length>1){\n                    for(var i = 0;i<temp.length;i++){\n                        for(var j=0;j<temp[i].length;j++){\n                            console.log(\"temp:\"+temp[i][j]);\n                            autoCards.push(temp[i][j]);\n                        }\n                    }\n                }\n                autoCards.sort(config.arrayUp);\n                return autoCards;\n            }\n                \n        }else if(topCards[0] + 1 == topCards[1]){\n            if(topCards[1]>=CardUtil.cardGrade[\"2\"]){\n                autoCards = topCards;\n                return autoCards;\n            }\n\n            var key = topCards[1]\n            autoCards = topCards\n            for(var i =1;i<=3;i++){\n                if (classificationCards[key+i] && key+i < CardUtil.cardGrade[\"2\"]){\n                    //满足组成顺子的牌\n                    autoCards.push(classificationCards[key+i][0]);\n                }\n            }\n            if(autoCards.length<5){\n                autoCards = [];\n            }\n            return autoCards;\n\n        }else{\n            autoCards = [];\n            return autoCards;\n        }\n    }else if(topCardsLength == 3){\n        //连队判定\n        console.log(\"连队判定\");\n        var classificationTopCards = {};\n        classificationTopCards = PopCardUtil.getSameCards(topCards);\n        // classificationTopCards.sort();\n        if(classificationTopCards.length > 2){\n            var topKeys = [];\n            for(var k in classificationTopCards){\n                topKeys.push(k);\n            }\n            var k1 = parseInt(topKeys[0]);\n            var k2 = parseInt(topKeys[1]);\n            var kk = k1 + 1;\n            // console.log(\"k1:\"+k1+\" k2:\"+k2+\" kk:\"+kk);\n            if(kk==k2&&k2<CardUtil.cardGrade[\"2\"]){\n                var key=k1;\n                for(var k in classificationCards){\n                    if(k == key){\n                        var d = classificationCards[k];\n                        console.log(\"d:\"+d.length+\"  k:\"+k);\n                        if(d.length>=2){\n                            for(var i=0;i<2;i++){\n                                autoCards.push(d[i]);\n                            }\n                            key++;\n                        }else{\n                            break;\n                        }\n                    }\n                }\n                if(autoCards.length<6){\n                    autoCards =[];\n                }\n                return autoCards;\n            }\n        }\n\n    }\n\n    return autoCards;\n}\n\n\n//提示----------------------------------------\n\n// config.CardType = {\n// \tSingle : 1,                         //单张\n// \tPair : 2,                           //对子\n// \tThreeOfKind : 3,                    //三不带\n// \tThreeOfKindPlusOne : 4,             //三带一\n// \tThreeOfKindPlusPair : 5,            //三带二\n// \tStraight : 6,                       //顺子\n// \tStraightDouble : 7,\t\t\t\t\t//双顺  33 44 55\n// \tStraightThree : 8,\t\t\t\t\t//三顺  333 444    飞机  [333 444 555 a b c/ aa bb cc]\n// \tStraightThreePlusSingle : 9,\t\t//三顺+散牌 飞机带翅膀  333 444 5 6 / +一对\n// \tStraightThreePlusPair : 10,\t\t\t//三顺+对   飞机带翅膀  333 444 66 77\n// \tSoftBomb : 87,\t\t\t\t\t\t//软炸弹\n// \tBomb : 88,\t\t\t\t\t\t\t//炸弹\n// \tLazarilloBomb : 89,\t\t\t\t\t//纯癞子炸弹\n// \tDoubleKing : 99,\t\t\t\t\t//双王\n// \tFourPlusOne : 11,\t\t\t\t\t//四带1, 四只带两只单牌\n// \tFourPlusTwo : 12,\t\t\t\t\t//四带2, 四只带两对\n// }\n\n//获取比上家大的牌\nCardUtil.get_cards_larger = function(last_cards_type,myCards){\n    var all_result = [];\n    \n    var prop = PopCardUtil.getSameCards(myCards);\n    // PopCardUtil.setSameVulueCardCount(classificationCards);\n\n    var cardsType =  last_cards_type.type;\n    if(cardsType == config.CardType.Single){\n        all_result = CardUtil.find_single_card(last_cards_type,prop,myCards);\n    }else if(cardsType == config.CardType.Pair){\n        all_result = CardUtil.find_pair_card(last_cards_type,prop,myCards);\n    }else if(cardsType == config.CardType.ThreeOfKind){\n        all_result = CardUtil.find_three_card(last_cards_type,prop,myCards);\n    }else if(cardsType == config.CardType.Bomb){\n        all_result = CardUtil.find_bomb_card(last_cards_type,prop,myCards);\n    }else if(cardsType == config.CardType.ThreeOfKindPlusOne){\n        all_result = CardUtil.find_three_with_one_card(last_cards_type,prop,myCards);\n    }else if(cardsType == config.CardType.ThreeOfKindPlusPair){\n        all_result = CardUtil.find_three_with_two_card(last_cards_type,prop,myCards);\n    }else if(cardsType == config.CardType.FourPlusOne){\n        all_result = CardUtil.find_four_with_two_single_card(last_cards_type,prop,myCards);\n    }else if(cardsType == config.CardType.FourPlusTwo){\n        all_result = CardUtil.find_four_with_two_pair_card(last_cards_type,prop,myCards);\n    }else if(cardsType == config.CardType.Straight){\n        all_result = CardUtil.find_straight(last_cards_type,prop,myCards);\n    }else if(cardsType == config.CardType.StraightDouble){\n        all_result = CardUtil.find_pair_straight(last_cards_type,prop,myCards);\n    }else if(cardsType == config.CardType.StraightThree){\n        all_result = CardUtil.find_three_straight(last_cards_type,prop,myCards);\n    }else if(cardsType == config.CardType.StraightThreePlusSingle){\n        all_result = CardUtil.find_three_straight_with_single_card(last_cards_type,prop,myCards);\n    }else if(cardsType == config.CardType.StraightThreePlusPair){\n        all_result = CardUtil.find_three_straight_with_pair_card(last_cards_type,prop,myCards);\n    }\n\n    if(cardsType != config.CardType.Bomb && cardsType != config.CardType.DoubleKing){\n        var all_bomb = CardUtil.find_bomb_all(prop);\n        for(var i=0;i<all_bomb.length;i++){\n            all_result.push(all_bomb[i]);\n        }\n    }\n\n    return all_result;\n}\n//符合条件的单张牌\nCardUtil.find_single_card = function(last_cards_type,prop,myCards){\n    var all_result = [];\n    PopCardUtil.setSameVulueCardCount(prop);\n    var single = PopCardUtil.getSingle();\n    var rank = parseInt(last_cards_type.rank);\n    // console.log(\"符合条件的单张牌\");\n    if(single.count>0){\n        for(var k in single.cards){\n            var v = single.cards[k];\n            // console.log(\"v:\"+v+\"  k:\"+k);\n            if (rank < v){\n                all_result.push(v);\n            }\n        }\n        // return all_result;\n    }\n\n    //没有适合单张 就拆分牌\n    var allcards = [];//所有牌值\n    for(var k in prop){\n        var v = prop[k];\n        // console.log(\"v:\"+v[0]+\"  k:\"+k);\n        allcards.push(k);\n    }\n\n    // console.log(\"length::\"+all_result.length);\n    if(all_result.length <= 0){\n        for(var k in allcards){\n            var v = parseInt(allcards[k]);\n            // console.log(\"v:\"+v+\"  k:\"+k);\n            if (rank < v){\n                all_result.push(v);\n            }\n        }\n    }\n\n    return all_result;\n}\n\n//找合适的对子出牌\nCardUtil.find_pair_card = function(last_cards_type, prop, myCards){\n    var all_result = [];\n    PopCardUtil.setSameVulueCardCount(prop);\n    var pair = PopCardUtil.getPair();\n    // console.log(\"符合条件的对子牌\");\n    var rank = parseInt(last_cards_type.rank);\n    if(pair.count>0){\n        for(var k in pair.cards){\n            var v = pair.cards[k];\n            // console.log(\"v:\"+v[0]+\"  k:\"+k);\n            if (rank < v[0]){\n                all_result.push(v);\n            }\n        }\n        // return all_result;\n    }\n    //没有适合对子 就拆分牌\n    var allcards = [];//所有牌值\n    if(all_result.length <= 0){\n        var three = PopCardUtil.getThree();\n        var four = PopCardUtil.getFour();\n        if(three.count>0){\n            for(var k in three.cards){\n                var d = three.cards[k];\n                if(rank<d[0])\n                {\n                    var temp =d.slice(0,2);\n                    allcards.push(temp);\n                }\n            }\n        }\n        if(four.count>0){\n            for(var k in four.cards){\n                var d = four.cards[k];\n                if(rank<d[0])\n                {\n                    var temp =d.slice(0,2);\n                    allcards.push(temp);\n                }\n            }\n        }\n        return allcards;\n    }\n    return all_result;\n}\n\n//寻找合适的三个出牌\nCardUtil.find_three_card = function(last_cards_type, prop, myCards){\n    var all_result = [];\n    PopCardUtil.setSameVulueCardCount(prop);\n    var three = PopCardUtil.getThree();\n    var rank = parseInt(last_cards_type.rank);\n    if(three.count>0){\n        for(var k in three.cards){\n            var v = three.cards[k];\n            // console.log(\"v:\"+v[0]+\"  k:\"+k);\n            if (rank < v[0]){\n                all_result.push(v);\n            }\n        }\n        // return all_result;\n    }\n    return all_result;\n}\n\n//所有的炸弹牌\nCardUtil.find_bomb_all = function(prop){\n    var all_result = [];\n    PopCardUtil.setSameVulueCardCount(prop);\n    var four = PopCardUtil.getFour();\n    for(var k in four.cards){\n        var v = four.cards[k];\n        // console.log(\"v:\"+v[0]+\"  k:\"+k);\n        all_result.push(v);\n    }\n    \n    if(prop[16]&&prop[17]){\n        console.log(\"有王炸\");\n        var values =[16,17]; \n        all_result.push(values);\n    }else{\n        console.log(\"没有王炸\");\n    }\n\n    return all_result;\n}\n\n//找合适的炸弹牌\nCardUtil.find_bomb_card = function(last_cards_type, prop, myCards){\n    var all_result = [];\n    PopCardUtil.setSameVulueCardCount(prop);\n    var four = PopCardUtil.getFour();\n    var rank = parseInt(last_cards_type.rank);\n    if(four.count>0){\n        for(var k in four.cards){\n            var v = four.cards[k];\n            // console.log(\"v:\"+v[0]+\"  k:\"+k);\n            if (rank < v[0]){\n                all_result.push(v);\n            }\n        }\n    }\n    if(prop[16]&&prop[17]){\n        console.log(\"有王炸\");\n        var values =[16,17]; \n        all_result.push(values);\n    }else{\n        console.log(\"没有王炸\");\n    }\n\n    return all_result;\n}\n\n//找合适的三带一\nCardUtil.find_three_with_one_card = function(last_cards_type, prop, myCards){\n    var all_result = [];\n    PopCardUtil.setSameVulueCardCount(prop);\n    var three = PopCardUtil.getThree();\n    var rank = parseInt(last_cards_type.rank);\n    if(three.count>0){\n        for(var k in three.cards){\n            var v = three.cards[k];\n            // console.log(\"v:\"+v[0]+\"  k:\"+k);\n            if (rank < v[0]){\n                all_result.push(v);\n            }\n        }\n        // return all_result;\n    }\n\n    var single = PopCardUtil.getSingle();\n    var pair = PopCardUtil.getPair();\n    // var three = PopCardUtil.getThree();\n    var allOne = [];//所有三张的牌值 单张组\n\n    var onecard = 0;\n    if(single.count>0){\n        onecard = parseInt(single.cards[0]);\n        console.log(\"onecard1:\"+onecard);\n    }else if(pair.count>0){\n        onecard = parseInt(pair.cards[0][0]);\n        console.log(\"onecard2:\"+onecard);\n    }else{\n        //拆分3张\n        for(var k in three.cards){\n            var v = three.cards[k];\n            allOne.push(v[0]);\n        }\n\n    }\n\n    for(var k in all_result){\n        var v = all_result[k];\n        console.log(\"v:\"+v+\"  k:\"+k+\" allone:\"+allOne[k]);\n\n        if(onecard == 0){\n            if(k<allOne.length-1){\n                if(v[0]!=allOne[k]){\n                    onecard = allOne[k];\n                }else{\n                    var n = parseInt(k)+1;\n                    onecard = allOne[n];\n                }\n            }else{\n                onecard = allOne[0];\n            }\n        }\n        v[v.length] = onecard;//onecard\n        v.sort(config.arrayUp);\n    }\n \n    return all_result;\n}\n//三带一对\nCardUtil.find_three_with_two_card = function(last_cards_type, prop, myCards){\n    var all_result = [];\n    PopCardUtil.setSameVulueCardCount(prop);\n    var three = PopCardUtil.getThree();\n    var rank = parseInt(last_cards_type.rank);\n    if(three.count>0){\n        for(var k in three.cards){\n            var v = three.cards[k];\n            // console.log(\"v:\"+v[0]+\"  k:\"+k);\n            if (rank < v[0]){\n                all_result.push(v);\n            }\n        }\n        // return all_result;\n    }\n\n    var allOne = [];//所有三张的牌值 对子组\n    \n    var pair = PopCardUtil.getPair();\n    var tempPair = [];\n    if(pair.count>0){\n        tempPair = pair.cards[0];\n    }else{\n        //拆分3张\n        for(var k in three.cards){\n            var v = three.cards[k];\n            allOne.push(v[0]);\n        }\n    }\n\n    // console.log(\"tempPair:\"+tempPair+\" allOne:\"+allOne.length);\n\n    var onecard = tempPair.length;\n\n    for(var k in all_result){\n        var v = all_result[k];\n        // console.log(\"v:\"+v+\"  k:\"+k);\n\n        if(onecard == 0){\n            if(k<allOne.length-1){\n                if(v[0]!=allOne[k]){\n                    onecard = allOne[k];\n                }else{\n                    var n = parseInt(k)+1;\n                    onecard = allOne[n];\n                }\n            }else{\n                onecard = allOne[0];\n            }\n            for(var i=0;i<2;i++){\n                v.push(parseInt(onecard));\n            }\n            onecard = 0;\n        }else{\n            for(var i=0;i<tempPair.length;i++){\n                v.push(parseInt(tempPair[i]));\n            }\n        }\n\n        // v.concat(tempPair[0],tempPair[1]);\n        console.log(\"v2:\"+v);\n        v.sort(config.arrayUp);\n    }\n\n    return all_result;\n}\n//四带二\nCardUtil.find_four_with_two_single_card = function(last_cards_type, prop, myCards){\n    var all_result = [];\n    PopCardUtil.setSameVulueCardCount(prop);\n    var four = PopCardUtil.getFour();\n    var rank = parseInt(last_cards_type.rank);\n\n    if(four.count>0){\n        for(var k in four.cards){\n            var v = four.cards[k];\n            // console.log(\"v:\"+v[0]+\"  k:\"+k);\n            if (rank < v[0]){\n                all_result.push(v);\n            }\n        }\n        // return all_result;\n    }\n\n    var temps = [];\n\n    var single = PopCardUtil.getSingle();\n    var pair = PopCardUtil.getPair();\n    var three = PopCardUtil.getThree();\n\n    if(single.count>1){\n        for(var i=0;i<2;i++){\n            temps.push(parseInt(single.cards[i]));\n        }\n    }else if(pair.count>0){\n        for(var i=0;i<2;i++){\n            temps.push(parseInt(pair.cards[0]));\n        }\n    }else if(three.count>0){\n        for(var i=0;i<2;i++){\n            temps.push(parseInt(three.cards[0]));\n        }\n    }\n\n    for(var k in all_result){\n        var v = all_result[k];\n\n        for(var i=0;i<temps.length;i++){\n            v.push(parseInt(temps[i]));\n        }\n        console.log(\"v2:\"+v);\n        v.sort(config.arrayUp);\n    }\n\n    return all_result;\n}\n\n//四带两队\nCardUtil.find_four_with_two_pair_card = function(last_cards_type, prop, myCards){\n    var all_result = [];\n    PopCardUtil.setSameVulueCardCount(prop);\n    var four = PopCardUtil.getFour();\n    var rank = parseInt(last_cards_type.rank);\n\n    if(four.count>0){\n        for(var k in four.cards){\n            var v = four.cards[k];\n            // console.log(\"v:\"+v[0]+\"  k:\"+k);\n            if (rank < v[0]){\n                all_result.push(v);\n            }\n        }\n        // return all_result;\n    }\n\n    var temps = [];\n    var pair = PopCardUtil.getPair();\n    var three = PopCardUtil.getThree();\n\n    if(pair.count>1){\n        for(var i=0;i<2;i++){\n            for(var j=0;j<2;j++){\n                temps.push(parseInt(pair.cards[i]));\n            }\n        } \n    }else if(pair.count == 1 && three.count>0){\n        for(var i=0;i<2;i++){\n            temps.push(parseInt(pair.cards[0]));\n        }\n        for(var i=0;i<2;i++){\n            temps.push(parseInt(three.cards[0]));\n        }\n    }else if(three.count>1){\n        for(var i=0;i<2;i++){\n            for(var j=0;j<2;j++){\n                temps.push(parseInt(three.cards[i]));\n            }\n        } \n    }\n\n    for(var k in all_result){\n        var v = all_result[k];\n\n        for(var i=0;i<temps.length;i++){\n            v.push(parseInt(temps[i]));\n        }\n        console.log(\"v2:\"+v);\n        v.sort(config.arrayUp);\n    }\n\n    return all_result;\n}\n\n//符合的顺子牌\nCardUtil.find_straight = function(last_cards_type, prop, myCards){\n\n    var all_result = [];\n    PopCardUtil.setSameVulueCardCount(prop);\n    var rank = parseInt(last_cards_type.rank);\n    var repeatCount = last_cards_type.repeatCount;\n    var single = PopCardUtil.getSingle();\n\n    console.log(\"rank:\"+rank+\" repeatCount:\"+repeatCount);\n\n    //所有牌可以组成的顺子\n    var autoCards = [];\n    var tempCards = [];\n    var key = rank;\n    for(var i =1;i<20;i++){\n        if (prop[key+i] && key+i < CardUtil.cardGrade[\"2\"]){\n            //满足组成顺子的牌\n            autoCards.push(prop[key+i][0]);\n        }else{\n            if(autoCards.length>=repeatCount){\n                tempCards.push(autoCards);\n            }\n            autoCards = [];\n            continue;\n        }\n    }\n\n\n    console.log(tempCards);\n    if(tempCards.length == 0)\n        return all_result;\n    console.log(\"length:\"+tempCards[0].length);\n\n    if(tempCards[0].length > repeatCount){\n        var len = tempCards[0].length - repeatCount;\n        var temparr = [];\n        for(var i=0;i<=len;i++){\n            if(tempCards[0].length >= repeatCount+i){\n                temparr = config.arraySub(i,repeatCount+i,tempCards[0],1);\n                all_result.push(temparr);\n            }\n        }\n    }else{\n        all_result = tempCards;\n    }\n\n    console.log(all_result);\n\n    return all_result;\n}\n\n//符合的连对\nCardUtil.find_pair_straight = function(last_cards_type, prop, myCards){\n    var all_result = [];\n    PopCardUtil.setSameVulueCardCount(prop);\n    var rank = parseInt(last_cards_type.rank);\n    var repeatCount = last_cards_type.repeatCount;\n    \n    console.log(\"rank:\"+rank+\" repeatCount:\"+repeatCount);\n    \n    var pair = PopCardUtil.getPair();\n    var three = PopCardUtil.getThree();\n    var four = PopCardUtil.getFour();\n    var allpair = [];\n\n    for(var i=0;i<pair.count;i++){\n        allpair.push(pair.cards[i][0]);\n    }\n    for(var i=0;i<three.count;i++){\n        allpair.push(three.cards[i][0]);\n    }\n    for(var i=0;i<four.count;i++){\n        allpair.push(four.cards[i][0]);\n    }\n\n    allpair.sort(config.arrayUp);\n\n    var autoCards = [];\n    var tempCards = [];\n    var tempNum = 0;\n    for(var i = 0;i<allpair.length;i++){\n\n        if(allpair[i]<CardUtil.cardGrade[\"2\"]&&allpair[i]>rank){\n            console.log(\"i:\"+i);\n            if(allpair[i]+1==allpair[i+1]&&allpair[i+1]<CardUtil.cardGrade[\"2\"]){\n                console.log(\"i2:\"+i);\n                if(tempNum+1 == allpair[i+1]){\n                    autoCards.push(tempNum);\n                }\n                if(i==0){\n                    autoCards.push(allpair[i]);\n                }\n                autoCards.push(allpair[i+1]);\n            }else{  \n                tempNum = allpair[i+1];\n                if(autoCards.length>=repeatCount){\n                    tempCards.push(autoCards);\n                }\n                autoCards = [];\n                continue;\n            }\n        }\n    }\n\n    for(var i = 0;i<tempCards.length;i++){\n        if(tempCards[i].length >= repeatCount){\n            var len = tempCards[i].length - repeatCount;\n            var temparr = [];\n            for(var j=0;j<=len;j++){\n                if(tempCards[i].length >= repeatCount+j){\n                    temparr = config.arraySub(j,repeatCount+j,tempCards[i],2);\n                    all_result.push(temparr);\n                }\n            }\n        }\n    }\n\n    console.log(all_result);\n    return all_result;\n}\n\n//符合的飞机不带\nCardUtil.find_three_straight = function(last_cards_type, prop, myCards){\n    var all_result = [];\n    PopCardUtil.setSameVulueCardCount(prop);\n    var rank = parseInt(last_cards_type.rank);\n    var repeatCount = last_cards_type.repeatCount;\n    \n    console.log(\"rank:\"+rank+\" repeatCount:\"+repeatCount);\n\n    var three = PopCardUtil.getThree();\n    var four = PopCardUtil.getFour();\n    var allpair = [];\n\n    for(var i=0;i<three.count;i++){\n        allpair.push(three.cards[i][0]);\n    }\n    for(var i=0;i<four.count;i++){\n        allpair.push(four.cards[i][0]);\n    }\n\n    allpair.sort(config.arrayUp);\n\n    console.log(allpair);\n\n    var autoCards = [];\n    var tempCards = [];\n    var tempNum = 0;\n    for(var i = 0;i<allpair.length;i++){\n\n        if(allpair[i]<CardUtil.cardGrade[\"2\"]&&allpair[i]>rank){\n            console.log(\"i:\"+i);\n            if(allpair[i]+1==allpair[i+1]&&allpair[i+1]<CardUtil.cardGrade[\"2\"]){\n                console.log(\"i2:\"+i);\n                if(tempNum+1 == allpair[i+1]){\n                    autoCards.push(tempNum);\n                }\n                if(i==0){\n                    autoCards.push(allpair[i]);\n                }\n                autoCards.push(allpair[i+1]);\n            }else{  \n                tempNum = allpair[i+1];\n                if(autoCards.length>=repeatCount){\n                    tempCards.push(autoCards);\n                }\n                autoCards = [];\n                continue;\n            }\n        }\n    }\n\n    console.log(tempCards);\n\n    for(var i = 0;i<tempCards.length;i++){\n        if(tempCards[i].length >= repeatCount){\n            var len = tempCards[i].length - repeatCount;\n            var temparr = [];\n            for(var j=0;j<=len;j++){\n                if(tempCards[i].length >= repeatCount+j){\n                    temparr = config.arraySub(j,repeatCount+j,tempCards[i],3);\n                    all_result.push(temparr);\n                }\n            }\n        }\n    }\n\n    console.log(all_result);\n    return all_result;\n}\n\n//符合的飞机带单\nCardUtil.find_three_straight_with_single_card = function(last_cards_type, prop, myCards){\n    var all_result = [];\n    PopCardUtil.setSameVulueCardCount(prop);\n    var rank = parseInt(last_cards_type.rank);\n    var repeatCount = last_cards_type.repeatCount;\n    \n    console.log(\"rank:\"+rank+\" repeatCount:\"+repeatCount);\n\n    var three = PopCardUtil.getThree();\n    var four = PopCardUtil.getFour();\n    var allpair = [];\n\n    for(var i=0;i<three.count;i++){\n        allpair.push(three.cards[i][0]);\n    }\n    for(var i=0;i<four.count;i++){\n        allpair.push(four.cards[i][0]);\n    }\n\n    allpair.sort(config.arrayUp);\n\n    console.log(allpair);\n\n    var autoCards = [];\n    var tempCards = [];\n    var tempNum = 0;\n    for(var i = 0;i<allpair.length;i++){\n\n        if(allpair[i]<CardUtil.cardGrade[\"2\"]&&allpair[i]>rank){\n            console.log(\"i:\"+i);\n            if(allpair[i]+1==allpair[i+1]&&allpair[i+1]<CardUtil.cardGrade[\"2\"]){\n                console.log(\"i2:\"+i);\n                if(tempNum+1 == allpair[i+1]){\n                    autoCards.push(tempNum);\n                }\n                if(i==0){\n                    autoCards.push(allpair[i]);\n                }\n                autoCards.push(allpair[i+1]);\n            }else{  \n                tempNum = allpair[i+1];\n                if(autoCards.length>=repeatCount){\n                    tempCards.push(autoCards);\n                }\n                autoCards = [];\n                continue;\n            }\n        }\n    }\n\n    console.log(tempCards);\n\n    for(var i = 0;i<tempCards.length;i++){\n        if(tempCards[i].length >= repeatCount){\n            var len = tempCards[i].length - repeatCount;\n            var temparr = [];\n            for(var j=0;j<=len;j++){\n                if(tempCards[i].length >= repeatCount+j){\n                    temparr = config.arraySub(j,repeatCount+j,tempCards[i],3);\n                    all_result.push(temparr);\n                }\n            }\n        }\n    }\n\n    console.log(all_result);\n    return all_result;\n}\n//符合的飞机带双\nCardUtil.find_three_straight_with_pair_card = function(last_cards_type, prop, myCards){\n    var all_result = [];\n    PopCardUtil.setSameVulueCardCount(prop);\n    var rank = parseInt(last_cards_type.rank);\n    var repeatCount = last_cards_type.repeatCount;\n    \n    console.log(\"rank:\"+rank+\" repeatCount:\"+repeatCount);\n\n    var three = PopCardUtil.getThree();\n    var four = PopCardUtil.getFour();\n    var allpair = [];\n\n    for(var i=0;i<three.count;i++){\n        allpair.push(three.cards[i][0]);\n    }\n    for(var i=0;i<four.count;i++){\n        allpair.push(four.cards[i][0]);\n    }\n\n    allpair.sort(config.arrayUp);\n\n    console.log(allpair);\n\n    var autoCards = [];\n    var tempCards = [];\n    var tempNum = 0;\n    for(var i = 0;i<allpair.length;i++){\n\n        if(allpair[i]<CardUtil.cardGrade[\"2\"]&&allpair[i]>rank){\n            console.log(\"i:\"+i);\n            if(allpair[i]+1==allpair[i+1]&&allpair[i+1]<CardUtil.cardGrade[\"2\"]){\n                console.log(\"i2:\"+i);\n                if(tempNum+1 == allpair[i+1]){\n                    autoCards.push(tempNum);\n                }\n                if(i==0){\n                    autoCards.push(allpair[i]);\n                }\n                autoCards.push(allpair[i+1]);\n            }else{  \n                tempNum = allpair[i+1];\n                if(autoCards.length>=repeatCount){\n                    tempCards.push(autoCards);\n                }\n                autoCards = [];\n                continue;\n            }\n        }\n    }\n\n    console.log(tempCards);\n\n    for(var i = 0;i<tempCards.length;i++){\n        if(tempCards[i].length >= repeatCount){\n            var len = tempCards[i].length - repeatCount;\n            var temparr = [];\n            for(var j=0;j<=len;j++){\n                if(tempCards[i].length >= repeatCount+j){\n                    temparr = config.arraySub(j,repeatCount+j,tempCards[i],3);\n                    all_result.push(temparr);\n                }\n            }\n        }\n    }\n\n    console.log(all_result);\n    return all_result;\n}\n\n//提示----------------------------------------\nmodule.exports = CardUtil;\n"]}