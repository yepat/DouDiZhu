{"version":3,"sources":["ClockControl.js"],"names":["cc","Class","extends","Component","properties","timeTxt","default","type","Label","clock","Node","timeCount","start","clockX","getPositionX","clockY","getPositionY","schedule","shakeClock","pre","node","active","t","Math","ceil","string","show","time","mt1","moveTo","mt2","mt3","mt4","mt5","mt6","mt7","runAction","sequence","vv","audioMgr","playSFX"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAAU;AACNC,qBAAU,IADJ;AAENC,kBAAOP,GAAGQ;AAFJ,SADF;AAKRC,eAAQ;AACJH,qBAAU,IADN;AAEJC,kBAAOP,GAAGU;AAFN,SALA;AASRC,mBAAU;AATF,KAHP;;AAeLC,SAfK,mBAeI;;AAEL,aAAKC,MAAL,GAAc,KAAKJ,KAAL,CAAWK,YAAX,EAAd;AACA,aAAKC,MAAL,GAAc,KAAKN,KAAL,CAAWO,YAAX,EAAd;;AAEA,aAAKC,QAAL,CAAc,YAAW;AACrB,gBAAG,KAAKN,SAAL,GAAiB,CAApB,EAAsB;AAClB,qBAAKA,SAAL,IAAkB,CAAlB;AACA,oBAAG,KAAKA,SAAL,IAAkB,CAAlB,IAAuB,KAAKA,SAAL,IAAiB,CAA3C,EAA6C;AACzC;AACA,yBAAKO,UAAL;AACH;AACD,oBAAIC,MAAM,EAAV;AACA,oBAAG,KAAKR,SAAL,IAAkB,CAArB,EAAuB;AACnB,yBAAKA,SAAL,GAAiB,CAAjB;AACA;AACA,yBAAKS,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH;AACD,oBAAIC,IAAIC,KAAKC,IAAL,CAAU,KAAKb,SAAf,CAAR;AACA,oBAAGW,IAAI,EAAP,EAAU;AACNH,0BAAM,EAAN;AACH;AACD,qBAAKd,OAAL,CAAaoB,MAAb,GAAsBN,MAAMG,CAA5B;AACH;AACJ,SAnBD,EAmBG,CAnBH;AAoBH,KAxCI;AAyCLI,QAzCK,gBAyCAC,IAzCA,EAyCK;AACN,aAAKP,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA,aAAKV,SAAL,GAAiBgB,IAAjB;AACA,aAAKtB,OAAL,CAAaoB,MAAb,GAAsB,KAAKE,IAA3B;AACH,KA7CI;AA8CLT,cA9CK,wBA8CO;AACR,YAAIU,MAAM5B,GAAG6B,MAAH,CAAU,IAAV,EAAe,KAAKhB,MAApB,EAA2B,KAAKE,MAAL,GAAY,CAAvC,CAAV;AACA,YAAIe,MAAM9B,GAAG6B,MAAH,CAAU,IAAV,EAAe,KAAKhB,MAApB,EAA2B,KAAKE,MAAL,GAAY,CAAvC,CAAV;AACA,YAAIgB,MAAM/B,GAAG6B,MAAH,CAAU,IAAV,EAAe,KAAKhB,MAApB,EAA2B,KAAKE,MAAL,GAAY,CAAvC,CAAV;AACA,YAAIiB,MAAMhC,GAAG6B,MAAH,CAAU,IAAV,EAAe,KAAKhB,MAApB,EAA2B,KAAKE,MAAL,GAAY,CAAvC,CAAV;AACA,YAAIkB,MAAMjC,GAAG6B,MAAH,CAAU,IAAV,EAAe,KAAKhB,MAApB,EAA2B,KAAKE,MAAL,GAAY,CAAvC,CAAV;AACA,YAAImB,MAAMlC,GAAG6B,MAAH,CAAU,IAAV,EAAe,KAAKhB,MAApB,EAA2B,KAAKE,MAAL,GAAY,CAAvC,CAAV;AACA,YAAIoB,MAAMnC,GAAG6B,MAAH,CAAU,IAAV,EAAe,KAAKhB,MAApB,EAA2B,KAAKE,MAAhC,CAAV;AACA,aAAKN,KAAL,CAAW2B,SAAX,CAAqBpC,GAAGqC,QAAH,CAAYT,GAAZ,EAAgBE,GAAhB,EAAoBC,GAApB,EAAwBC,GAAxB,EAA4BC,GAA5B,EAAgCC,GAAhC,EAAoCC,GAApC,CAArB;AACA;AACAnC,WAAGsC,EAAH,CAAMC,QAAN,CAAeC,OAAf,CAAuB,gBAAvB;AACH;AAzDI,CAAT","file":"ClockControl.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        timeTxt : {\n            default : null,\n            type : cc.Label\n        },\n        clock : {\n            default : null,\n            type : cc.Node,\n        },\n        timeCount:30,\n    },\n\n    start () {\n\n        this.clockX = this.clock.getPositionX();\n        this.clockY = this.clock.getPositionY();\n\n        this.schedule(function() {\n            if(this.timeCount > 0){\n                this.timeCount -= 1;\n                if(this.timeCount <= 5 && this.timeCount >=1){\n                    // cc.vv.audioMgr.playSFX(\"timeup_alarm.mp3\");\n                    this.shakeClock();\n                }\n                var pre = \"\";\n                if(this.timeCount <= 0){\n                    this.timeCount = 0;\n                    // this.node.destroy();\n                    this.node.active = false;\n                }\n                var t = Math.ceil(this.timeCount);\n                if(t < 10){\n                    pre = \"\";\n                }\n                this.timeTxt.string = pre + t; \n            }   \n        }, 1);\n    },\n    show(time){\n        this.node.active = true;\n        this.timeCount = time;\n        this.timeTxt.string = \"\" + time; \n    },\n    shakeClock(){\n        var mt1 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt2 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt3 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt4 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt5 = cc.moveTo(0.05,this.clockX,this.clockY-2);\n        var mt6 = cc.moveTo(0.05,this.clockX,this.clockY+2);\n        var mt7 = cc.moveTo(0.05,this.clockX,this.clockY);\n        this.clock.runAction(cc.sequence(mt1,mt2,mt3,mt4,mt5,mt6,mt7));\n        //xx_test\n        cc.vv.audioMgr.playSFX(\"Special_Remind\");\n    }\n\n});\n"]}