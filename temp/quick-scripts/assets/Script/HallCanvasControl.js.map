{"version":3,"sources":["HallCanvasControl.js"],"names":["config","require","dialogManager","cc","Class","extends","Component","properties","hallLayer","default","type","Node","roomLayer","onLoad","game","on","EVENT_HIDE","console","log","vv","audioMgr","stopMusic","EVENT_SHOW","playBGM","start","active","btnRoom1Click","curRoomModelId","ModelId","normal","playSFX","btnRoom2Click","showCommonDialog","roomBackHall","loadSubpackage","wx","loadTask","name","success","res","fail","onProgressUpdate","progress","totalBytesWritten","totalBytesExpectedToWrite"],"mappings":"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","file":"HallCanvasControl.js","sourceRoot":"../../../../assets/Script","sourcesContent":["var config = require(\"config\");\nvar dialogManager = require(\"dialogManager\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        hallLayer : {\n            default : null,\n            type : cc.Node\n        },\n        roomLayer : {\n            default : null,\n            type : cc.Node\n        }\n    },\n    onLoad () {\n        cc.game.on(cc.game.EVENT_HIDE, function(){\n            console.log(\"游戏进入后台\");   \n            // config.stopOnMassage = true;  \n            cc.vv.audioMgr.stopMusic();\n        },this);\n        cc.game.on(cc.game.EVENT_SHOW, function(){\n            console.log(\"重新返回游戏\");\n            cc.vv.audioMgr.playBGM(\"MusicEx_Welcome\");\n        },this);\n\n        cc.vv.audioMgr.playBGM(\"MusicEx_Welcome\");\n\n        // this.loadSubpackage();\n    },\n    start () {\n       this.hallLayer.active = true;\n       this.roomLayer.active = false;\n    },\n    btnRoom1Click(){\n        console.log(\"欢乐场\")\n        this.hallLayer.active = false;\n        this.roomLayer.active = true;\n        config.curRoomModelId = config.ModelId.normal;\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    btnRoom2Click(){\n        console.log(\"赖子场\")\n        // this.hallLayer.active = false;\n        // this.roomLayer.active = true;\n        // config.curRoomModelId = config.ModelId.lazarillo;\n        dialogManager.showCommonDialog(\"温馨提示\",\"赖子场暂未开放！\",null,null);\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    roomBackHall(){\n        console.log(\"反回大厅\")\n        this.hallLayer.active = true;\n        this.roomLayer.active = false;\n        cc.vv.audioMgr.playSFX(\"SpecOk\");\n    },\n    loadSubpackage(){\n        if(typeof(wx)==\"undefined\"){return;}\n\n        if (wx.loadSubpackage) {\n        }else{\n            console.log(\"没有分包加载这个接口\");\n            return;\n        }\n\n        var loadTask = wx.loadSubpackage({\n            name: 'stage1', // name 可以填 name 或者 root\n            success: function(res) {\n              // 分包加载成功后通过 success 回调\n              console.log(\"分包加载成功\",res);\n            },\n            fail: function(res) {\n              // 分包加载失败通过 fail 回调\n              console.log(\"分包加载失败\",res);\n            }\n          })\n          \n          loadTask.onProgressUpdate(res => {\n            console.log('下载进度', res.progress)\n            console.log('已经下载的数据长度', res.totalBytesWritten)\n            console.log('预期需要下载的数据总长度', res.totalBytesExpectedToWrite)\n          })\n    }\n});\n"]}